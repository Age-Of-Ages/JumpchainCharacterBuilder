<UserControl x:Class="JumpchainCharacterBuilder.Views.CosmicPassportView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:viewModel="clr-namespace:JumpchainCharacterBuilder.ViewModel"
             mc:Ignorable="d" 
             d:DataContext="{d:DesignInstance Type=viewModel:CosmicPassportViewModel, IsDesignTimeCreatable=True}"
             d:DesignHeight="714" d:DesignWidth="928">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="2*"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <DockPanel HorizontalAlignment="Center" Grid.Column="1">
                <Button Content="New character"
                        Command="{Binding NewCharacterCommand}"
                        Style="{DynamicResource DataGridButton}"
                        VerticalAlignment="Bottom"
                        DockPanel.Dock="Left"/>

                <Button Content="Delete character"
                        Command="{Binding DeleteCharacterCommand}"
                        Style="{DynamicResource DataGridButton}"
                        VerticalAlignment="Bottom"
                        DockPanel.Dock="Right" Margin="12,0,0,0"/>

                <ContentControl Template="{DynamicResource CharacterSelector}" Margin="12,0,0,0"/>
            </DockPanel>

            <Button Content="Refresh all Passport Data" Grid.Column="2"
                    Command="{Binding RefreshPassportsCommand}" 
                    VerticalAlignment="Bottom" HorizontalAlignment="Center"
                    Style="{DynamicResource DataGridButton}"/>
        </Grid>
        

        <TabControl Grid.Row="1" Margin="0,8,0,0"
                    SelectedIndex="{Binding PassportTabIndex}">
            <TabItem Header="Profile">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" MaxWidth="500"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="1.2*"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <GroupBox Header="Biography">
                        <Grid Margin="4,0,4,0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="1.2*"/>
                                <ColumnDefinition Width="0.15*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>

                            <StackPanel>
                                <TextBlock Text="Name"/>
                                <TextBox Text="{Binding CharacterName, ValidatesOnNotifyDataErrors=True}"
                                         HorizontalAlignment="Stretch"/>
                            </StackPanel>

                            <StackPanel Grid.Row="1">
                                <TextBlock Text="Alias"/>
                                <TextBox Text="{Binding CharacterAlias, ValidatesOnNotifyDataErrors=True}"
                                         HorizontalAlignment="Stretch"/>
                            </StackPanel>
                            
                            <StackPanel Grid.Row="2">
                                <TextBlock Text="Gender" Grid.Row="3"/>
                                <TextBox Text="{Binding CharacterGender, ValidatesOnNotifyDataErrors=True}"
                                         Width="75"/>
                            </StackPanel>

                            <StackPanel Grid.Row="3">
                                <TextBlock Text="Home world/setting"/>
                                <TextBox Text="{Binding CharacterHomeworld, ValidatesOnNotifyDataErrors=True}"
                                         HorizontalAlignment="Stretch"/>
                            </StackPanel>

                            <StackPanel Grid.Column="2">
                                <TextBlock Text="Original age"/>
                                <TextBox Text="{Binding CharacterSelection.Age, ValidatesOnNotifyDataErrors=True}"
                                         Width="50"/>
                            </StackPanel>

                            <StackPanel Grid.Row="1" Grid.Column="2">
                                <TextBlock Text="True age" Grid.Row="2"/>
                                <TextBox Text="{Binding CharacterSelection.TrueAge}"
                                         Width="50" IsReadOnly="True"/>
                            </StackPanel>

                            <StackPanel Grid.Row="2" Grid.Column="2">
                                <TextBlock Text="Joined on Jump #"/>
                                <TextBox Text="{Binding CharacterSelection.FirstJump, ValidatesOnNotifyDataErrors=True}"
                                         Width="40"/>
                            </StackPanel>
                        </Grid>
                    </GroupBox>

                    <GroupBox Header="Physical Characteristics" Grid.Column="1">
                        <Grid Margin="4,0,4,0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="0.15*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="3*"/>
                            </Grid.RowDefinitions>

                            <StackPanel>
                                <TextBlock Text="Species"/>
                                <TextBox Text="{Binding CharacterSpecies, ValidatesOnNotifyDataErrors=True}"
                                         HorizontalAlignment="Stretch"/>
                            </StackPanel>

                            <StackPanel Grid.Column="2">
                                <TextBlock Text="Race"/>
                                <TextBox Text="{Binding CharacterRace, ValidatesOnNotifyDataErrors=True}"
                                         HorizontalAlignment="Stretch"/>
                            </StackPanel>

                            <GroupBox Header="Height" Grid.Row="1">
                                <Grid>
                                    <StackPanel Visibility="{Binding UsingFeetInches, Converter={StaticResource BoolToVis}}">
                                        <TextBlock Text="Feet"/>
                                        <TextBox Text="{Binding CharacterSelection.HeightFeet, ValidatesOnNotifyDataErrors=True}"
                                                     Width="40"/>

                                        <TextBlock Text="Inches" Margin="0,12,0,0"/>
                                        <TextBox Text="{Binding CharacterSelection.HeightInches, ValidatesOnNotifyDataErrors=True}"
                                                     Width="40"/>
                                    </StackPanel>

                                    <StackPanel Visibility="{Binding UsingFeet, Converter={StaticResource BoolToVis}}">
                                        <TextBlock Text="Feet"/>
                                        <TextBox Text="{Binding CharacterSelection.HeightFeet, ValidatesOnNotifyDataErrors=True}"
                                                     Width="40"/>
                                    </StackPanel>

                                    <StackPanel Visibility="{Binding UsingMeters, Converter={StaticResource BoolToVis}}">
                                        <TextBlock Text="Meters"/>
                                        <TextBox Text="{Binding CharacterSelection.HeightMeters, ValidatesOnNotifyDataErrors=True}"
                                                     Width="40"/>
                                    </StackPanel>
                                </Grid>
                            </GroupBox>

                            <GroupBox Header="Weight" Grid.Row="1" Grid.Column="2">
                                <Grid>
                                    <StackPanel Visibility="{Binding UsingPounds, Converter={StaticResource BoolToVis}}">
                                        <TextBlock Text="Weight (Pounds)"/>
                                        <TextBox Text="{Binding CharacterSelection.WeightPounds, ValidatesOnNotifyDataErrors=True}"
                                                 Width="40"/>
                                    </StackPanel>

                                    <StackPanel Visibility="{Binding UsingKilograms, Converter={StaticResource BoolToVis}}">
                                        <TextBlock Text="Weight (Kilograms)"/>
                                        <TextBox Text="{Binding CharacterSelection.WeightKilograms, ValidatesOnNotifyDataErrors=True}"
                                                 Width="40"/>
                                    </StackPanel>
                                </Grid>
                            </GroupBox>
                        </Grid>
                    </GroupBox>

                    <Grid Grid.Column="2" Grid.RowSpan="3">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="*"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>

                        <GroupBox Header="Personality">
                            <Grid>
                                <TextBox Text="{Binding CharacterPersonality, ValidatesOnNotifyDataErrors=True}"
                                     Margin="4,0,4,0" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                                     Style="{DynamicResource LargeTextBoxHintTemplate}"
                                     Tag="Input personality details."/>
                            </Grid>
                        </GroupBox>

                        <GroupBox Header="Physical Description" Grid.Row="1">
                            <Grid>
                                <TextBox Text="{Binding CharacterPhysicalDescription, ValidatesOnNotifyDataErrors=True}"
                                     Margin="4,0,4,0" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                                     Style="{DynamicResource LargeTextBoxHintTemplate}"
                                     Tag="Input physical characteristics."/>
                            </Grid>
                        </GroupBox>
                    </Grid>

                    <GroupBox Header="Traits" Grid.ColumnSpan="2" Grid.RowSpan="2" Grid.Row="1">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>

                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                
                                <DockPanel Margin="4,0,4,0">
                                    <TextBlock Text="Likes" DockPanel.Dock="Top"/>
                                    <TextBox Text="{Binding Likes, Mode=TwoWay, ValidatesOnNotifyDataErrors=True}"
                                             Style="{DynamicResource LargeTextBoxHintTemplate}" HorizontalAlignment="Stretch"
                                             Tag="Insert character Likes here."/>
                                </DockPanel>

                                <DockPanel Grid.Column="1" Margin="4,0,4,0">
                                    <TextBlock Text="Dislikes" DockPanel.Dock="Top"/>
                                    <TextBox Text="{Binding Dislikes, Mode=TwoWay, ValidatesOnNotifyDataErrors=True}"
                                             Style="{DynamicResource LargeTextBoxHintTemplate}" HorizontalAlignment="Stretch"
                                             Tag="Insert character Dislikes here."/>
                                </DockPanel>
                            </Grid>

                            <Grid Grid.Row="1">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <DockPanel Margin="4,0,4,0">
                                    <TextBlock Text="Quirks" DockPanel.Dock="Top"/>
                                    <TextBox Text="{Binding Quirks, Mode=TwoWay, ValidatesOnNotifyDataErrors=True}"
                                             Style="{DynamicResource LargeTextBoxHintTemplate}" HorizontalAlignment="Stretch"
                                             Tag="Insert character Quirks here."/>
                                </DockPanel>

                                <DockPanel Grid.Column="1" Margin="4,0,4,0">
                                    <TextBlock Text="Hobbies" DockPanel.Dock="Top"/>
                                    <TextBox Text="{Binding Hobbies, Mode=TwoWay, ValidatesOnNotifyDataErrors=True}"
                                             Style="{DynamicResource LargeTextBoxHintTemplate}" HorizontalAlignment="Stretch"
                                             Tag="Insert character Hobbies here."/>
                                </DockPanel>

                                <DockPanel Grid.Column="2" Margin="4,0,4,0">
                                    <TextBlock Text="Goals" DockPanel.Dock="Top"/>
                                    <TextBox Text="{Binding Goals, Mode=TwoWay, ValidatesOnNotifyDataErrors=True}"
                                             Style="{DynamicResource LargeTextBoxHintTemplate}" HorizontalAlignment="Stretch"
                                             Tag="Insert character Goals here."/>
                                </DockPanel>
                            </Grid>
                        </Grid>
                    </GroupBox>
                </Grid>
            </TabItem>
            <TabItem Header="Alt-forms">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" MaxWidth="350"/>
                        <ColumnDefinition Width="2*"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="2*"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <DockPanel Margin="4,12,4,0">
                        <Grid DockPanel.Dock="Bottom" Margin="0,4,0,4">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>

                            <Button Content="New Form"
                                    Command="{Binding NewAltFormCommand}"
                                    Style="{DynamicResource DataGridButton}"/>

                            <Button Content="Delete Form"
                                    Command="{Binding DeleteAltFormCommand}"
                                    Style="{DynamicResource DataGridButton}"
                                    Grid.Column="2"/>
                        </Grid>

                        <ListView ItemsSource="{Binding CharacterAltFormList}"
                                  SelectedItem="{Binding CharacterAltFormSelection}"
                                  SelectedIndex="{Binding CharacterAltFormSelectionIndex}"
                                  Loaded="ListView_Loaded" SizeChanged="ListView_SizeChanged" 
                                  ScrollViewer.ScrollChanged="ListView_ScrollChanged" Tag="0,1">
                            <ListView.View>
                                <GridView>
                                    <GridView.Columns>
                                        <GridViewColumn Header="Name" Width="Auto"
                                                        CellTemplate="{StaticResource ResourceKey=GridViewDefaultColumn}"
                                                        DisplayMemberBinding="{Binding AltFormName}"/>
                                        <GridViewColumn Header="Species/Race" Width="Auto" 
                                                        CellTemplate="{StaticResource ResourceKey=GridViewDefaultColumn}"
                                                        DisplayMemberBinding="{Binding AltFormSpecies}"/>
                                    </GridView.Columns>
                                </GridView>
                            </ListView.View>
                        </ListView>
                    </DockPanel>

                    <GroupBox Grid.Column="1" Header="Alt-Form Details">
                        <!--<GroupBox.Visibility>
                            <MultiBinding Converter="{StaticResource ListContainsToVis}">
                                <Binding Path="CharacterAltFormSelection"/>
                                <Binding Path="CharacterAltFormList"/>
                            </MultiBinding>
                        </GroupBox.Visibility>-->
                        <Grid Margin="4,0,4,0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" MaxWidth="250"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="2*"/>
                            </Grid.RowDefinitions>

                            <StackPanel>
                                <TextBlock Text="Name"/>
                                <TextBox Text="{Binding AltFormName, ValidatesOnNotifyDataErrors=True}"
                                         HorizontalAlignment="Stretch"/>
                            </StackPanel>

                            <StackPanel Grid.Row="1">
                                <TextBlock Text="Species/Race"/>
                                <TextBox Text="{Binding AltFormSpecies, ValidatesOnNotifyDataErrors=True}"
                                         HorizontalAlignment="Stretch"/>
                            </StackPanel>

                            <DockPanel Grid.Row="2">
                                <TextBlock Text="Description" DockPanel.Dock="Top"/>
                                <TextBox Text="{Binding AltFormDescription, ValidatesOnNotifyDataErrors=True}"
                                         HorizontalAlignment="Stretch"
                                         Style="{DynamicResource LargeTextBoxHintTemplate}"
                                         Tag="Insert Alt-Form description."/>
                            </DockPanel>


                            <DockPanel Grid.Column="1" Grid.RowSpan="2" Margin="8,0,8,0">
                                <TextBlock Text="Strengths" DockPanel.Dock="Top"/>
                                <TextBox Text="{Binding AltFormStrengths, ValidatesOnNotifyDataErrors=True}"
                                         HorizontalAlignment="Stretch"
                                         Style="{DynamicResource LargeTextBoxHintTemplate}"
                                         Tag="Insert Alt-form strengths."/>
                            </DockPanel>

                            <DockPanel Grid.Column="2" Grid.RowSpan="2" Margin="8,0,8,0">
                                <TextBlock Text="Weaknesses" DockPanel.Dock="Top"/>
                                <TextBox Text="{Binding AltFormWeaknesses, ValidatesOnNotifyDataErrors=True}"
                                         HorizontalAlignment="Stretch"
                                         Style="{DynamicResource LargeTextBoxHintTemplate}"
                                         Tag="Insert Alt-form weaknesses."/>
                            </DockPanel>
                        </Grid>
                    </GroupBox>
                </Grid>
            </TabItem>
            <TabItem Header="Perks">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="2*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <TabControl ItemsSource="{Binding ActivePerkLists}"
                                SelectedValue="{Binding PerkTabName}" 
                                SelectedValuePath="Key"
                                SelectedIndex="{Binding PerkTabIndex}">
                        <TabControl.ItemTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="{Binding Key}"/>
                                </StackPanel>
                            </DataTemplate>
                        </TabControl.ItemTemplate>
                        <TabControl.ContentTemplate>
                            <DataTemplate>
                                <ListView ItemsSource="{Binding Value}"
                                          SelectedItem="{Binding RelativeSource={RelativeSource AncestorType={x:Type TabControl}}, Path=DataContext.PerkSelection}"
                                          Loaded="ListView_Loaded" SizeChanged="ListView_SizeChanged" 
                                          ScrollViewer.ScrollChanged="ListView_ScrollChanged" Tag="1">
                                    <ListView.View>
                                        <GridView>
                                            <GridView.Columns>
                                                <GridViewColumn Header="Name" Width="170"
                                                                CellTemplate="{StaticResource ResourceKey=GridViewNameColumn}"/>
                                                <GridViewColumn Header="Description" Width="Auto" 
                                                                CellTemplate="{StaticResource ResourceKey=GridViewDescriptionColumn}"/>
                                            </GridView.Columns>
                                        </GridView>
                                    </ListView.View>
                                </ListView>
                            </DataTemplate>
                        </TabControl.ContentTemplate>
                    </TabControl>

                    <GroupBox Header="Perk Details" Grid.Column="1">
                        <!--<GroupBox.Visibility>
                            <MultiBinding Converter="{StaticResource ListContainsToVis}">
                                <Binding Path="PerkSelection"/>
                                <Binding Path="CurrentPerkList"/>
                            </MultiBinding>
                        </GroupBox.Visibility>-->
                        <Grid Margin="4,0,4,0">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="3*"/>
                            </Grid.RowDefinitions>

                            <StackPanel>
                                <TextBlock Text="Name"/>
                                <TextBox Text="{Binding PerkName}" Width="140"/>

                                <TextBlock Text="Source Jump" Margin="0,12,0,0"/>
                                <TextBox Text="{Binding PerkSelection.SourceJump}" IsReadOnly="True" Width="140"/>
                            </StackPanel>

                            <DockPanel Grid.Row="1">
                                <TextBlock Text="Description" DockPanel.Dock="Top"/>
                                <TextBox Text="{Binding PerkDescription, ValidatesOnNotifyDataErrors=True}"
                                         HorizontalAlignment="Stretch"
                                         Style="{DynamicResource LargeTextBox}"/>
                            </DockPanel>
                        </Grid>
                    </GroupBox>
                </Grid>
                
            </TabItem>
            <TabItem Header="Attributes">
                <Grid>
                    <TabControl Margin="0,4,0,0">
                        <TabItem Header="Attribute Lists">
                            <DockPanel Margin="0,4,0,0">
                                <Button Content="Refresh Attribute Ranks" Command="{Binding RefreshAttributesCommand}"
                                        DockPanel.Dock="Top" HorizontalAlignment="Center"
                                        Style="{DynamicResource DataGridButton}"/>

                                <TabControl Margin="0,4,0,0">
                                    <TabItem Header="Physical Attributes">
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*" MaxWidth="300"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="*" MaxWidth="500"/>
                                            </Grid.ColumnDefinitions>

                                            <DockPanel>
                                                <Grid DockPanel.Dock="Bottom" Margin="0,4,0,4">
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="Auto"/>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="Auto"/>
                                                    </Grid.ColumnDefinitions>
                                                    <Grid.RowDefinitions>
                                                        <RowDefinition Height="*"/>
                                                        <RowDefinition Height="*" MinHeight="12"/>
                                                        <RowDefinition Height="*"/>
                                                    </Grid.RowDefinitions>

                                                    <Button Content="New" 
                                                            Command="{Binding NewPhysicalAttributeCommand}"
                                                            Style="{DynamicResource DataGridButton}"/>

                                                    <Button Content="Delete"
                                                            Command="{Binding DeletePhysicalAttributeCommand}"
                                                            Style="{DynamicResource DataGridButton}"
                                                            Grid.Column="2"/>

                                                    <Button Content="Move Up" 
                                                            Command="{Binding MovePhysicalAttributeUpCommand}"
                                                            Style="{DynamicResource DataGridButton}"
                                                            Grid.Row="2"/>

                                                    <Button Content="Move Down"
                                                            Command="{Binding MovePhysicalAttributeDownCommand}"
                                                            Style="{DynamicResource DataGridButton}"
                                                            Grid.Column="2"
                                                            Grid.Row="2"/>
                                                </Grid>

                                                <ListView ItemsSource="{Binding CurrentPhysicalAttributeList}"
                                                          SelectedItem="{Binding CurrentPhysicalAttributeSelection}"
                                                          SelectedIndex="{Binding CurrentPhysicalAttributeIndex}"
                                                          Loaded="ListView_Loaded" SizeChanged="ListView_SizeChanged" 
                                                          ScrollViewer.ScrollChanged="ListView_ScrollChanged" Tag="0">
                                                    <ListView.View>
                                                        <GridView>
                                                            <GridView.Columns>
                                                                <GridViewColumn Header="Attribute Name" Width="Auto"
                                                                                CellTemplate="{StaticResource ResourceKey=GridViewDefaultColumn}"
                                                                                DisplayMemberBinding="{Binding Name}"/>
                                                                <GridViewColumn Header="Attribute Rank" Width="100" 
                                                                                CellTemplate="{StaticResource ResourceKey=GridViewDefaultColumn}"
                                                                                DisplayMemberBinding="{Binding DisplayRank}"/>
                                                            </GridView.Columns>
                                                        </GridView>
                                                    </ListView.View>
                                                </ListView>
                                            </DockPanel>

                                            <GroupBox Grid.Column="2" Grid.RowSpan="2" Header="Attribute Details">
                                                <!--<GroupBox.Visibility>
                                                    <MultiBinding Converter="{StaticResource ListContainsToVis}">
                                                        <Binding Path="CurrentPhysicalAttributeSelection"/>
                                                        <Binding Path="CurrentPhysicalAttributeList"/>
                                                    </MultiBinding>
                                                </GroupBox.Visibility>-->
                                                <Grid Margin="4,0,4,0">
                                                    <Grid.RowDefinitions>
                                                        <RowDefinition Height="*"/>
                                                        <RowDefinition Height="*"/>
                                                        <RowDefinition Height="1.5*"/>
                                                        <RowDefinition Height="1.5*"/>
                                                        <RowDefinition Height="3*"/>
                                                    </Grid.RowDefinitions>

                                                    <StackPanel>
                                                        <TextBlock Text="Attribute Name"/>
                                                        <TextBox Text="{Binding CurrentPhysicalAttributeName, ValidatesOnNotifyDataErrors=True}"
                                                                 Width="120"/>
                                                    </StackPanel>

                                                    <StackPanel Grid.Row="1">
                                                        <TextBlock Text="Attribute Rank"/>
                                                        <TextBox Text="{Binding CurrentPhysicalAttributeSelection.DisplayRank}" IsReadOnly="True"
                                                                 Width="60"/>
                                                    </StackPanel>

                                                    <StackPanel Grid.Row="2">   
                                                        <TextBlock Text="Attribute Base Rank"/>
                                                        <TextBlock Text="Note: Overrides total rank if it is below this value." 
                                                                   TextWrapping="Wrap"/>
                                                        <ComboBox ItemsSource="{Binding AttributeRankDictionary}"
                                                                  DisplayMemberPath="Key"
                                                                  SelectedValuePath="Value"
                                                                  SelectedValue="{Binding CurrentPhysicalAttributeSelection.BaseRank}"
                                                                  Width="100" HorizontalAlignment="Left"/>
                                                    </StackPanel>

                                                    <StackPanel Grid.Row="3">
                                                        <TextBlock Text="Attribute Modified Rank"/>
                                                        <TextBlock Text="Note: Adds to the total rank like any other source."
                                                                   TextWrapping="Wrap"/>
                                                        <ComboBox ItemsSource="{Binding AttributeRankDictionary}"
                                                                  DisplayMemberPath="Key"
                                                                  SelectedValuePath="Value"
                                                                  SelectedValue="{Binding CurrentPhysicalAttributeSelection.ModRank}"
                                                                  Width="100" HorizontalAlignment="Left"/>
                                                    </StackPanel>

                                                    <DockPanel Grid.Row="4">
                                                        <TextBlock Text="Sources" DockPanel.Dock="Top"/>
                                                        <ListView ItemsSource="{Binding CurrentPhysicalAttributeSelection.SourceList}"
                                                                  Loaded="ListView_Loaded" SizeChanged="ListView_SizeChanged" 
                                                                  ScrollViewer.ScrollChanged="ListView_ScrollChanged" Tag="0,1">
                                                            <ListView.View>
                                                                <GridView>
                                                                    <GridView.Columns>
                                                                        <GridViewColumn Header="Jump" DisplayMemberBinding="{Binding SourceJump}" Width="Auto"/>
                                                                        <GridViewColumn Header="Purchase" DisplayMemberBinding="{Binding SourcePurchase}" Width="Auto"/>
                                                                        <GridViewColumn Header="Rank" DisplayMemberBinding="{Binding SourceRank}" Width="65"/>
                                                                    </GridView.Columns>
                                                                </GridView>
                                                            </ListView.View>
                                                        </ListView>
                                                    </DockPanel>
                                                </Grid>
                                            </GroupBox>
                                        </Grid>
                                    </TabItem>
                                    <TabItem Header="Mental Attributes">
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*" MaxWidth="300"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="*" MaxWidth="500"/>
                                            </Grid.ColumnDefinitions>

                                            <DockPanel>
                                                <Grid DockPanel.Dock="Bottom" Margin="0,4,0,4">
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="Auto"/>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="Auto"/>
                                                    </Grid.ColumnDefinitions>
                                                    <Grid.RowDefinitions>
                                                        <RowDefinition Height="*"/>
                                                        <RowDefinition Height="*" MinHeight="12"/>
                                                        <RowDefinition Height="*"/>
                                                    </Grid.RowDefinitions>

                                                    <Button Content="New" 
                                                            Command="{Binding NewMentalAttributeCommand}"
                                                            Style="{DynamicResource DataGridButton}"/>

                                                    <Button Content="Delete"
                                                            Command="{Binding DeleteMentalAttributeCommand}"
                                                            Style="{DynamicResource DataGridButton}"
                                                            Grid.Column="2"/>

                                                    <Button Content="Move Up" 
                                                            Command="{Binding MoveMentalAttributeUpCommand}"
                                                            Style="{DynamicResource DataGridButton}"
                                                            Grid.Row="2"/>

                                                    <Button Content="Move Down"
                                                            Command="{Binding MoveMentalAttributeDownCommand}"
                                                            Style="{DynamicResource DataGridButton}"
                                                            Grid.Column="2"
                                                            Grid.Row="2"/>
                                                </Grid>

                                                <ListView ItemsSource="{Binding CurrentMentalAttributeList}"
                                                          SelectedItem="{Binding CurrentMentalAttributeSelection}"
                                                          SelectedIndex="{Binding CurrentMentalAttributeIndex}"
                                                          Loaded="ListView_Loaded" SizeChanged="ListView_SizeChanged" 
                                                          ScrollViewer.ScrollChanged="ListView_ScrollChanged" Tag="0">
                                                    <ListView.View>
                                                        <GridView>
                                                            <GridView.Columns>
                                                                <GridViewColumn Header="Attribute Name" Width="Auto"
                                                                                CellTemplate="{StaticResource ResourceKey=GridViewDefaultColumn}"
                                                                                DisplayMemberBinding="{Binding Name}"/>
                                                                <GridViewColumn Header="Attribute Rank" Width="100" 
                                                                                CellTemplate="{StaticResource ResourceKey=GridViewDefaultColumn}"
                                                                                DisplayMemberBinding="{Binding DisplayRank}"/>
                                                            </GridView.Columns>
                                                        </GridView>
                                                    </ListView.View>
                                                </ListView>
                                            </DockPanel>

                                            <GroupBox Grid.Column="2" Grid.RowSpan="2" Header="Attribute Details">
                                                <!--<GroupBox.Visibility>
                                                        <MultiBinding Converter="{StaticResource ListContainsToVis}">
                                                            <Binding Path="CurrentMentalAttributeSelection"/>
                                                            <Binding Path="CurrentMentalAttributeList"/>
                                                        </MultiBinding>
                                                    </GroupBox.Visibility>-->
                                                <Grid Margin="4,0,4,0">
                                                    <Grid.RowDefinitions>
                                                        <RowDefinition Height="*"/>
                                                        <RowDefinition Height="*"/>
                                                        <RowDefinition Height="1.5*"/>
                                                        <RowDefinition Height="1.5*"/>
                                                        <RowDefinition Height="3*"/>
                                                    </Grid.RowDefinitions>

                                                    <StackPanel>
                                                        <TextBlock Text="Attribute Name"/>
                                                        <TextBox Text="{Binding CurrentMentalAttributeName, ValidatesOnNotifyDataErrors=True}"
                                                                 Width="120"/>
                                                    </StackPanel>

                                                    <StackPanel Grid.Row="1">
                                                        <TextBlock Text="Attribute Rank"/>
                                                        <TextBox Text="{Binding CurrentMentalAttributeSelection.DisplayRank}" IsReadOnly="True"
                                                                 Width="60"/>
                                                    </StackPanel>

                                                    <StackPanel Grid.Row="2">
                                                        <TextBlock Text="Attribute Base Rank"/>
                                                        <TextBlock Text="Note: Overrides total rank if it is below this value." 
                                                                   TextWrapping="Wrap"/>
                                                        <ComboBox ItemsSource="{Binding AttributeRankDictionary}"
                                                                  DisplayMemberPath="Key"
                                                                  SelectedValuePath="Value"
                                                                  SelectedValue="{Binding CurrentMentalAttributeSelection.BaseRank}"
                                                                  Width="100" HorizontalAlignment="Left"/>
                                                    </StackPanel>

                                                    <StackPanel Grid.Row="3">
                                                        <TextBlock Text="Attribute Modified Rank"/>
                                                        <TextBlock Text="Note: Adds to the total rank like any other source."
                                                                   TextWrapping="Wrap"/>
                                                        <ComboBox ItemsSource="{Binding AttributeRankDictionary}"
                                                                  DisplayMemberPath="Key"
                                                                  SelectedValuePath="Value"
                                                                  SelectedValue="{Binding CurrentMentalAttributeSelection.ModRank}"
                                                                  Width="100" HorizontalAlignment="Left"/>
                                                    </StackPanel>

                                                    <DockPanel Grid.Row="4">
                                                        <TextBlock Text="Sources" DockPanel.Dock="Top"/>
                                                        <ListView ItemsSource="{Binding CurrentMentalAttributeSelection.SourceList}"
                                                                  Loaded="ListView_Loaded" SizeChanged="ListView_SizeChanged" 
                                                                  ScrollViewer.ScrollChanged="ListView_ScrollChanged" Tag="0,1">
                                                            <ListView.View>
                                                                <GridView>
                                                                    <GridView.Columns>
                                                                        <GridViewColumn Header="Jump" DisplayMemberBinding="{Binding SourceJump}" Width="Auto"/>
                                                                        <GridViewColumn Header="Purchase" DisplayMemberBinding="{Binding SourcePurchase}" Width="Auto"/>
                                                                        <GridViewColumn Header="Rank" DisplayMemberBinding="{Binding SourceRank}" Width="65"/>
                                                                    </GridView.Columns>
                                                                </GridView>
                                                            </ListView.View>
                                                        </ListView>
                                                    </DockPanel>
                                                </Grid>
                                            </GroupBox>
                                        </Grid>
                                    </TabItem>
                                    <TabItem Header="Supernatural Attributes">
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*" MaxWidth="300"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="*" MaxWidth="500"/>
                                            </Grid.ColumnDefinitions>

                                            <DockPanel>
                                                <Grid DockPanel.Dock="Bottom" Margin="0,4,0,4">
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="Auto"/>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="Auto"/>
                                                    </Grid.ColumnDefinitions>
                                                    <Grid.RowDefinitions>
                                                        <RowDefinition Height="*"/>
                                                        <RowDefinition Height="*" MinHeight="12"/>
                                                        <RowDefinition Height="*"/>
                                                    </Grid.RowDefinitions>

                                                    <Button Content="New" 
                                                            Command="{Binding NewSupernaturalAttributeCommand}"
                                                            Style="{DynamicResource DataGridButton}"/>

                                                    <Button Content="Delete"
                                                            Command="{Binding DeleteSupernaturalAttributeCommand}"
                                                            Style="{DynamicResource DataGridButton}"
                                                            Grid.Column="2"/>

                                                    <Button Content="Move Up" 
                                                            Command="{Binding MoveSupernaturalAttributeUpCommand}"
                                                            Style="{DynamicResource DataGridButton}"
                                                            Grid.Row="2"/>

                                                    <Button Content="Move Down"
                                                            Command="{Binding MoveSupernaturalAttributeDownCommand}"
                                                            Style="{DynamicResource DataGridButton}"
                                                            Grid.Column="2"
                                                            Grid.Row="2"/>
                                                </Grid>

                                                <ListView ItemsSource="{Binding CurrentSupernaturalAttributeList}"
                                                          SelectedItem="{Binding CurrentSupernaturalAttributeSelection}"
                                                          SelectedIndex="{Binding CurrentSupernaturalAttributeIndex}"
                                                          Loaded="ListView_Loaded" SizeChanged="ListView_SizeChanged" 
                                                          ScrollViewer.ScrollChanged="ListView_ScrollChanged" Tag="0">
                                                    <ListView.View>
                                                        <GridView>
                                                            <GridView.Columns>
                                                                <GridViewColumn Header="Attribute Name" Width="Auto"
                                                                                CellTemplate="{StaticResource ResourceKey=GridViewDefaultColumn}"
                                                                                DisplayMemberBinding="{Binding Name}"/>
                                                                <GridViewColumn Header="Attribute Rank" Width="100" 
                                                                                CellTemplate="{StaticResource ResourceKey=GridViewDefaultColumn}"
                                                                                DisplayMemberBinding="{Binding DisplayRank}"/>
                                                            </GridView.Columns>
                                                        </GridView>
                                                    </ListView.View>
                                                </ListView>
                                            </DockPanel>

                                            <GroupBox Grid.Column="2" Grid.RowSpan="2" Header="Attribute Details">
                                                <!--<GroupBox.Visibility>
                                                        <MultiBinding Converter="{StaticResource ListContainsToVis}">
                                                            <Binding Path="CurrentSupernaturalAttributeSelection"/>
                                                            <Binding Path="CurrentSupernaturalAttributeList"/>
                                                        </MultiBinding>
                                                    </GroupBox.Visibility>-->
                                                <Grid Margin="4,0,4,0">
                                                    <Grid.RowDefinitions>
                                                        <RowDefinition Height="*"/>
                                                        <RowDefinition Height="*"/>
                                                        <RowDefinition Height="1.5*"/>
                                                        <RowDefinition Height="1.5*"/>
                                                        <RowDefinition Height="3*"/>
                                                    </Grid.RowDefinitions>

                                                    <StackPanel>
                                                        <TextBlock Text="Attribute Name"/>
                                                        <TextBox Text="{Binding CurrentSupernaturalAttributeName, ValidatesOnNotifyDataErrors=True}"
                                                                 Width="120"/>
                                                    </StackPanel>

                                                    <StackPanel Grid.Row="1">
                                                        <TextBlock Text="Attribute Rank"/>
                                                        <TextBox Text="{Binding CurrentSupernaturalAttributeSelection.DisplayRank}" IsReadOnly="True"
                                                                 Width="60"/>
                                                    </StackPanel>

                                                    <StackPanel Grid.Row="2">
                                                        <TextBlock Text="Attribute Base Rank"/>
                                                        <TextBlock Text="Note: Overrides total rank if it is below this value." 
                                                                   TextWrapping="Wrap"/>
                                                        <ComboBox ItemsSource="{Binding AttributeRankDictionary}"
                                                                  DisplayMemberPath="Key"
                                                                  SelectedValuePath="Value"
                                                                  SelectedValue="{Binding CurrentSupernaturalAttributeSelection.BaseRank}"
                                                                  Width="100" HorizontalAlignment="Left"/>
                                                    </StackPanel>

                                                    <StackPanel Grid.Row="3">
                                                        <TextBlock Text="Attribute Modified Rank"/>
                                                        <TextBlock Text="Note: Adds to the total rank like any other source."
                                                                   TextWrapping="Wrap"/>
                                                        <ComboBox ItemsSource="{Binding AttributeRankDictionary}"
                                                                  DisplayMemberPath="Key"
                                                                  SelectedValuePath="Value"
                                                                  SelectedValue="{Binding CurrentSupernaturalAttributeSelection.ModRank}"
                                                                  Width="100" HorizontalAlignment="Left"/>
                                                    </StackPanel>

                                                    <DockPanel Grid.Row="4">
                                                        <TextBlock Text="Sources" DockPanel.Dock="Top"/>
                                                        <ListView ItemsSource="{Binding CurrentSupernaturalAttributeSelection.SourceList}"
                                                                  Loaded="ListView_Loaded" SizeChanged="ListView_SizeChanged" 
                                                                  ScrollViewer.ScrollChanged="ListView_ScrollChanged" Tag="0,1">
                                                            <ListView.View>
                                                                <GridView>
                                                                    <GridView.Columns>
                                                                        <GridViewColumn Header="Jump" DisplayMemberBinding="{Binding SourceJump}" Width="Auto"/>
                                                                        <GridViewColumn Header="Purchase" DisplayMemberBinding="{Binding SourcePurchase}" Width="Auto"/>
                                                                        <GridViewColumn Header="Rank" DisplayMemberBinding="{Binding SourceRank}" Width="65"/>
                                                                    </GridView.Columns>
                                                                </GridView>
                                                            </ListView.View>
                                                        </ListView>
                                                    </DockPanel>
                                                </Grid>
                                            </GroupBox>
                                        </Grid>
                                    </TabItem>
                                </TabControl>
                            </DockPanel>
                        </TabItem>
                        <TabItem Header="Rank Descriptions">
                            <ScrollViewer VerticalScrollBarVisibility="Auto">
                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="*"/>
                                        <RowDefinition Height="*"/>
                                        <RowDefinition Height="*"/>
                                        <RowDefinition Height="*"/>
                                        <RowDefinition Height="*"/>
                                    </Grid.RowDefinitions>

                                    <GroupBox Header="Rank Explanation">
                                        <StackPanel>
                                            <TextBlock Text="Ranks are split into a set of four tiers, each representing a general bracket of capabilities. The four tiers are as follows: Human, Extraordinary, Legendary, and Mythic."
                                                   TextWrapping="Wrap"/>

                                            <TextBlock Text="These tiers are split into a standard letter grading system, with each tier past Human having a special prefix to indicate the tier."
                                                   TextWrapping="Wrap" Margin="0,12,0,0"/>

                                            <TextBlock Text="Beyond simply moving from rank to rank, it is also possible to gain 'plus ranks', which represent more granular progress between ranks. Each rank has three corrosponding plus ranks, and will progress to the next rank rather than achieving a fourth plus rank."
                                                   TextWrapping="Wrap" Margin="0,12,0,0"/>

                                            <TextBlock Text="The difficulty of achieving a plus rank through natural means increases exponentially as the attribute's rank grows. It will generally be unfeasible to develop an attribute beyond the Extraordinary tier by natural means, at least without an uncapper and training boosters."
                                                   TextWrapping="Wrap" Margin="0,12,0,0"/>

                                            <TextBlock Text="Furthermore, breaching the boundary between tiers is more difficult than any unaided training or Perks within that tier could realistically accomplish. Going from peak-peak-human to truly, genuinely superhuman requires something special, and the gap only grows for later tiers."
                                                   TextWrapping="Wrap" Margin="0,12,0,0"/>
                                        </StackPanel>
                                    </GroupBox>

                                    <GroupBox Header="Human" Grid.Row="1">
                                        <StackPanel>
                                            <TextBlock Text="Ranks in this tier represent attributes of a level that can be humanly achieved without outside assistance. Of course, higher ranks are exceptionally rare to see in an unaided human, due to the difficulty of naturally achieving peak-human capabilities."
                                                       TextWrapping="Wrap"/>

                                            <TextBlock Text="An 'A' rank naturally represents an attribute that has achieved peak-human status. For inherently supernatural attributes, such as magical capability, ranks in this tier are more about general capability being within reason rather than specifically adhering to a 'human' level of ability, which varies too wildly to be useful."
                                                       TextWrapping="Wrap" Margin="0,12,0,0"/>
                                        </StackPanel>
                                    </GroupBox>

                                    <GroupBox Header="Extraordinary" Grid.Row="2">
                                        <StackPanel>
                                            <TextBlock Text="Ranks in this tier represents attributes that have crossed beyond what a human can achieve. Comic-book style 'peak-human' attributes would generally be in this tier. Reaching even the lowest ranks of this tier will typically require outside aid, such as a Perk granting you that level of ability."
                                                       TextWrapping="Wrap"/>

                                            <TextBlock Text="Most low-to-mid grade superpowers that affect attributes, such as super-strength, will also be in this tier."
                                                       TextWrapping="Wrap" Margin="0,12,0,0"/>
                                        </StackPanel>
                                    </GroupBox>

                                    <GroupBox Header="Legendary" Grid.Row="3">
                                        <StackPanel>
                                            <TextBlock Text="Ranks in the Legendary tier represent attributes that are typically not achievable by humans even with superpowers, save for the most powerful ones. Exceptional feats like having the strength to lift a mountain wouldn't be unreasonable to see here. "
                                                       TextWrapping="Wrap"/>

                                            <TextBlock Text="Outside of truly exceptional circumstances, this is where most attributes will cap out."
                                                       TextWrapping="Wrap" Margin="0,12,0,0"/>
                                        </StackPanel>
                                    </GroupBox>

                                    <GroupBox Header="Mythic" Grid.Row="4">
                                        <StackPanel>
                                            <TextBlock Text="Attributes in this tier are the stuff of myth, without a doubt. It takes something truly unique to raise an attribute to this level. Forget lifting mountains with your strength, you could lasso the sun to pull it closer."
                                                       TextWrapping="Wrap"/>

                                            <TextBlock Text="The higher ranks in this tier represent god-like attributes. Even in the lower ones, however, feats performed with this tier are likely to stray into the realm of the conceptual."
                                                       TextWrapping="Wrap" Margin="0,12,0,0"/>
                                        </StackPanel>
                                    </GroupBox>
                                </Grid>
                            </ScrollViewer>
                        </TabItem>
                    </TabControl>
                </Grid>
            </TabItem>
            <TabItem Header="Skills">
                <Grid>
                    <TabControl Margin="0,4,0,0">
                        <TabItem Header="Skill Lists">
                            <DockPanel Margin="0,4,0,0">

                                <Button Content="Refresh Skill Ranks" Command="{Binding RefreshSkillsCommand}"
                                        DockPanel.Dock="Top" HorizontalAlignment="Center"
                                        Style="{DynamicResource DataGridButton}"/>

                                <TabControl Margin="0,4,0,0">
                                    <TabItem Header="Physical Skills">
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*" MaxWidth="300"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="*" MaxWidth="500"/>
                                            </Grid.ColumnDefinitions>

                                            <DockPanel>
                                                <Grid DockPanel.Dock="Bottom" Margin="0,4,0,4">
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="Auto"/>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="Auto"/>
                                                    </Grid.ColumnDefinitions>
                                                    <Grid.RowDefinitions>
                                                        <RowDefinition Height="*"/>
                                                        <RowDefinition Height="*" MinHeight="12"/>
                                                        <RowDefinition Height="*"/>
                                                    </Grid.RowDefinitions>

                                                    <Button Content="New" 
                                                            Command="{Binding NewPhysicalSkillCommand}"
                                                            Style="{DynamicResource DataGridButton}"/>

                                                    <Button Content="Delete"
                                                            Command="{Binding DeletePhysicalSkillCommand}"
                                                            Style="{DynamicResource DataGridButton}"
                                                            Grid.Column="2"/>

                                                    <Button Content="Move Up" 
                                                            Command="{Binding MovePhysicalSkillUpCommand}"
                                                            Style="{DynamicResource DataGridButton}"
                                                            Grid.Row="2"/>

                                                    <Button Content="Move Down"
                                                            Command="{Binding MovePhysicalSkillDownCommand}"
                                                            Style="{DynamicResource DataGridButton}"
                                                            Grid.Column="2"
                                                            Grid.Row="2"/>
                                                </Grid>

                                                <ListView ItemsSource="{Binding CurrentPhysicalSkillList}"
                                                          SelectedItem="{Binding CurrentPhysicalSkillSelection}"
                                                          SelectedIndex="{Binding CurrentPhysicalSkillIndex}"
                                                          Loaded="ListView_Loaded" SizeChanged="ListView_SizeChanged" 
                                                          ScrollViewer.ScrollChanged="ListView_ScrollChanged" Tag="0">
                                                    <ListView.View>
                                                        <GridView>
                                                            <GridView.Columns>
                                                                <GridViewColumn Header="Skill Name" Width="Auto"
                                                                                CellTemplate="{StaticResource ResourceKey=GridViewDefaultColumn}"
                                                                                DisplayMemberBinding="{Binding Name}"/>
                                                                <GridViewColumn Header="Skill Rank" Width="100" 
                                                                                CellTemplate="{StaticResource ResourceKey=GridViewDefaultColumn}"
                                                                                DisplayMemberBinding="{Binding DisplayRank}"/>
                                                            </GridView.Columns>
                                                        </GridView>
                                                    </ListView.View>
                                                </ListView>
                                            </DockPanel>

                                            <GroupBox Grid.Column="2" Grid.RowSpan="2" Header="Skill Details">
                                                <!--<GroupBox.Visibility>
                                                        <MultiBinding Converter="{StaticResource ListContainsToVis}">
                                                            <Binding Path="CurrentPhysicalSkillSelection"/>
                                                            <Binding Path="CurrentPhysicalSkillList"/>
                                                        </MultiBinding>
                                                    </GroupBox.Visibility>-->
                                                <Grid Margin="4,0,4,0">
                                                    <Grid.RowDefinitions>
                                                        <RowDefinition Height="*"/>
                                                        <RowDefinition Height="*"/>
                                                        <RowDefinition Height="1.5*"/>
                                                        <RowDefinition Height="1.5*"/>
                                                        <RowDefinition Height="3*"/>
                                                    </Grid.RowDefinitions>

                                                    <StackPanel>
                                                        <TextBlock Text="Skill Name"/>
                                                        <TextBox Text="{Binding CurrentPhysicalSkillName, ValidatesOnNotifyDataErrors=True}"
                                                                 Width="120"/>
                                                    </StackPanel>

                                                    <StackPanel Grid.Row="1">
                                                        <TextBlock Text="Skill Rank"/>
                                                        <TextBox Text="{Binding CurrentPhysicalSkillSelection.DisplayRank}" IsReadOnly="True"
                                                                 Width="60"/>
                                                    </StackPanel>

                                                    <StackPanel Grid.Row="2">
                                                        <TextBlock Text="Skill Base Rank"/>
                                                        <TextBlock Text="Note: Overrides total rank if it is below this value." 
                                                                   TextWrapping="Wrap"/>
                                                        <ComboBox ItemsSource="{Binding AttributeRankDictionary}"
                                                                  DisplayMemberPath="Key"
                                                                  SelectedValuePath="Value"
                                                                  SelectedValue="{Binding CurrentPhysicalSkillSelection.BaseRank}"
                                                                  Width="100" HorizontalAlignment="Left"/>
                                                    </StackPanel>

                                                    <StackPanel Grid.Row="3">
                                                        <TextBlock Text="Skill Modified Rank"/>
                                                        <TextBlock Text="Note: Adds to the total rank like any other source."
                                                                   TextWrapping="Wrap"/>
                                                        <ComboBox ItemsSource="{Binding AttributeRankDictionary}"
                                                                  DisplayMemberPath="Key"
                                                                  SelectedValuePath="Value"
                                                                  SelectedValue="{Binding CurrentPhysicalSkillSelection.ModRank}"
                                                                  Width="100" HorizontalAlignment="Left"/>
                                                    </StackPanel>

                                                    <DockPanel Grid.Row="4">
                                                        <TextBlock Text="Sources" DockPanel.Dock="Top"/>
                                                        <ListView ItemsSource="{Binding CurrentPhysicalSkillSelection.SourceList}"
                                                                  Loaded="ListView_Loaded" SizeChanged="ListView_SizeChanged" 
                                                                  ScrollViewer.ScrollChanged="ListView_ScrollChanged" Tag="0,1">
                                                            <ListView.View>
                                                                <GridView>
                                                                    <GridView.Columns>
                                                                        <GridViewColumn Header="Jump" DisplayMemberBinding="{Binding SourceJump}" Width="Auto"/>
                                                                        <GridViewColumn Header="Purchase" DisplayMemberBinding="{Binding SourcePurchase}" Width="Auto"/>
                                                                        <GridViewColumn Header="Rank" DisplayMemberBinding="{Binding SourceRank}" Width="65"/>
                                                                    </GridView.Columns>
                                                                </GridView>
                                                            </ListView.View>
                                                        </ListView>
                                                    </DockPanel>
                                                </Grid>
                                            </GroupBox>
                                        </Grid>
                                    </TabItem>
                                    <TabItem Header="Mental Skills">
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*" MaxWidth="300"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="*" MaxWidth="500"/>
                                            </Grid.ColumnDefinitions>

                                            <DockPanel>
                                                <Grid DockPanel.Dock="Bottom" Margin="0,4,0,4">
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="Auto"/>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="Auto"/>
                                                    </Grid.ColumnDefinitions>
                                                    <Grid.RowDefinitions>
                                                        <RowDefinition Height="*"/>
                                                        <RowDefinition Height="*" MinHeight="12"/>
                                                        <RowDefinition Height="*"/>
                                                    </Grid.RowDefinitions>

                                                    <Button Content="New" 
                                                            Command="{Binding NewMentalSkillCommand}"
                                                            Style="{DynamicResource DataGridButton}"/>

                                                    <Button Content="Delete"
                                                            Command="{Binding DeleteMentalSkillCommand}"
                                                            Style="{DynamicResource DataGridButton}"
                                                            Grid.Column="2"/>

                                                    <Button Content="Move Up" 
                                                            Command="{Binding MoveMentalSkillUpCommand}"
                                                            Style="{DynamicResource DataGridButton}"
                                                            Grid.Row="2"/>

                                                    <Button Content="Move Down"
                                                            Command="{Binding MoveMentalSkillDownCommand}"
                                                            Style="{DynamicResource DataGridButton}"
                                                            Grid.Column="2"
                                                            Grid.Row="2"/>
                                                </Grid>

                                                <ListView ItemsSource="{Binding CurrentMentalSkillList}"
                                                          SelectedItem="{Binding CurrentMentalSkillSelection}"
                                                          SelectedIndex="{Binding CurrentMentalSkillIndex}"
                                                          Loaded="ListView_Loaded" SizeChanged="ListView_SizeChanged" 
                                                          ScrollViewer.ScrollChanged="ListView_ScrollChanged" Tag="0">
                                                    <ListView.View>
                                                        <GridView>
                                                            <GridView.Columns>
                                                                <GridViewColumn Header="Skill Name" Width="Auto"
                                                                                CellTemplate="{StaticResource ResourceKey=GridViewDefaultColumn}"
                                                                                DisplayMemberBinding="{Binding Name}"/>
                                                                <GridViewColumn Header="Skill Rank" Width="100" 
                                                                                CellTemplate="{StaticResource ResourceKey=GridViewDefaultColumn}"
                                                                                DisplayMemberBinding="{Binding DisplayRank}"/>
                                                            </GridView.Columns>
                                                        </GridView>
                                                    </ListView.View>
                                                </ListView>
                                            </DockPanel>

                                            <GroupBox Grid.Column="2" Grid.RowSpan="2" Header="Skill Details">
                                                <!--<GroupBox.Visibility>
                                                        <MultiBinding Converter="{StaticResource ListContainsToVis}">
                                                            <Binding Path="CurrentMentalSkillSelection"/>
                                                            <Binding Path="CurrentMentalSkillList"/>
                                                        </MultiBinding>
                                                    </GroupBox.Visibility>-->
                                                <Grid Margin="4,0,4,0">
                                                    <Grid.RowDefinitions>
                                                        <RowDefinition Height="*"/>
                                                        <RowDefinition Height="*"/>
                                                        <RowDefinition Height="1.5*"/>
                                                        <RowDefinition Height="1.5*"/>
                                                        <RowDefinition Height="3*"/>
                                                    </Grid.RowDefinitions>

                                                    <StackPanel>
                                                        <TextBlock Text="Skill Name"/>
                                                        <TextBox Text="{Binding CurrentMentalSkillName, ValidatesOnNotifyDataErrors=True}"
                                                                 Width="120"/>
                                                    </StackPanel>

                                                    <StackPanel Grid.Row="1">
                                                        <TextBlock Text="Skill Rank"/>
                                                        <TextBox Text="{Binding CurrentMentalSkillSelection.DisplayRank}" IsReadOnly="True"
                                                                 Width="60"/>
                                                    </StackPanel>

                                                    <StackPanel Grid.Row="2">
                                                        <TextBlock Text="Skill Base Rank"/>
                                                        <TextBlock Text="Note: Overrides total rank if it is below this value." 
                                                                   TextWrapping="Wrap"/>
                                                        <ComboBox ItemsSource="{Binding AttributeRankDictionary}"
                                                                  DisplayMemberPath="Key"
                                                                  SelectedValuePath="Value"
                                                                  SelectedValue="{Binding CurrentMentalSkillSelection.BaseRank}"
                                                                  Width="100" HorizontalAlignment="Left"/>
                                                    </StackPanel>

                                                    <StackPanel Grid.Row="3">
                                                        <TextBlock Text="Skill Modified Rank"/>
                                                        <TextBlock Text="Note: Adds to the total rank like any other source."
                                                                   TextWrapping="Wrap"/>
                                                        <ComboBox ItemsSource="{Binding AttributeRankDictionary}"
                                                                  DisplayMemberPath="Key"
                                                                  SelectedValuePath="Value"
                                                                  SelectedValue="{Binding CurrentMentalSkillSelection.ModRank}"
                                                                  Width="100" HorizontalAlignment="Left"/>
                                                    </StackPanel>

                                                    <DockPanel Grid.Row="4">
                                                        <TextBlock Text="Sources" DockPanel.Dock="Top"/>
                                                        <ListView ItemsSource="{Binding CurrentMentalSkillSelection.SourceList}"
                                                                  Loaded="ListView_Loaded" SizeChanged="ListView_SizeChanged" 
                                                                  ScrollViewer.ScrollChanged="ListView_ScrollChanged" Tag="0,1">
                                                            <ListView.View>
                                                                <GridView>
                                                                    <GridView.Columns>
                                                                        <GridViewColumn Header="Jump" DisplayMemberBinding="{Binding SourceJump}" Width="Auto"/>
                                                                        <GridViewColumn Header="Purchase" DisplayMemberBinding="{Binding SourcePurchase}" Width="Auto"/>
                                                                        <GridViewColumn Header="Rank" DisplayMemberBinding="{Binding SourceRank}" Width="65"/>
                                                                    </GridView.Columns>
                                                                </GridView>
                                                            </ListView.View>
                                                        </ListView>
                                                    </DockPanel>
                                                </Grid>
                                            </GroupBox>
                                        </Grid>
                                    </TabItem>
                                    <TabItem Header="Social Skills">
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*" MaxWidth="300"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="*" MaxWidth="500"/>
                                            </Grid.ColumnDefinitions>

                                            <DockPanel>
                                                <Grid DockPanel.Dock="Bottom" Margin="0,4,0,4">
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="Auto"/>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="Auto"/>
                                                    </Grid.ColumnDefinitions>
                                                    <Grid.RowDefinitions>
                                                        <RowDefinition Height="*"/>
                                                        <RowDefinition Height="*" MinHeight="12"/>
                                                        <RowDefinition Height="*"/>
                                                    </Grid.RowDefinitions>

                                                    <Button Content="New" 
                                                            Command="{Binding NewSocialSkillCommand}"
                                                            Style="{DynamicResource DataGridButton}"/>

                                                    <Button Content="Delete"
                                                            Command="{Binding DeleteSocialSkillCommand}"
                                                            Style="{DynamicResource DataGridButton}"
                                                            Grid.Column="2"/>

                                                    <Button Content="Move Up" 
                                                            Command="{Binding MoveSocialSkillUpCommand}"
                                                            Style="{DynamicResource DataGridButton}"
                                                            Grid.Row="2"/>

                                                    <Button Content="Move Down"
                                                            Command="{Binding MoveSocialSkillDownCommand}"
                                                            Style="{DynamicResource DataGridButton}"
                                                            Grid.Column="2"
                                                            Grid.Row="2"/>
                                                </Grid>

                                                <ListView ItemsSource="{Binding CurrentSocialSkillList}"
                                                          SelectedItem="{Binding CurrentSocialSkillSelection}"
                                                          SelectedIndex="{Binding CurrentSocialSkillIndex}"
                                                          Loaded="ListView_Loaded" SizeChanged="ListView_SizeChanged" 
                                                          ScrollViewer.ScrollChanged="ListView_ScrollChanged" Tag="0">
                                                    <ListView.View>
                                                        <GridView>
                                                            <GridView.Columns>
                                                                <GridViewColumn Header="Skill Name" Width="Auto"
                                                                                CellTemplate="{StaticResource ResourceKey=GridViewDefaultColumn}"
                                                                                DisplayMemberBinding="{Binding Name}"/>
                                                                <GridViewColumn Header="Skill Rank" Width="100" 
                                                                                CellTemplate="{StaticResource ResourceKey=GridViewDefaultColumn}"
                                                                                DisplayMemberBinding="{Binding DisplayRank}"/>
                                                            </GridView.Columns>
                                                        </GridView>
                                                    </ListView.View>
                                                </ListView>
                                            </DockPanel>

                                            <GroupBox Grid.Column="2" Grid.RowSpan="2" Header="Skill Details">
                                                <!--<GroupBox.Visibility>
                                                        <MultiBinding Converter="{StaticResource ListContainsToVis}">
                                                            <Binding Path="CurrentSocialSkillSelection"/>
                                                            <Binding Path="CurrentSocialSkillList"/>
                                                        </MultiBinding>
                                                    </GroupBox.Visibility>-->
                                                <Grid Margin="4,0,4,0">
                                                    <Grid.RowDefinitions>
                                                        <RowDefinition Height="*"/>
                                                        <RowDefinition Height="*"/>
                                                        <RowDefinition Height="1.5*"/>
                                                        <RowDefinition Height="1.5*"/>
                                                        <RowDefinition Height="3*"/>
                                                    </Grid.RowDefinitions>

                                                    <StackPanel>
                                                        <TextBlock Text="Skill Name"/>
                                                        <TextBox Text="{Binding CurrentSocialSkillName, ValidatesOnNotifyDataErrors=True}"
                                                                 Width="120"/>
                                                    </StackPanel>

                                                    <StackPanel Grid.Row="1">
                                                        <TextBlock Text="Skill Rank"/>
                                                        <TextBox Text="{Binding CurrentSocialSkillSelection.DisplayRank}" IsReadOnly="True"
                                                                 Width="60"/>
                                                    </StackPanel>

                                                    <StackPanel Grid.Row="2">
                                                        <TextBlock Text="Skill Base Rank"/>
                                                        <TextBlock Text="Note: Overrides total rank if it is below this value." 
                                                                   TextWrapping="Wrap"/>
                                                        <ComboBox ItemsSource="{Binding AttributeRankDictionary}"
                                                                  DisplayMemberPath="Key"
                                                                  SelectedValuePath="Value"
                                                                  SelectedValue="{Binding CurrentSocialSkillSelection.BaseRank}"
                                                                  Width="100" HorizontalAlignment="Left"/>
                                                    </StackPanel>

                                                    <StackPanel Grid.Row="3">
                                                        <TextBlock Text="Skill Modified Rank"/>
                                                        <TextBlock Text="Note: Adds to the total rank like any other source."
                                                                   TextWrapping="Wrap"/>
                                                        <ComboBox ItemsSource="{Binding AttributeRankDictionary}"
                                                                  DisplayMemberPath="Key"
                                                                  SelectedValuePath="Value"
                                                                  SelectedValue="{Binding CurrentSocialSkillSelection.ModRank}"
                                                                  Width="100" HorizontalAlignment="Left"/>
                                                    </StackPanel>

                                                    <DockPanel Grid.Row="4">
                                                        <TextBlock Text="Sources" DockPanel.Dock="Top"/>
                                                        <ListView ItemsSource="{Binding CurrentSocialSkillSelection.SourceList}"
                                                                  Loaded="ListView_Loaded" SizeChanged="ListView_SizeChanged" 
                                                                  ScrollViewer.ScrollChanged="ListView_ScrollChanged" Tag="0,1">
                                                            <ListView.View>
                                                                <GridView>
                                                                    <GridView.Columns>
                                                                        <GridViewColumn Header="Jump" DisplayMemberBinding="{Binding SourceJump}" Width="Auto"/>
                                                                        <GridViewColumn Header="Purchase" DisplayMemberBinding="{Binding SourcePurchase}" Width="Auto"/>
                                                                        <GridViewColumn Header="Rank" DisplayMemberBinding="{Binding SourceRank}" Width="65"/>
                                                                    </GridView.Columns>
                                                                </GridView>
                                                            </ListView.View>
                                                        </ListView>
                                                    </DockPanel>
                                                </Grid>
                                            </GroupBox>
                                        </Grid>
                                    </TabItem>
                                    <TabItem Header="Technological Skills">
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*" MaxWidth="300"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="*" MaxWidth="500"/>
                                            </Grid.ColumnDefinitions>

                                            <DockPanel>
                                                <Grid DockPanel.Dock="Bottom" Margin="0,4,0,4">
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="Auto"/>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="Auto"/>
                                                    </Grid.ColumnDefinitions>
                                                    <Grid.RowDefinitions>
                                                        <RowDefinition Height="*"/>
                                                        <RowDefinition Height="*" MinHeight="12"/>
                                                        <RowDefinition Height="*"/>
                                                    </Grid.RowDefinitions>

                                                    <Button Content="New" 
                                                            Command="{Binding NewTechnologicalSkillCommand}"
                                                            Style="{DynamicResource DataGridButton}"/>

                                                    <Button Content="Delete"
                                                            Command="{Binding DeleteTechnologicalSkillCommand}"
                                                            Style="{DynamicResource DataGridButton}"
                                                            Grid.Column="2"/>

                                                    <Button Content="Move Up" 
                                                            Command="{Binding MoveTechnologicalSkillUpCommand}"
                                                            Style="{DynamicResource DataGridButton}"
                                                            Grid.Row="2"/>

                                                    <Button Content="Move Down"
                                                            Command="{Binding MoveTechnologicalSkillDownCommand}"
                                                            Style="{DynamicResource DataGridButton}"
                                                            Grid.Column="2"
                                                            Grid.Row="2"/>
                                                </Grid>

                                                <ListView ItemsSource="{Binding CurrentTechnologicalSkillList}"
                                                          SelectedItem="{Binding CurrentTechnologicalSkillSelection}"
                                                          SelectedIndex="{Binding CurrentTechnologicalSkillIndex}"
                                                          Loaded="ListView_Loaded" SizeChanged="ListView_SizeChanged" 
                                                          ScrollViewer.ScrollChanged="ListView_ScrollChanged" Tag="0">
                                                    <ListView.View>
                                                        <GridView>
                                                            <GridView.Columns>
                                                                <GridViewColumn Header="Skill Name" Width="Auto"
                                                                                CellTemplate="{StaticResource ResourceKey=GridViewDefaultColumn}"
                                                                                DisplayMemberBinding="{Binding Name}"/>
                                                                <GridViewColumn Header="Skill Rank" Width="100" 
                                                                                CellTemplate="{StaticResource ResourceKey=GridViewDefaultColumn}"
                                                                                DisplayMemberBinding="{Binding DisplayRank}"/>
                                                            </GridView.Columns>
                                                        </GridView>
                                                    </ListView.View>
                                                </ListView>
                                            </DockPanel>

                                            <GroupBox Grid.Column="2" Grid.RowSpan="2" Header="Skill Details">
                                                <!--<GroupBox.Visibility>
                                                        <MultiBinding Converter="{StaticResource ListContainsToVis}">
                                                            <Binding Path="CurrentTechnologicalSkillSelection"/>
                                                            <Binding Path="CurrentTechnologicalSkillList"/>
                                                        </MultiBinding>
                                                    </GroupBox.Visibility>-->
                                                <Grid Margin="4,0,4,0">
                                                    <Grid.RowDefinitions>
                                                        <RowDefinition Height="*"/>
                                                        <RowDefinition Height="*"/>
                                                        <RowDefinition Height="1.5*"/>
                                                        <RowDefinition Height="1.5*"/>
                                                        <RowDefinition Height="3*"/>
                                                    </Grid.RowDefinitions>

                                                    <StackPanel>
                                                        <TextBlock Text="Skill Name"/>
                                                        <TextBox Text="{Binding CurrentTechnologicalSkillName, ValidatesOnNotifyDataErrors=True}"
                                                                 Width="120"/>
                                                    </StackPanel>

                                                    <StackPanel Grid.Row="1">
                                                        <TextBlock Text="Skill Rank"/>
                                                        <TextBox Text="{Binding CurrentTechnologicalSkillSelection.DisplayRank}" IsReadOnly="True"
                                                                 Width="60"/>
                                                    </StackPanel>

                                                    <StackPanel Grid.Row="2">
                                                        <TextBlock Text="Skill Base Rank"/>
                                                        <TextBlock Text="Note: Overrides total rank if it is below this value." 
                                                                   TextWrapping="Wrap"/>
                                                        <ComboBox ItemsSource="{Binding AttributeRankDictionary}"
                                                                  DisplayMemberPath="Key"
                                                                  SelectedValuePath="Value"
                                                                  SelectedValue="{Binding CurrentTechnologicalSkillSelection.BaseRank}"
                                                                  Width="100" HorizontalAlignment="Left"/>
                                                    </StackPanel>

                                                    <StackPanel Grid.Row="3">
                                                        <TextBlock Text="Skill Modified Rank"/>
                                                        <TextBlock Text="Note: Adds to the total rank like any other source."
                                                                   TextWrapping="Wrap"/>
                                                        <ComboBox ItemsSource="{Binding AttributeRankDictionary}"
                                                                  DisplayMemberPath="Key"
                                                                  SelectedValuePath="Value"
                                                                  SelectedValue="{Binding CurrentTechnologicalSkillSelection.ModRank}"
                                                                  Width="100" HorizontalAlignment="Left"/>
                                                    </StackPanel>

                                                    <DockPanel Grid.Row="4">
                                                        <TextBlock Text="Sources" DockPanel.Dock="Top"/>
                                                        <ListView ItemsSource="{Binding CurrentTechnologicalSkillSelection.SourceList}"
                                                                  Loaded="ListView_Loaded" SizeChanged="ListView_SizeChanged" 
                                                                  ScrollViewer.ScrollChanged="ListView_ScrollChanged" Tag="0,1">
                                                            <ListView.View>
                                                                <GridView>
                                                                    <GridView.Columns>
                                                                        <GridViewColumn Header="Jump" DisplayMemberBinding="{Binding SourceJump}" Width="Auto"/>
                                                                        <GridViewColumn Header="Purchase" DisplayMemberBinding="{Binding SourcePurchase}" Width="Auto"/>
                                                                        <GridViewColumn Header="Rank" DisplayMemberBinding="{Binding SourceRank}" Width="65"/>
                                                                    </GridView.Columns>
                                                                </GridView>
                                                            </ListView.View>
                                                        </ListView>
                                                    </DockPanel>
                                                </Grid>
                                            </GroupBox>
                                        </Grid>
                                    </TabItem>
                                    <TabItem Header="Supernatural Skills">
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*" MaxWidth="300"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="*" MaxWidth="500"/>
                                            </Grid.ColumnDefinitions>

                                            <DockPanel>
                                                <Grid DockPanel.Dock="Bottom" Margin="0,4,0,4">
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="Auto"/>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="Auto"/>
                                                    </Grid.ColumnDefinitions>
                                                    <Grid.RowDefinitions>
                                                        <RowDefinition Height="*"/>
                                                        <RowDefinition Height="*" MinHeight="12"/>
                                                        <RowDefinition Height="*"/>
                                                    </Grid.RowDefinitions>

                                                    <Button Content="New" 
                                                            Command="{Binding NewSupernaturalSkillCommand}"
                                                            Style="{DynamicResource DataGridButton}"/>

                                                    <Button Content="Delete"
                                                            Command="{Binding DeleteSupernaturalSkillCommand}"
                                                            Style="{DynamicResource DataGridButton}"
                                                            Grid.Column="2"/>

                                                    <Button Content="Move Up" 
                                                            Command="{Binding MoveSupernaturalSkillUpCommand}"
                                                            Style="{DynamicResource DataGridButton}"
                                                            Grid.Row="2"/>

                                                    <Button Content="Move Down"
                                                            Command="{Binding MoveSupernaturalSkillDownCommand}"
                                                            Style="{DynamicResource DataGridButton}"
                                                            Grid.Column="2"
                                                            Grid.Row="2"/>
                                                </Grid>

                                                <ListView ItemsSource="{Binding CurrentSupernaturalSkillList}"
                                                          SelectedItem="{Binding CurrentSupernaturalSkillSelection}"
                                                          SelectedIndex="{Binding CurrentSupernaturalSkillIndex}"
                                                          Loaded="ListView_Loaded" SizeChanged="ListView_SizeChanged" 
                                                          ScrollViewer.ScrollChanged="ListView_ScrollChanged" Tag="0">
                                                    <ListView.View>
                                                        <GridView>
                                                            <GridView.Columns>
                                                                <GridViewColumn Header="Skill Name" Width="Auto"
                                                                                CellTemplate="{StaticResource ResourceKey=GridViewDefaultColumn}"
                                                                                DisplayMemberBinding="{Binding Name}"/>
                                                                <GridViewColumn Header="Skill Rank" Width="100" 
                                                                                CellTemplate="{StaticResource ResourceKey=GridViewDefaultColumn}"
                                                                                DisplayMemberBinding="{Binding DisplayRank}"/>
                                                            </GridView.Columns>
                                                        </GridView>
                                                    </ListView.View>
                                                </ListView>
                                            </DockPanel>

                                            <GroupBox Grid.Column="2" Grid.RowSpan="2" Header="Skill Details">
                                                <!--<GroupBox.Visibility>
                                                        <MultiBinding Converter="{StaticResource ListContainsToVis}">
                                                            <Binding Path="CurrentSupernaturalSkillSelection"/>
                                                            <Binding Path="CurrentSupernaturalSkillList"/>
                                                        </MultiBinding>
                                                    </GroupBox.Visibility>-->
                                                <Grid Margin="4,0,4,0">
                                                    <Grid.RowDefinitions>
                                                        <RowDefinition Height="*"/>
                                                        <RowDefinition Height="*"/>
                                                        <RowDefinition Height="1.5*"/>
                                                        <RowDefinition Height="1.5*"/>
                                                        <RowDefinition Height="3*"/>
                                                    </Grid.RowDefinitions>

                                                    <StackPanel>
                                                        <TextBlock Text="Skill Name"/>
                                                        <TextBox Text="{Binding CurrentSupernaturalSkillName, ValidatesOnNotifyDataErrors=True}"
                                                                 Width="120"/>
                                                    </StackPanel>

                                                    <StackPanel Grid.Row="1">
                                                        <TextBlock Text="Skill Rank"/>
                                                        <TextBox Text="{Binding CurrentSupernaturalSkillSelection.DisplayRank}" IsReadOnly="True"
                                                                 Width="60"/>
                                                    </StackPanel>

                                                    <StackPanel Grid.Row="2">
                                                        <TextBlock Text="Skill Base Rank"/>
                                                        <TextBlock Text="Note: Overrides total rank if it is below this value." 
                                                                   TextWrapping="Wrap"/>
                                                        <ComboBox ItemsSource="{Binding AttributeRankDictionary}"
                                                                  DisplayMemberPath="Key"
                                                                  SelectedValuePath="Value"
                                                                  SelectedValue="{Binding CurrentSupernaturalSkillSelection.BaseRank}"
                                                                  Width="100" HorizontalAlignment="Left"/>
                                                    </StackPanel>

                                                    <StackPanel Grid.Row="3">
                                                        <TextBlock Text="Skill Modified Rank"/>
                                                        <TextBlock Text="Note: Adds to the total rank like any other source."
                                                                   TextWrapping="Wrap"/>
                                                        <ComboBox ItemsSource="{Binding AttributeRankDictionary}"
                                                                  DisplayMemberPath="Key"
                                                                  SelectedValuePath="Value"
                                                                  SelectedValue="{Binding CurrentSupernaturalSkillSelection.ModRank}"
                                                                  Width="100" HorizontalAlignment="Left"/>
                                                    </StackPanel>

                                                    <DockPanel Grid.Row="4">
                                                        <TextBlock Text="Sources" DockPanel.Dock="Top"/>
                                                        <ListView ItemsSource="{Binding CurrentSupernaturalSkillSelection.SourceList}"
                                                                  Loaded="ListView_Loaded" SizeChanged="ListView_SizeChanged" 
                                                                  ScrollViewer.ScrollChanged="ListView_ScrollChanged" Tag="0,1">
                                                            <ListView.View>
                                                                <GridView>
                                                                    <GridView.Columns>
                                                                        <GridViewColumn Header="Jump" DisplayMemberBinding="{Binding SourceJump}" Width="Auto"/>
                                                                        <GridViewColumn Header="Purchase" DisplayMemberBinding="{Binding SourcePurchase}" Width="Auto"/>
                                                                        <GridViewColumn Header="Rank" DisplayMemberBinding="{Binding SourceRank}" Width="65"/>
                                                                    </GridView.Columns>
                                                                </GridView>
                                                            </ListView.View>
                                                        </ListView>
                                                    </DockPanel>
                                                </Grid>
                                            </GroupBox>
                                        </Grid>
                                    </TabItem>
                                </TabControl>
                            </DockPanel>
                        </TabItem>
                        <TabItem Header="Rank Descriptions">
                            <ScrollViewer VerticalScrollBarVisibility="Auto">
                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="*"/>
                                        <RowDefinition Height="*"/>
                                        <RowDefinition Height="*"/>
                                        <RowDefinition Height="*"/>
                                        <RowDefinition Height="*"/>
                                    </Grid.RowDefinitions>

                                    <GroupBox Header="Rank Explanation">
                                        <StackPanel>
                                            <TextBlock Text="Ranks are split into a set of four tiers, each representing a general bracket of capabilities. The four tiers are as follows: Human, Extraordinary, Legendary, and Mythic."
                                                   TextWrapping="Wrap"/>

                                            <TextBlock Text="These tiers are split into a standard letter grading system, with each tier past Human having a special prefix to indicate the tier."
                                                   TextWrapping="Wrap" Margin="0,12,0,0"/>

                                            <TextBlock Text="Beyond simply moving from rank to rank, it is also possible to gain 'plus ranks', which represent more granular progress between ranks. Each rank has three corrosponding plus ranks, and will progress to the next rank rather than achieving a fourth plus rank."
                                                   TextWrapping="Wrap" Margin="0,12,0,0"/>

                                            <TextBlock Text="The difficulty of achieving a plus rank through natural means increases exponentially as the skill's rank grows. It will generally be unfeasible to develop a skill beyond the Extraordinary tier by natural means, at least without an uncapper and training boosters."
                                                   TextWrapping="Wrap" Margin="0,12,0,0"/>

                                            <TextBlock Text="Furthermore, breaching the boundary between tiers is more difficult than any unaided training or Perks within that tier could realistically accomplish. Going from peak-peak-human to truly, genuinely superhuman requires something special, and the gap only grows for later tiers."
                                                   TextWrapping="Wrap" Margin="0,12,0,0"/>
                                        </StackPanel>
                                    </GroupBox>

                                    <GroupBox Header="Human" Grid.Row="1">
                                        <StackPanel>
                                            <TextBlock Text="Ranks in the Human tier represent levels of skill that are realistically achievable by a mundane human. While the higher ranks are not necessarily plausible for the average human to achieve, they are at least theoretically possible to attain."
                                                       TextWrapping="Wrap"/>
                                            
                                            <TextBlock Text="The ranks range from having essentially no skill in the relevant area at 'F' to being about as skilled as a mundane human can be at 'A'. Breaking through to the next tier will require some sort of advantage beyond the mundane."
                                                       TextWrapping="Wrap" Margin="0,12,0,0"/>
                                        </StackPanel>
                                    </GroupBox>

                                    <GroupBox Header="Extraordinary" Grid.Row="2">
                                        <StackPanel>
                                            <TextBlock Text="Ranks in the Extraordinary tier represent supernatural levels of skill in an area. Humans generally can't reach these levels without outside aid, unless they happen to live in a comic book setting, in which case all bets are off."
                                                       TextWrapping="Wrap"/>

                                            <TextBlock Text="More seriously, this tier represents the point where some people might start to consider applying the prefix 'super' to whatever skill you're measuring. The ranks range from being just better than a human should be able to achieve to being a legitimate super-skill by the highest rank."
                                                       TextWrapping="Wrap" Margin="0,12,0,0"/>
                                        </StackPanel>
                                    </GroupBox>

                                    <GroupBox Header="Legendary" Grid.Row="3">
                                        <StackPanel>
                                            <TextBlock Text="The Legendary tier is just that: a tier to represent skills that have achieved legendary status on their own rights. The average viewer might think that someone expressing a skill of this level is breaking the laws of physics - achieving the seemingly impossible is a relatively easy task in this tier."
                                                       TextWrapping="Wrap"/>

                                            <TextBlock Text="In general, these ranks refer to a range of skill levels that can be generally defined as the stuff of legends, as the name suggests."
                                                       TextWrapping="Wrap" Margin="0,12,0,0"/>
                                        </StackPanel>
                                    </GroupBox>

                                    <GroupBox Header="Mythic" Grid.Row="4">
                                        <StackPanel>
                                            <TextBlock Text="This tier is the highest one, and justly so. Actions taken in practicing a skill of this level would sound exactly like something from a myth or bedtime story. It simply isn't possible to get better than this tier, since this tier represents being able to essentially do anything in a given area."
                                                       TextWrapping="Wrap"/>

                                            <TextBlock Text="The higher ranks in this tier could very easily be described as having 'god-like' levels of skill in the given area."
                                                       TextWrapping="Wrap" Margin="0,12,0,0"/>
                                        </StackPanel>
                                    </GroupBox>
                                </Grid>
                            </ScrollViewer>
                        </TabItem>
                    </TabControl>
                </Grid>
            </TabItem>
            <TabItem Header="Learning Rates">
                <DockPanel Margin="0,4,0,0">
                    <Button Content="Refresh Boosters" Command="{Binding RefreshBoostersCommand}"
                            DockPanel.Dock="Top" HorizontalAlignment="Center"
                            Style="{DynamicResource DataGridButton}"/>

                    <Grid Grid.Row="1" Margin="0,4,0,0">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" MaxWidth="300"/>
                            <ColumnDefinition Width="2*"/>
                        </Grid.ColumnDefinitions>

                        <DockPanel>
                            <Grid DockPanel.Dock="Bottom" Margin="0,4,0,4">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="*"/>
                                    <RowDefinition Height="*" MinHeight="12"/>
                                    <RowDefinition Height="*"/>
                                </Grid.RowDefinitions>

                                <Button Content="New" 
                                    Command="{Binding NewBoosterCommand}"
                                    Style="{DynamicResource DataGridButton}"/>

                                <Button Content="Delete"
                                    Command="{Binding DeleteBoosterCommand}"
                                    Style="{DynamicResource DataGridButton}"
                                    Grid.Column="2"/>

                                <Button Content="Move Up" 
                                    Command="{Binding MoveBoosterUpCommand}"
                                    Style="{DynamicResource DataGridButton}"
                                    Grid.Row="2"/>

                                <Button Content="Move Down"
                                    Command="{Binding MoveBoosterDownCommand}"
                                    Style="{DynamicResource DataGridButton}"
                                    Grid.Column="2"
                                    Grid.Row="2"/>
                            </Grid>

                            <ListView ItemsSource="{Binding CurrentBoosterList}"
                                      SelectedItem="{Binding CurrentBoosterSelection}"
                                      SelectedIndex="{Binding CurrentBoosterIndex}"
                                      Loaded="ListView_Loaded" SizeChanged="ListView_SizeChanged" 
                                      ScrollViewer.ScrollChanged="ListView_ScrollChanged" Tag="0,1">
                                <ListView.View>
                                    <GridView>
                                        <GridView.Columns>
                                            <GridViewColumn Header="Booster Name" Width="Auto"
                                                            CellTemplate="{StaticResource ResourceKey=GridViewDefaultColumn}"
                                                            DisplayMemberBinding="{Binding BoosterName}"/>
                                            <GridViewColumn Header="Boost Multiplier" Width="Auto" 
                                                            CellTemplate="{StaticResource ResourceKey=GridViewDefaultColumn}"
                                                            DisplayMemberBinding="{Binding BoosterMultiplier, StringFormat={}{0}x}"/>
                                        </GridView.Columns>
                                    </GridView>
                                </ListView.View>
                            </ListView>
                        </DockPanel>

                        <GroupBox Grid.Column="2" Header="Attribute Details">
                            <!--<GroupBox.Visibility>
                                <MultiBinding Converter="{StaticResource ListContainsToVis}">
                                    <Binding Path="CurrentBoosterSelection"/>
                                    <Binding Path="CurrentBoosterList"/>
                                </MultiBinding>
                            </GroupBox.Visibility>-->
                            <Grid Margin="4,0,4,0">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" MaxWidth="350"/>
                                    <ColumnDefinition Width="*" MaxWidth="350"/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="*" MaxHeight="50"/>
                                    <RowDefinition Height="*"/>
                                    <RowDefinition Height="*" MaxHeight="120"/>
                                    <RowDefinition Height="2*"/>
                                </Grid.RowDefinitions>

                                <StackPanel>
                                    <TextBlock Text="Attribute Name"/>
                                    <TextBox Text="{Binding CurrentBoosterName, ValidatesOnNotifyDataErrors=True}"
                                             Width="120"/>
                                </StackPanel>

                                <DockPanel Grid.Row="1">
                                    <TextBlock Text="Attribute Description" DockPanel.Dock="Top"/>
                                    <TextBox Text="{Binding CurrentBoosterDescription, ValidatesOnNotifyDataErrors=True}"
                                             HorizontalAlignment="Stretch"
                                             Style="{DynamicResource LargeTextBoxHintTemplate}"
                                             Tag="Insert Attribute description here."/>
                                </DockPanel>

                                <StackPanel Grid.Row="2" Margin="0,12,0,0">
                                    <TextBlock Text="Total boost multiplier"/>
                                    <TextBox Text="{Binding CurrentBoosterSelection.BoosterMultiplier, StringFormat={}{0}x}" IsReadOnly="True"
                                             Width="50"/>

                                    <TextBlock Text="Raw boost multiplier" Margin="0,12,0,0"/>
                                    <TextBox Text="{Binding CurrentBoosterSelection.BoosterMultiplier, StringFormat={}{0}x}" IsReadOnly="True"
                                             Width="50"/>
                                </StackPanel>

                                <DockPanel Grid.Row="3">
                                    <TextBlock Text="Sources" DockPanel.Dock="Top"/>
                                    <ListView ItemsSource="{Binding CurrentBoosterSelection.SourceList}"
                                              Loaded="ListView_Loaded" SizeChanged="ListView_SizeChanged" 
                                              ScrollViewer.ScrollChanged="ListView_ScrollChanged" Tag="0,1">
                                        <ListView.View>
                                            <GridView>
                                                <GridView.Columns>
                                                    <GridViewColumn Header="Jump" DisplayMemberBinding="{Binding SourceJump}" Width="Auto"/>
                                                    <GridViewColumn Header="Purchase" DisplayMemberBinding="{Binding SourcePurchase}" Width="Auto"/>
                                                    <GridViewColumn Header="Rank" DisplayMemberBinding="{Binding SourceRank}" Width="65"/>
                                                </GridView.Columns>
                                            </GridView>
                                        </ListView.View>
                                    </ListView>
                                </DockPanel>

                                <DockPanel Grid.Column="1" Grid.RowSpan="4" Margin="8,0,0,0">
                                    <TextBlock Text="Dependancies" DockPanel.Dock="Top"/>
                                    <ListView ItemsSource="{Binding CurrentBoosterSelection.BoosterDependencies}"
                                              Loaded="ListView_Loaded" SizeChanged="ListView_SizeChanged" 
                                              ScrollViewer.ScrollChanged="ListView_ScrollChanged" Tag="0,1">
                                        <ListView.View>
                                            <GridView>
                                                <GridView.Columns>
                                                    <GridViewColumn Header="Source" Width="Auto"
                                                                    CellTemplate="{StaticResource ResourceKey=GridViewDefaultColumn}"
                                                                    DisplayMemberBinding="{Binding DependencySource}"/>
                                                    <GridViewColumn Header="Source Value (Raw)" Width="Auto" 
                                                                    CellTemplate="{StaticResource ResourceKey=GridViewDefaultColumn}"
                                                                    DisplayMemberBinding="{Binding DependencyMultiplier}"/>
                                                    <GridViewColumn Header="Enabled" Width="50">
                                                        <GridViewColumn.CellTemplate>
                                                            <DataTemplate>
                                                                <CheckBox IsChecked="{Binding DependencyEnabled}"/>
                                                            </DataTemplate>
                                                        </GridViewColumn.CellTemplate>
                                                    </GridViewColumn>
                                                </GridView.Columns>
                                            </GridView>
                                        </ListView.View>
                                    </ListView>
                                </DockPanel>
                            </Grid>
                        </GroupBox>
                    </Grid>
                </DockPanel>
            </TabItem>
            <TabItem Header="Body Mod">
                <Grid>
                    <TabControl Visibility="{Binding GenericBodyModSelected, Converter={StaticResource BoolToVis}}"
                                SelectedIndex="{Binding GBMTabIndex}">
                        <TabItem Header="Supplement Details">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="2*" MaxWidth="400"/>
                                    <ColumnDefinition Width="*" MaxWidth="250"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="2*" MaxHeight="225"/>
                                    <RowDefinition Height="2*"/>
                                    <RowDefinition Height="*"/>
                                </Grid.RowDefinitions>

                                <GroupBox Header="BP" Visibility="Visible">
                                    <Grid>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="*" MaxHeight="25"/>
                                            <RowDefinition Height="*"/>
                                        </Grid.RowDefinitions>

                                        <Button Content="Refresh BP"
                                                Command="{Binding RefreshBPCommand}"
                                                Style="{DynamicResource DataGridButton}"
                                                HorizontalAlignment="Center" VerticalAlignment="Center"/>

                                        <Grid Grid.Row="1" Margin="0,12,0,0">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="*"/>
                                            </Grid.ColumnDefinitions>

                                            <StackPanel>
                                                <TextBlock Text="Total BP"/>
                                                <TextBox Text="{Binding TotalBP, ValidatesOnNotifyDataErrors=True}" IsReadOnly="True"
                                                         Width="40"/>

                                                <TextBlock Text="Current Budget" Margin="0,12,0,0"/>
                                                <TextBox Text="{Binding Budget, ValidatesOnNotifyDataErrors=True}" IsReadOnly="True"
                                                         Width="40"/>
                                            </StackPanel>

                                            <StackPanel Grid.Column="1">
                                                <TextBlock Text="CP Invested"/>
                                                <TextBox Text="{Binding CPInvested, ValidatesOnNotifyDataErrors=True}" IsReadOnly="True"
                                                         Width="40"/>

                                                <TextBlock Text="BP from investment" Margin="0,12,0,0"/>
                                                <TextBox Text="{Binding BPBought, ValidatesOnNotifyDataErrors=True}" IsReadOnly="True"
                                                         Width="40"/>
                                            </StackPanel>

                                            <StackPanel Grid.Column="2">
                                                <TextBlock Text="BP from Drawbacks"/>
                                                <TextBox Text="{Binding DrawbackBP, ValidatesOnNotifyDataErrors=True}" IsReadOnly="True"
                                                     Width="40"/>
                                                <TextBlock Text="Per-Jump BP total" Margin="0,12,0,0"/>
                                                <TextBox Text="{Binding JumpBPGained, ValidatesOnNotifyDataErrors=True}" IsReadOnly="True"
                                                         Width="40"/>
                                            </StackPanel>
                                        </Grid>
                                    </Grid>
                                </GroupBox>

                                <GroupBox Header="Character-specific settings" Grid.Column="1">
                                    <StackPanel>
                                        <TextBlock Text="Supplement taken on Jump #"/>
                                        <TextBox Text="{Binding GBMSupplementDelay}"
                                                 Width="40"/>
                                    </StackPanel>
                                </GroupBox>

                                <GroupBox Header="Description" Grid.Row="1">
                                    <Grid>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="*" MaxHeight="50"/>
                                            <RowDefinition Height="2*"/>
                                        </Grid.RowDefinitions>

                                        <StackPanel>
                                            <TextBlock Text="Supplement Name"/>
                                            <TextBox Text="{Binding GenericBodyModName, ValidatesOnNotifyDataErrors=True}"
                                                     Width="120"/>
                                        </StackPanel>

                                        <DockPanel Grid.Row="1">
                                            <TextBlock Text="Supplement Description" DockPanel.Dock="Top"/>
                                            <TextBox Text="{Binding GenericBodyModFullDescription, ValidatesOnNotifyDataErrors=True}"
                                                     Style="{DynamicResource LargeTextBoxHintTemplate}"
                                                     HorizontalAlignment="Stretch"
                                                     Tag="Insert Supplement description."/>
                                        </DockPanel>
                                    </Grid>
                                </GroupBox>
                            </Grid>
                        </TabItem>
                        <TabItem Header="Purchases" Visibility="Visible">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" MaxWidth="400"/>
                                    <ColumnDefinition Width="2*"/>
                                </Grid.ColumnDefinitions>

                                <DockPanel Margin="4,0,4,0">
                                    <Grid DockPanel.Dock="Bottom" Margin="0,4,0,4">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="*"/>
                                            <RowDefinition Height="*" MinHeight="12"/>
                                            <RowDefinition Height="*"/>
                                        </Grid.RowDefinitions>

                                        <Button Content="Move Up" 
                                                Command="{Binding MoveBodyModPurchaseUpCommand}"
                                                Style="{DynamicResource DataGridButton}"
                                                Grid.Column="0"
                                                Grid.Row="2"/>

                                        <Button Content="Move Down"
                                                Command="{Binding MoveBodyModPurchaseDownCommand}"
                                                Style="{DynamicResource DataGridButton}"
                                                Grid.Column="2"
                                                Grid.Row="2"/>

                                        <Button Content="New" 
                                                Command="{Binding NewBodyModPurchaseCommand}"
                                                Style="{DynamicResource DataGridButton}"
                                                Grid.Column="0"
                                                Grid.Row="0"/>

                                        <Button Content="Delete"
                                                Command="{Binding DeleteBodyModPurchaseCommand}"
                                                Style="{DynamicResource DataGridButton}"
                                                Grid.Column="2"
                                                Grid.Row="0"/>
                                    </Grid>

                                    <ListView ItemsSource="{Binding GenericBodyModPurchaseList}"
                                              SelectedItem="{Binding BodyModPurchaseSelection}"
                                              SelectedIndex="{Binding GenericBodyModPurchaseSelectionIndex}"
                                              Loaded="ListView_Loaded" SizeChanged="ListView_SizeChanged" 
                                              ScrollViewer.ScrollChanged="ListView_ScrollChanged" Tag="0">
                                        <ListView.View>
                                            <GridView>
                                                <GridView.Columns>
                                                    <GridViewColumn Header="Name" Width="Auto"
                                                                    CellTemplate="{StaticResource ResourceKey=GridViewDefaultColumn}"
                                                                    DisplayMemberBinding="{Binding Name}"/>
                                                    <GridViewColumn Header="Cost" Width="50" 
                                                                    CellTemplate="{StaticResource ResourceKey=GridViewDefaultColumn}"
                                                                    DisplayMemberBinding="{Binding DisplayCost}"/>
                                                </GridView.Columns>
                                            </GridView>
                                        </ListView.View>
                                    </ListView>
                                </DockPanel>

                                <GroupBox Header="Purchase Details" Grid.Column="1">
                                    <!--<GroupBox.Visibility>
                                        <MultiBinding Converter="{StaticResource ListContainsToVis}">
                                            <Binding Path="BodyModPurchaseSelection"/>
                                            <Binding Path="GenericBodyModPurchaseList"/>
                                        </MultiBinding>
                                    </GroupBox.Visibility>-->
                                    <Grid Margin="8,0,0,0">
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="*"/>
                                            <RowDefinition Height="2*"/>
                                            <RowDefinition Height="3*"/>
                                        </Grid.RowDefinitions>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*" MaxWidth="400"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>

                                        <StackPanel>
                                            <TextBlock Text="Name"/>
                                            <TextBox Text="{Binding BodyModPurchaseSelection.Name, ValidatesOnNotifyDataErrors=True}"
                                                     Width="120"/>

                                            <TextBlock Text="Cost" Margin="0,8,0,0"/>
                                            <TextBox Text="{Binding BodyModPurchaseSelection.Cost, ValidatesOnNotifyDataErrors=True}"
                                                     Width="40"/>
                                        </StackPanel>

                                        <StackPanel Grid.Column="1">
                                            <CheckBox Content="Discounted" IsChecked="{Binding BodyModPurchaseSelection.Discounted}"/>
                                            <CheckBox Content="Free" IsChecked="{Binding BodyModPurchaseSelection.Freebie}"
                                                      Margin="0,8,0,0"/>
                                        </StackPanel>

                                        <DockPanel Grid.Row="1">
                                            <TextBlock Text="Description" DockPanel.Dock="Top"/>
                                            <TextBox Text="{Binding BodyModPurchaseSelection.Description, ValidatesOnNotifyDataErrors=True}"
                                                     HorizontalAlignment="Stretch"
                                                     Style="{DynamicResource LargeTextBoxHintTemplate}"
                                                     Tag="Insert purchase description."/>
                                        </DockPanel>

                                        <DockPanel Grid.Row="2" Margin="0,8,0,0">
                                            <TextBlock Text="Special Traits" DockPanel.Dock="Top"/>
                                            <Grid DockPanel.Dock="Bottom" Margin="0,8,0,0">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto"/>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="Auto"/>
                                                </Grid.ColumnDefinitions>

                                                <Button Content="New Trait" 
                                                        Command="{Binding NewGBMPurchaseTraitCommand}"
                                                        Style="{DynamicResource DataGridButton}"/>

                                                <Button Content="Delete Trait"
                                                        Command="{Binding DeleteGBMPurchaseTraitCommand}"
                                                        Style="{DynamicResource DataGridButton}"
                                                        Grid.Column="2"/>
                                            </Grid>
                                            <ListView ItemsSource="{Binding PurchaseAttributeList}"
                                                      SelectedItem="{Binding PurchaseAttributeSelection}"
                                                      SelectedIndex="{Binding PurchaseAttributeIndex}"
                                                      Loaded="ListView_Loaded" SizeChanged="ListView_SizeChanged" 
                                                      ScrollViewer.ScrollChanged="ListView_ScrollChanged" Tag="0">
                                                <ListView.View>
                                                    <GridView>
                                                        <GridView.Columns>
                                                            <GridViewColumn Header="Name" DisplayMemberBinding="{Binding Name}" Width="Auto"/>
                                                            <GridViewColumn Header="Type" DisplayMemberBinding="{Binding Type}" Width="60"/>
                                                            <GridViewColumn Header="Category" DisplayMemberBinding="{Binding Category}" Width="75"/>
                                                        </GridView.Columns>
                                                    </GridView>
                                                </ListView.View>
                                            </ListView>
                                        </DockPanel>

                                        <GroupBox Header="Trait Details" Grid.Row="2" Grid.Column="1" Margin="0,8,0,0">
                                            <!--<GroupBox.Visibility>
                                                <MultiBinding Converter="{StaticResource ListContainsToVis}">
                                                    <Binding Path="PurchaseAttributeSelection"/>
                                                    <Binding Path="PurchaseAttributeList"/>
                                                </MultiBinding>
                                            </GroupBox.Visibility>-->
                                            <StackPanel VerticalAlignment="Top" HorizontalAlignment="Left">
                                                <TextBlock Text="Name"/>
                                                <ComboBox ItemsSource="{Binding CurrentAttributeList}"
                                                          SelectedValue="{Binding CurrentAttributeSelection}"
                                                          MinWidth="100"/>

                                                <TextBlock Text="Type" Margin="0,12,0,0"/>
                                                <ComboBox ItemsSource="{Binding AvailableAttributeTypeList}" 
                                                          SelectedValue="{Binding AttributeTypeSelection}"
                                                          MinWidth="100"/>

                                                <TextBlock Text="Category" Margin="0,12,0,0"/>
                                                <ComboBox ItemsSource="{Binding AvailableAttributeCategoryList}" 
                                                          SelectedValue="{Binding AttributeCategorySelection}"
                                                          MinWidth="100"/>

                                                <StackPanel Visibility="{Binding AttributeBasicSelected, Converter={StaticResource BoolToVis}}"
                                                            Margin="0,12,0,0" VerticalAlignment="Top" HorizontalAlignment="Left">
                                                    <TextBlock Text="Rank"/>
                                                    <ComboBox ItemsSource="{Binding AttributeRankDictionary}"
                                                              DisplayMemberPath="Key"
                                                              SelectedValuePath="Value"
                                                              SelectedValue="{Binding PurchaseAttributeSelection.Rank}"
                                                              MinWidth="100"/>
                                                </StackPanel>
                                                <StackPanel Visibility="{Binding AttributeBoosterSelected, Converter={StaticResource BoolToVis}}"
                                                            VerticalAlignment="Top" HorizontalAlignment="Left" Margin="0,12,0,0">
                                                    <TextBlock Text="Multiplier"/>
                                                    <TextBox Text="{Binding PurchaseAttributeSelection.Value, ValidatesOnNotifyDataErrors=True}" MinWidth="40"/>
                                                </StackPanel>
                                                <StackPanel Visibility="{Binding AttributeSpecialSelected, Converter={StaticResource BoolToVis}}" 
                                                            VerticalAlignment="Top" HorizontalAlignment="Left" Margin="0,12,0,0">
                                                    <TextBlock Text="Value"/>
                                                    <TextBox Text="{Binding PurchaseAttributeSelection.Value, ValidatesOnNotifyDataErrors=True}" MinWidth="40"/>
                                                </StackPanel>
                                            </StackPanel>
                                        </GroupBox>
                                    </Grid>
                                </GroupBox>
                            </Grid>
                        </TabItem>
                        <TabItem Header="Drawbacks" Visibility="Visible">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" MaxWidth="400"/>
                                    <ColumnDefinition Width="2*"/>
                                </Grid.ColumnDefinitions>

                                <DockPanel Margin="4,0,4,0">
                                    <Grid DockPanel.Dock="Bottom" Margin="0,4,0,4">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="*"/>
                                            <RowDefinition Height="*" MinHeight="12"/>
                                            <RowDefinition Height="*"/>
                                        </Grid.RowDefinitions>

                                        <Button Content="Move Up" 
                                                Command="{Binding MoveBodyModDrawbackUpCommand}"
                                                Style="{DynamicResource DataGridButton}"
                                                Grid.Column="0"
                                                Grid.Row="2"/>

                                        <Button Content="Move Down"
                                                Command="{Binding MoveBodyModDrawbackDownCommand}"
                                                Style="{DynamicResource DataGridButton}"
                                                Grid.Column="2"
                                                Grid.Row="2"/>

                                        <Button Content="New" 
                                                Command="{Binding NewBodyModDrawbackCommand}"
                                                Style="{DynamicResource DataGridButton}"
                                                Grid.Column="0"
                                                Grid.Row="0"/>

                                        <Button Content="Delete"
                                                Command="{Binding DeleteBodyModDrawbackCommand}"
                                                Style="{DynamicResource DataGridButton}"
                                                Grid.Column="2"
                                                Grid.Row="0"/>
                                    </Grid>

                                    <ListView ItemsSource="{Binding GenericBodyModDrawbackList}"
                                              SelectedItem="{Binding BodyModDrawbackSelection}"
                                              SelectedIndex="{Binding GenericBodyModDrawbackIndex}"
                                              Loaded="ListView_Loaded" SizeChanged="ListView_SizeChanged" 
                                              ScrollViewer.ScrollChanged="ListView_ScrollChanged" Tag="0">
                                        <ListView.View>
                                            <GridView>
                                                <GridView.Columns>
                                                    <GridViewColumn Header="Name" Width="Auto"
                                                                    CellTemplate="{StaticResource ResourceKey=GridViewDefaultColumn}"
                                                                    DisplayMemberBinding="{Binding Name}"/>
                                                    <GridViewColumn Header="Value" Width="50" 
                                                                    CellTemplate="{StaticResource ResourceKey=GridViewDefaultColumn}"
                                                                    DisplayMemberBinding="{Binding Value}"/>
                                                </GridView.Columns>
                                            </GridView>
                                        </ListView.View>
                                    </ListView>
                                </DockPanel>
                                
                                <GroupBox Header="Drawback Details" Grid.Column="1">
                                    <!--<GroupBox.Visibility>
                                        <MultiBinding Converter="{StaticResource ListContainsToVis}">
                                            <Binding Path="BodyModDrawbackSelection"/>
                                            <Binding Path="GenericBodyModDrawbackList"/>
                                        </MultiBinding>
                                    </GroupBox.Visibility>-->
                                    <Grid Margin="8,0,0,0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*" MaxWidth="500"/>
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="*"/>
                                            <RowDefinition Height="2*"/>
                                            <RowDefinition Height="2*"/>
                                        </Grid.RowDefinitions>

                                        <StackPanel>
                                            <TextBlock Text="Name"/>
                                            <TextBox Text="{Binding BodyModDrawbackName, ValidatesOnNotifyDataErrors=True}"
                                                     Width="120"/>

                                            <TextBlock Text="Cost" Margin="0,8,0,0"/>
                                            <TextBox Text="{Binding BodyModDrawbackSelection.Value, ValidatesOnNotifyDataErrors=True}"
                                                     Width="40"/>
                                        </StackPanel>

                                        <DockPanel Grid.Row="1">
                                            <TextBlock Text="Description" DockPanel.Dock="Top"/>
                                            <TextBox Text="{Binding BodyModDrawbackDescription, ValidatesOnNotifyDataErrors=True}"
                                                     HorizontalAlignment="Stretch"
                                                     Style="{DynamicResource LargeTextBoxHintTemplate}"
                                                     Tag="Insert Drawback description."/>
                                        </DockPanel>
                                    </Grid>
                                </GroupBox>
                            </Grid>
                        </TabItem>
                        <TabItem Header="Additions">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" MaxWidth="400"/>
                                    <ColumnDefinition Width="2*"/>
                                </Grid.ColumnDefinitions>

                                <ListView ItemsSource="{Binding BodyModAdditionList}"
                                          SelectedItem="{Binding BodyModAdditionSelection}"
                                          SelectedIndex="{Binding BodyModAdditionSelectionIndex}"
                                          Loaded="ListView_Loaded" SizeChanged="ListView_SizeChanged" 
                                          ScrollViewer.ScrollChanged="ListView_ScrollChanged" Tag="0"
                                          Margin="4,0,4,4">
                                    <ListView.View>
                                        <GridView>
                                            <GridView.Columns>
                                                <GridViewColumn Header="Name" Width="Auto"
                                                                CellTemplate="{StaticResource ResourceKey=GridViewDefaultColumn}"
                                                                DisplayMemberBinding="{Binding Name}"/>
                                            </GridView.Columns>
                                        </GridView>
                                    </ListView.View>
                                </ListView>

                                <GroupBox Header="Addition Details" Grid.Column="1">
                                    <!--<GroupBox.Visibility>
                                        <MultiBinding Converter="{StaticResource ListContainsToVis}">
                                            <Binding Path="BodyModAdditionSelection"/>
                                            <Binding Path="BodyModAdditionList"/>
                                        </MultiBinding>
                                    </GroupBox.Visibility>-->
                                    <Grid Margin="8,0,0,0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*" MaxWidth="700"/>
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="*"/>
                                            <RowDefinition Height="2*"/>
                                            <RowDefinition Height="2*"/>
                                        </Grid.RowDefinitions>

                                        <StackPanel>
                                            <TextBlock Text="Name"/>
                                            <TextBox Text="{Binding BodyModAdditionName, ValidatesOnNotifyDataErrors=True}"
                                                     Width="120"/>

                                            <TextBlock Text="Source Jump" Margin="0,8,0,0"/>
                                            <TextBox Text="{Binding BodyModAdditionSelection.SourceJump, ValidatesOnNotifyDataErrors=True}"
                                                     Width="120"
                                                     IsReadOnly="True"/>
                                        </StackPanel>

                                        <DockPanel Grid.Row="1">
                                            <TextBlock Text="Description" DockPanel.Dock="Top"/>
                                            <TextBox Text="{Binding BodyModAdditionDescription, ValidatesOnNotifyDataErrors=True}"
                                                     HorizontalAlignment="Stretch"
                                                     Style="{DynamicResource LargeTextBoxHintTemplate}"/>
                                        </DockPanel>
                                    </Grid>
                                </GroupBox>
                            </Grid>
                        </TabItem>
                    </TabControl>
                    
                    <TabControl Visibility="{Binding SBBodyModSelected, Converter={StaticResource BoolToVis}}"
                                SelectedIndex="{Binding SBBodyModTabIndex}">
                        <TabItem Header="Supplement Details">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="2*" MaxWidth="400"/>
                                    <ColumnDefinition Width="*" MaxWidth="250"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="2*" MaxHeight="225"/>
                                    <RowDefinition Height="2*"/>
                                    <RowDefinition Height="*"/>
                                </Grid.RowDefinitions>
                                
                                <GroupBox Header="BP">
                                    <Grid>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="*" MaxHeight="25"/>
                                            <RowDefinition Height="*"/>
                                        </Grid.RowDefinitions>

                                        <Button Content="Refresh BP"
                                                Command="{Binding RefreshBPCommand}"
                                                HorizontalAlignment="Center" VerticalAlignment="Center"
                                                Style="{DynamicResource DataGridButton}"/>

                                        <Grid Grid.Row="1" Margin="0,12,0,0">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="*"/>
                                            </Grid.ColumnDefinitions>

                                            <StackPanel>
                                                <TextBlock Text="Total BP"/>
                                                <TextBox Text="{Binding TotalBP, ValidatesOnNotifyDataErrors=True}" IsReadOnly="True"
                                                         Width="40"/>

                                                <TextBlock Text="Current Budget" Margin="0,12,0,0"/>
                                                <TextBox Text="{Binding Budget, ValidatesOnNotifyDataErrors=True}" IsReadOnly="True"
                                                     Width="40"/>
                                            </StackPanel>

                                            <StackPanel Grid.Column="1">
                                                <TextBlock Text="CP Invested"/>
                                                <TextBox Text="{Binding CPInvested, ValidatesOnNotifyDataErrors=True}" IsReadOnly="True"
                                                         Width="40"/>

                                                <TextBlock Text="BP from investment" Margin="0,12,0,0"/>
                                                <TextBox Text="{Binding BPBought, ValidatesOnNotifyDataErrors=True}" IsReadOnly="True"
                                                         Width="40"/>
                                            </StackPanel>

                                            <StackPanel Grid.Column="2">
                                                <TextBlock Text="Per-Jump BP total"/>
                                                <TextBox Text="{Binding JumpBPGained, ValidatesOnNotifyDataErrors=True}" IsReadOnly="True"
                                                         Width="40"/>
                                            </StackPanel>
                                        </Grid>
                                    </Grid>
                                </GroupBox>

                                <GroupBox Header="Character-specific settings" Grid.Column="1">
                                    <StackPanel>
                                        <TextBlock Text="Supplement taken on Jump #"/>
                                        <TextBox Text="{Binding SBBodyModSupplementDelay}"
                                                 Width="40"/>

                                        <TextBlock Text="Gauntlets taken before this Supplement" Margin="0,12,0,0"
                                                   TextWrapping="Wrap"/>
                                        <TextBox Text="{Binding SBBodyModGauntlets}"
                                                 Width="40"/>
                                    </StackPanel>
                                </GroupBox>
                            </Grid>
                        </TabItem>
                        <TabItem Header="Base Form">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="3*"/>
                                </Grid.ColumnDefinitions>

                                <DockPanel Margin="0,12,0,0">
                                    <ContentControl Template="{DynamicResource BudgetPanel}" DockPanel.Dock="Top"/>

                                    <Grid Margin="4,8,4,0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="3*" MaxWidth="150"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="*" MaxHeight="50"/>
                                            <RowDefinition Height="*" MaxHeight="200"/>
                                        </Grid.RowDefinitions>

                                        <StackPanel>
                                            <TextBlock Text="Anomalous Level"/>
                                            <ComboBox ItemsSource="{Binding SBBodyModAnomalous}"
                                                      DisplayMemberPath="Key"
                                                      SelectedValuePath="Value"
                                                      SelectedValue="{Binding SBBodyModAnomalousStipend}"
                                                      Width="120" 
                                                      HorizontalAlignment="Left"/>
                                        </StackPanel>

                                        <DockPanel Grid.Row="1" Grid.ColumnSpan="2">
                                            <TextBlock Text="Anomalous Description" DockPanel.Dock="Top"/>
                                            <TextBox Text="{Binding SBBodyModAnomalousDescription, ValidatesOnNotifyDataErrors=True}"
                                                     HorizontalAlignment="Stretch"
                                                     Style="{DynamicResource LargeTextBoxHintTemplate}"
                                                     Tag="Insert Anomalous description."/>
                                        </DockPanel>

                                        <StackPanel Grid.Column="1">
                                            <TextBlock Text="Stipend"/>
                                            <TextBox Text="{Binding SBBodyModAnomalousStipend}" IsReadOnly="True"
                                                     Width="40"/>
                                        </StackPanel>
                                    </Grid>
                                </DockPanel>

                                <GroupBox Header="Section details" Grid.Column="1">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*" MaxWidth="350"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="*"/>
                                            <RowDefinition Height="*"/>
                                        </Grid.RowDefinitions>

                                        <ListView ItemsSource="{Binding CharacterSelection.BodyMod.BaseFormDetails}"
                                                  SelectedItem="{Binding CharacterBaseFormDetailSelection}"
                                                  HorizontalAlignment="Stretch"
                                                  Loaded="ListView_Loaded" SizeChanged="ListView_SizeChanged" 
                                                  ScrollViewer.ScrollChanged="ListView_ScrollChanged" Tag="1">
                                            <ListView.View>
                                                <GridView>
                                                    <GridView.Columns>
                                                        <GridViewColumn Header="Section" Width="110"
                                                                        CellTemplate="{StaticResource ResourceKey=GridViewDefaultColumn}"
                                                                        DisplayMemberBinding="{Binding Category}"/>
                                                        <GridViewColumn Header="Selection" Width="Auto" 
                                                                        CellTemplate="{StaticResource ResourceKey=GridViewDefaultColumn}"
                                                                        DisplayMemberBinding="{Binding Name}"/>
                                                        <GridViewColumn Header="Cost" Width="75" 
                                                                        CellTemplate="{StaticResource ResourceKey=GridViewDefaultColumn}"
                                                                        DisplayMemberBinding="{Binding DisplayCost}"/>
                                                    </GridView.Columns>
                                                </GridView>
                                            </ListView.View>
                                        </ListView>

                                        <GroupBox Header="Base form detail selection" Grid.Column="1">
                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*" MaxWidth="200"/>
                                                    <ColumnDefinition Width="*" MaxWidth="200"/>
                                                </Grid.ColumnDefinitions>
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="*" MaxHeight="100"/>
                                                    <RowDefinition Height="*"/>
                                                </Grid.RowDefinitions>

                                                <StackPanel>
                                                    <TextBlock Text="Category"/>
                                                    <TextBox Text="{Binding CharacterBaseFormDetailSelection.Category}" IsReadOnly="True" Width="120"/>

                                                    <TextBlock Text="Cost" Margin="0,8,0,0"/>
                                                    <TextBox Text="{Binding CharacterBaseFormDetailSelection.Cost}" Width="40"/>
                                                </StackPanel>

                                                <StackPanel Grid.Column="1">
                                                    <TextBlock Text="Name"/>
                                                    <TextBox Text="{Binding CharacterBaseFormDetailName, ValidatesOnNotifyDataErrors=True}" Width="120"/>
                                                </StackPanel>

                                                <DockPanel Grid.Row="1" Grid.ColumnSpan="2">
                                                    <TextBlock Text="Description" DockPanel.Dock="Top"/>
                                                    <TextBox Text="{Binding CharacterBaseFormDetailDescription, ValidatesOnNotifyDataErrors=True}"
                                                             Style="{DynamicResource LargeTextBoxHintTemplate}"
                                                             HorizontalAlignment="Stretch"
                                                             Tag="Insert Base form detail description."/>
                                                </DockPanel>
                                            </Grid>
                                        </GroupBox>

                                        <DockPanel Grid.Row="1" Margin="0,12,0,0">
                                            <Grid DockPanel.Dock="Bottom" Margin="0,4,0,4">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto"/>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="Auto"/>
                                                </Grid.ColumnDefinitions>

                                                <Button Content="New" 
                                                    Command="{Binding NewSBExtraBitsCommand}"
                                                    Style="{DynamicResource DataGridButton}"
                                                    Grid.Row="0"/>

                                                <Button Content="Delete"
                                                    Command="{Binding DeleteSBExtraBitsCommand}"
                                                    Style="{DynamicResource DataGridButton}"
                                                    Grid.Column="2"/>
                                            </Grid>
                                            
                                            <ListView ItemsSource="{Binding SBExtraBitsList}"
                                                      SelectedIndex="{Binding SBExtraBitsIndex}"
                                                      SelectedItem="{Binding SBExtraBitsSelection}"
                                                      HorizontalAlignment="Stretch"
                                                      Loaded="ListView_Loaded" SizeChanged="ListView_SizeChanged" 
                                                      ScrollViewer.ScrollChanged="ListView_ScrollChanged" Tag="0">
                                                <ListView.View>
                                                    <GridView>
                                                        <GridView.Columns>
                                                            <GridViewColumn Header="Name" Width="Auto"
                                                                        CellTemplate="{StaticResource ResourceKey=GridViewDefaultColumn}"
                                                                        DisplayMemberBinding="{Binding Name}"/>
                                                            <GridViewColumn Header="Cost" Width="120" 
                                                                        CellTemplate="{StaticResource ResourceKey=GridViewDefaultColumn}"
                                                                        DisplayMemberBinding="{Binding DisplayCost}"/>
                                                        </GridView.Columns>
                                                    </GridView>
                                                </ListView.View>
                                            </ListView>
                                        </DockPanel>


                                        <GroupBox Header="Base form detail selection" Grid.Column="1" Grid.Row="1"
                                                  Margin="0,12,0,0">
                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*" MaxWidth="400"/>
                                                </Grid.ColumnDefinitions>
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="*" MaxHeight="100"/>
                                                    <RowDefinition Height="*"/>
                                                </Grid.RowDefinitions>

                                                <StackPanel>
                                                    <TextBlock Text="Name"/>
                                                    <TextBox Text="{Binding SBExtraBitsName, ValidatesOnNotifyDataErrors=True}" Width="120"/>

                                                    <TextBlock Text="Cost" Margin="0,8,0,0"/>
                                                    <TextBox Text="{Binding SBExtraBitsSelection.Cost}" Width="40"/>
                                                </StackPanel>

                                                <DockPanel Grid.Row="1">
                                                    <TextBlock Text="Description" DockPanel.Dock="Top"/>
                                                    <TextBox Text="{Binding SBExtraBitsDescription, ValidatesOnNotifyDataErrors=True}"
                                                         HorizontalAlignment="Stretch"
                                                         Style="{DynamicResource LargeTextBoxHintTemplate}"
                                                         Tag="Insert Base form detail description."/>
                                                </DockPanel>
                                            </Grid>
                                        </GroupBox>
                                    </Grid>
                                </GroupBox>
                            </Grid>
                        </TabItem>
                        <TabItem Header="Augments/Affinity">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="3*"/>
                                </Grid.ColumnDefinitions>

                                <DockPanel Margin="0,12,0,0">
                                    <ContentControl Template="{DynamicResource BudgetPanel}" DockPanel.Dock="Top"/>

                                    <Grid Margin="4,8,4,0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="3*" MaxWidth="150"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="*" MaxHeight="50"/>
                                            <RowDefinition Height="*" MaxHeight="200"/>
                                        </Grid.RowDefinitions>

                                        <StackPanel>
                                            <TextBlock Text="Augment Affinity"/>
                                            <ComboBox ItemsSource="{Binding SBBodyModAffinity}"
                                                      DisplayMemberPath="Key"
                                                      SelectedValuePath="Value"
                                                      SelectedValue="{Binding SBBodyModAffinityIndex}"
                                                      Width="120" 
                                                      HorizontalAlignment="Left"/>
                                        </StackPanel>

                                        <DockPanel Grid.Row="1" Grid.ColumnSpan="2">
                                            <TextBlock Text="Affinity Description" DockPanel.Dock="Top"/>
                                            <TextBox Text="{Binding SBBodyModAffinityDescription, ValidatesOnNotifyDataErrors=True}"
                                                     HorizontalAlignment="Stretch"
                                                     Style="{DynamicResource LargeTextBoxHintTemplate}"
                                                     Tag="Insert Affinity description."/>
                                        </DockPanel>

                                        <StackPanel Grid.Column="1">
                                            <TextBlock Text="Cost"/>
                                            <TextBox Text="{Binding SBBodyModAffinityCost}" IsReadOnly="True"
                                                     Width="40"/>
                                        </StackPanel>
                                    </Grid>
                                </DockPanel>
                                <Grid Grid.Column="1">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" MaxWidth="350"/>
                                        <ColumnDefinition Width="1.5*" MaxWidth="350"/>
                                    </Grid.ColumnDefinitions>

                                    <GroupBox Header="Section details">
                                        <Grid>
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="1.08*"/>
                                                <RowDefinition Height="1.1*"/>
                                                <RowDefinition Height="4*"/>
                                                <RowDefinition Height="4*"/>
                                                <RowDefinition Height="4*"/>
                                            </Grid.RowDefinitions>

                                            <StackPanel>
                                                <TextBlock Text="Total Augment Investment"/>
                                                <TextBox Text="{Binding CharacterSelection.BodyMod.AugmentInvestment}" IsReadOnly="True"
                                                         Width="40"/>
                                            </StackPanel>


                                            <CheckBox IsChecked="{Binding CharacterSelection.BodyMod.AscensionDiscount}"
                                                      Margin="0,8,0,0" Grid.Row="1">
                                                <TextBlock Text="Ascension Discount (Note: Overrides Affinity Discount)"
                                                           TextWrapping="Wrap"/>
                                            </CheckBox>

                                            <DockPanel Grid.Row="2">
                                                <TextBlock Text="Body Augments" DockPanel.Dock="Top"/>
                                                <ListView ItemsSource="{Binding CharacterSelection.BodyMod.BodyAugmentList, ValidatesOnNotifyDataErrors=True}"
                                                          SelectedItem="{Binding SBAugmentSelection}"
                                                          HorizontalAlignment="Stretch"
                                                          Loaded="ListView_Loaded" SizeChanged="ListView_SizeChanged" 
                                                          ScrollViewer.ScrollChanged="ListView_ScrollChanged" Tag="0">
                                                    <ListView.View>
                                                        <GridView>
                                                            <GridView.Columns>
                                                                <GridViewColumn Header="Name" DisplayMemberBinding="{Binding Name}" Width="Auto"/>
                                                                <GridViewColumn Header="Level" DisplayMemberBinding="{Binding AugmentLevel}" Width="40"/>
                                                                <GridViewColumn Header="Cost" DisplayMemberBinding="{Binding DisplayCost}" Width="40"/>
                                                            </GridView.Columns>
                                                        </GridView>
                                                    </ListView.View>
                                                </ListView>
                                            </DockPanel>

                                            <DockPanel Grid.Row="3">
                                                <TextBlock Text="Mind Augments" DockPanel.Dock="Top"/>
                                                <ListView ItemsSource="{Binding CharacterSelection.BodyMod.MindAugmentList, ValidatesOnNotifyDataErrors=True}"
                                                          SelectedItem="{Binding SBAugmentSelection}"
                                                          HorizontalAlignment="Stretch"
                                                          Loaded="ListView_Loaded" SizeChanged="ListView_SizeChanged" 
                                                          ScrollViewer.ScrollChanged="ListView_ScrollChanged" Tag="0">
                                                    <ListView.View>
                                                        <GridView>
                                                            <GridView.Columns>
                                                                <GridViewColumn Header="Name" DisplayMemberBinding="{Binding Name}" Width="Auto"/>
                                                                <GridViewColumn Header="Level" DisplayMemberBinding="{Binding AugmentLevel}" Width="40"/>
                                                                <GridViewColumn Header="Cost" DisplayMemberBinding="{Binding DisplayCost}" Width="40"/>
                                                            </GridView.Columns>
                                                        </GridView>
                                                    </ListView.View>
                                                </ListView>
                                            </DockPanel>

                                            <DockPanel Grid.Row="4">
                                                <TextBlock Text="Heart Augments" DockPanel.Dock="Top"/>
                                                <ListView ItemsSource="{Binding CharacterSelection.BodyMod.HeartAugmentList, ValidatesOnNotifyDataErrors=True}"
                                                          SelectedItem="{Binding SBAugmentSelection}"
                                                          HorizontalAlignment="Stretch"
                                                          Loaded="ListView_Loaded" SizeChanged="ListView_SizeChanged" 
                                                          ScrollViewer.ScrollChanged="ListView_ScrollChanged" Tag="0">
                                                    <ListView.View>
                                                        <GridView>
                                                            <GridView.Columns>
                                                                <GridViewColumn Header="Name" DisplayMemberBinding="{Binding Name}" Width="Auto"/>
                                                                <GridViewColumn Header="Level" DisplayMemberBinding="{Binding AugmentLevel}" Width="40"/>
                                                                <GridViewColumn Header="Cost" DisplayMemberBinding="{Binding DisplayCost}" Width="40"/>
                                                            </GridView.Columns>
                                                        </GridView>
                                                    </ListView.View>
                                                </ListView>
                                            </DockPanel>
                                        </Grid>
                                    </GroupBox>

                                    <GroupBox Header="Augment Details" Grid.Column="1">
                                        <!--<GroupBox.Visibility>
                                            <MultiBinding Converter="{StaticResource ListContainsToVis}">
                                                <Binding Path="SBAugmentSelection"/>
                                                <Binding Path="CharacterSelection.BodyMod.BodyAugmentList"/>
                                                <Binding Path="CharacterSelection.BodyMod.MindAugmentList"/>
                                                <Binding Path="CharacterSelection.BodyMod.HeartAugmentList"/>
                                            </MultiBinding>
                                        </GroupBox.Visibility>-->
                                        <Grid>
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="*" MaxHeight="100"/>
                                                <RowDefinition Height="*"/>
                                                <RowDefinition Height="2*"/>
                                            </Grid.RowDefinitions>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="1.2*"/>
                                                <ColumnDefinition Width="*"/>
                                            </Grid.ColumnDefinitions>

                                            <StackPanel>
                                                <TextBlock Text="Name"/>
                                                <TextBox Text="{Binding SBAugmentName, ValidatesOnNotifyDataErrors=True}"
                                                         Width="120"/>

                                                <TextBlock Text="Cost" Margin="0,8,0,0"/>
                                                <TextBox Text="{Binding SBAugmentSelection.Cost, ValidatesOnNotifyDataErrors=True}"
                                                         Width="40"/>
                                            </StackPanel>

                                            <StackPanel Grid.Column="1">
                                                <CheckBox Content="Discounted" IsChecked="{Binding SBAugmentSelection.Discounted}"/>
                                                <CheckBox Content="Free" IsChecked="{Binding SBAugmentSelection.Freebie}"
                                                          Margin="0,4,0,0"/>

                                                <TextBlock Text="Augment Level" Margin="0,8,0,0"/>
                                                <ComboBox ItemsSource="{Binding SBAugmentSelection.AugmentLevelList}"
                                                          SelectedValue="{Binding SBAugmentSelection.AugmentLevel}"
                                                          Width="100" HorizontalAlignment="Left"/>
                                            </StackPanel>

                                            <DockPanel Grid.Row="1" Grid.ColumnSpan="2">
                                                <TextBlock Text="Description" DockPanel.Dock="Top"/>
                                                <TextBox Text="{Binding SBAugmentDescription, ValidatesOnNotifyDataErrors=True}"
                                                         HorizontalAlignment="Stretch"
                                                         Style="{DynamicResource LargeTextBoxHintTemplate}"
                                                         Tag="Insert Augment description."/>
                                            </DockPanel>

                                            <DockPanel Grid.Row="2">
                                                <TextBlock Text="Special Traits" DockPanel.Dock="Top"/>

                                                <Grid DockPanel.Dock="Bottom" Margin="0,8,0,0">
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="Auto"/>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="Auto"/>
                                                    </Grid.ColumnDefinitions>
                                                    <Grid.RowDefinitions>
                                                        <RowDefinition Height="*"/>
                                                        <RowDefinition Height="*"/>
                                                        <RowDefinition Height="*"/>
                                                    </Grid.RowDefinitions>

                                                    <Button Content="New Trait" 
                                                            Command="{Binding NewAugmentTraitCommand}"
                                                            Style="{DynamicResource DataGridButton}"/>

                                                    <Button Content="Delete Trait"
                                                            Command="{Binding DeleteAugmentTraitCommand}"
                                                            Style="{DynamicResource DataGridButton}"
                                                            Grid.Column="2"/>
                                                </Grid>

                                                <ListView ItemsSource="{Binding PurchaseAttributeList}"
                                                          SelectedItem="{Binding PurchaseAttributeSelection}"
                                                          SelectedIndex="{Binding PurchaseAttributeIndex}"
                                                          Loaded="ListView_Loaded" SizeChanged="ListView_SizeChanged" 
                                                          ScrollViewer.ScrollChanged="ListView_ScrollChanged"
                                                          Tag="0">
                                                    <ListView.View>
                                                        <GridView>
                                                            <GridView.Columns>
                                                                <GridViewColumn Header="Name" DisplayMemberBinding="{Binding Name}" Width="Auto"/>
                                                                <GridViewColumn Header="Type" DisplayMemberBinding="{Binding Type}" Width="60"/>
                                                                <GridViewColumn Header="Category" DisplayMemberBinding="{Binding Category}" Width="75"/>
                                                            </GridView.Columns>
                                                        </GridView>
                                                    </ListView.View>
                                                </ListView>
                                            </DockPanel>

                                            <GroupBox Header="Trait Details" Grid.Column="1" Grid.Row="2">
                                                <!--<GroupBox.Visibility>
                                                        <MultiBinding Converter="{StaticResource ListContainsToVis}">
                                                            <Binding Path="PurchaseAttributeSelection"/>
                                                            <Binding Path="PurchaseAttributeList"/>
                                                        </MultiBinding>
                                                    </GroupBox.Visibility>-->
                                                <StackPanel VerticalAlignment="Top" HorizontalAlignment="Left">
                                                    <TextBlock Text="Name"/>
                                                    <ComboBox ItemsSource="{Binding CurrentAttributeList}"
                                                              SelectedValue="{Binding CurrentAttributeSelection}"
                                                              MinWidth="100"/>

                                                    <TextBlock Text="Type" Margin="0,12,0,0"/>
                                                    <ComboBox ItemsSource="{Binding AvailableAttributeTypeList}" 
                                                              SelectedValue="{Binding AttributeTypeSelection}"
                                                              MinWidth="100"/>

                                                    <TextBlock Text="Category" Margin="0,12,0,0"/>
                                                    <ComboBox ItemsSource="{Binding AvailableAttributeCategoryList}" 
                                                              SelectedValue="{Binding AttributeCategorySelection}"
                                                              MinWidth="100"/>

                                                    <StackPanel Visibility="{Binding AttributeBasicSelected, Converter={StaticResource BoolToVis}}"
                                                                Margin="0,12,0,0" VerticalAlignment="Top" HorizontalAlignment="Left">
                                                        <TextBlock Text="Rank"/>
                                                        <ComboBox ItemsSource="{Binding AttributeRankDictionary}"
                                                                  DisplayMemberPath="Key"
                                                                  SelectedValuePath="Value"
                                                                  SelectedValue="{Binding PurchaseAttributeSelection.Rank}"
                                                                  MinWidth="100"/>
                                                    </StackPanel>
                                                    <StackPanel Visibility="{Binding AttributeBoosterSelected, Converter={StaticResource BoolToVis}}"
                                                                    VerticalAlignment="Top" HorizontalAlignment="Left" Margin="0,12,0,0">
                                                        <TextBlock Text="Multiplier"/>
                                                        <TextBox Text="{Binding PurchaseAttributeSelection.Value, ValidatesOnNotifyDataErrors=True}" MinWidth="40"/>
                                                    </StackPanel>
                                                    <StackPanel Visibility="{Binding AttributeSpecialSelected, Converter={StaticResource BoolToVis}}" 
                                                                    VerticalAlignment="Top" HorizontalAlignment="Left" Margin="0,12,0,0">
                                                        <TextBlock Text="Value"/>
                                                        <TextBox Text="{Binding PurchaseAttributeSelection.Value, ValidatesOnNotifyDataErrors=True}" MinWidth="40"/>
                                                    </StackPanel>
                                                </StackPanel>
                                            </GroupBox>
                                        </Grid>
                                    </GroupBox>
                                </Grid>
                            </Grid>
                        </TabItem>
                        <TabItem Header="Powers">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" MaxWidth="400"/>
                                    <ColumnDefinition Width="2*"/>
                                </Grid.ColumnDefinitions>

                                <DockPanel Margin="4,0,4,0">
                                    <ContentControl Template="{DynamicResource BudgetPanel}" DockPanel.Dock="Top"/>

                                    <Grid DockPanel.Dock="Bottom" Margin="0,4,0,4">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="*"/>
                                            <RowDefinition Height="*" MinHeight="12"/>
                                            <RowDefinition Height="*"/>
                                        </Grid.RowDefinitions>

                                        <Button Content="New" 
                                                Command="{Binding NewSBPowerCommand}"
                                                Style="{DynamicResource DataGridButton}"/>

                                        <Button Content="Delete"
                                                Command="{Binding DeleteSBPowerCommand}"
                                                Style="{DynamicResource DataGridButton}"
                                                Grid.Column="2"/>
                                    </Grid>

                                    <ListView ItemsSource="{Binding SBBodyModPowerList}"
                                              SelectedItem="{Binding SBBodyModPowerSelection}"
                                              SelectedIndex="{Binding SBBodyModPowerIndex}"
                                              Loaded="ListView_Loaded" SizeChanged="ListView_SizeChanged" 
                                              ScrollViewer.ScrollChanged="ListView_ScrollChanged"
                                              Tag="0">
                                        <ListView.View>
                                            <GridView>
                                                <GridView.Columns>
                                                    <GridViewColumn Header="Name" Width="Auto"
                                                                    CellTemplate="{StaticResource ResourceKey=GridViewDefaultColumn}"
                                                                    DisplayMemberBinding="{Binding Name}"/>
                                                    <GridViewColumn Header="Category" Width="60"
                                                                    CellTemplate="{StaticResource ResourceKey=GridViewDefaultColumn}"
                                                                    DisplayMemberBinding="{Binding Category}"/>
                                                    <GridViewColumn Header="Cost" Width="50"
                                                                    CellTemplate="{StaticResource ResourceKey=GridViewDefaultColumn}"
                                                                    DisplayMemberBinding="{Binding Cost}"/>
                                                </GridView.Columns>
                                            </GridView>
                                        </ListView.View>
                                    </ListView>
                                </DockPanel>

                                <GroupBox Header="Purchase Details" Grid.Column="1">
                                    <!--<GroupBox.Visibility>
                                        <MultiBinding Converter="{StaticResource ListContainsToVis}">
                                            <Binding Path="SBBodyModPowerSelection"/>
                                            <Binding Path="SBBodyModPowerList"/>
                                        </MultiBinding>
                                    </GroupBox.Visibility>-->
                                    <Grid Margin="8,0,0,0">
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="1.2*"/>
                                            <RowDefinition Height="2*"/>
                                            <RowDefinition Height="3*"/>
                                        </Grid.RowDefinitions>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*" MaxWidth="400"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>

                                        <StackPanel>
                                            <TextBlock Text="Name"/>
                                            <TextBox Text="{Binding SBBodyModPowerSelection.Name, ValidatesOnNotifyDataErrors=True}"
                                                     Width="120"/>

                                            <TextBlock Text="Cost" Margin="0,8,0,0"/>
                                            <TextBox Text="{Binding SBBodyModPowerSelection.Cost, ValidatesOnNotifyDataErrors=True}"
                                                     Width="40"/>
                                        </StackPanel>

                                        <StackPanel Grid.Column="1">
                                            <CheckBox Content="Discounted" IsChecked="{Binding SBBodyModPowerSelection.Discounted}"/>
                                            <CheckBox Content="Free" IsChecked="{Binding SBBodyModPowerSelection.Freebie}"
                                                      Margin="0,8,0,0"/>

                                            <TextBlock Text="Category" Margin="0,8,0,0"/>
                                            <ComboBox ItemsSource="{Binding SBBodyModPowerCategories}"
                                                      SelectedValue="{Binding SBBodyModPowerSelection.Category, ValidatesOnNotifyDataErrors=True}"
                                                      Width="120"
                                                      HorizontalAlignment="Left"/>
                                        </StackPanel>

                                        <DockPanel Grid.Row="1">
                                            <TextBlock Text="Description" DockPanel.Dock="Top"/>
                                            <TextBox Text="{Binding SBBodyModPowerDescription, ValidatesOnNotifyDataErrors=True}"
                                                     HorizontalAlignment="Stretch"
                                                     Style="{DynamicResource LargeTextBoxHintTemplate}"
                                                     Tag="Insert Power description."/>
                                        </DockPanel>

                                        <DockPanel Grid.Row="2" Margin="0,8,0,0">
                                            <TextBlock Text="Special Traits" DockPanel.Dock="Top"/>
                                            <Grid DockPanel.Dock="Bottom" Margin="0,8,0,0">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto"/>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="Auto"/>
                                                </Grid.ColumnDefinitions>

                                                <Button Content="New Trait" 
                                                        Command="{Binding NewSBPowerTraitCommand}"
                                                        HorizontalAlignment="Left"
                                                        VerticalAlignment="Center"
                                                        Style="{DynamicResource DataGridButton}"/>

                                                <Button Content="Delete Trait"
                                                        Command="{Binding DeleteSBPowerTraitCommand}"
                                                        HorizontalAlignment="Right"
                                                        VerticalAlignment="Center"
                                                        Style="{DynamicResource DataGridButton}"
                                                        Grid.Column="2"/>
                                            </Grid>

                                            <ListView ItemsSource="{Binding PurchaseAttributeList}"
                                                      SelectedItem="{Binding PurchaseAttributeSelection}"
                                                      SelectedIndex="{Binding PurchaseAttributeIndex}"
                                                      Loaded="ListView_Loaded" SizeChanged="ListView_SizeChanged" 
                                                      ScrollViewer.ScrollChanged="ListView_ScrollChanged" Tag="0">
                                                <ListView.View>
                                                    <GridView>
                                                        <GridView.Columns>
                                                            <GridViewColumn Header="Name" DisplayMemberBinding="{Binding Name}" Width="Auto"/>
                                                            <GridViewColumn Header="Type" DisplayMemberBinding="{Binding Type}" Width="60"/>
                                                            <GridViewColumn Header="Category" DisplayMemberBinding="{Binding Category}" Width="75"/>
                                                        </GridView.Columns>
                                                    </GridView>
                                                </ListView.View>
                                            </ListView>
                                        </DockPanel>

                                        <GroupBox Header="Trait Details" Grid.Row="2" Grid.Column="1" Margin="0,8,0,0">
                                            <!--<GroupBox.Visibility>
                                                <MultiBinding Converter="{StaticResource ListContainsToVis}">
                                                    <Binding Path="PurchaseAttributeSelection"/>
                                                    <Binding Path="PurchaseAttributeList"/>
                                                </MultiBinding>
                                            </GroupBox.Visibility>-->
                                            <StackPanel VerticalAlignment="Top" HorizontalAlignment="Left">
                                                <TextBlock Text="Name"/>
                                                <ComboBox ItemsSource="{Binding CurrentAttributeList}"
                                                          SelectedValue="{Binding CurrentAttributeSelection}"
                                                          MinWidth="100"/>

                                                <TextBlock Text="Type" Margin="0,12,0,0"/>
                                                <ComboBox ItemsSource="{Binding AvailableAttributeTypeList}" 
                                                          SelectedValue="{Binding AttributeTypeSelection}"
                                                          MinWidth="100"/>

                                                <TextBlock Text="Category" Margin="0,12,0,0"/>
                                                <ComboBox ItemsSource="{Binding AvailableAttributeCategoryList}" 
                                                          SelectedValue="{Binding AttributeCategorySelection}"
                                                          MinWidth="100"/>

                                                <StackPanel Visibility="{Binding AttributeBasicSelected, Converter={StaticResource BoolToVis}}"
                                                            Margin="0,12,0,0" VerticalAlignment="Top" HorizontalAlignment="Left">
                                                    <TextBlock Text="Rank"/>
                                                    <ComboBox ItemsSource="{Binding AttributeRankDictionary}"
                                                              DisplayMemberPath="Key"
                                                              SelectedValuePath="Value"
                                                              SelectedValue="{Binding PurchaseAttributeSelection.Rank}"
                                                              MinWidth="100"/>
                                                </StackPanel>
                                                <StackPanel Visibility="{Binding AttributeBoosterSelected, Converter={StaticResource BoolToVis}}"
                                                            VerticalAlignment="Top" HorizontalAlignment="Left" Margin="0,12,0,0">
                                                    <TextBlock Text="Multiplier"/>
                                                    <TextBox Text="{Binding PurchaseAttributeSelection.Value, ValidatesOnNotifyDataErrors=True}" MinWidth="40"/>
                                                </StackPanel>
                                                <StackPanel Visibility="{Binding AttributeSpecialSelected, Converter={StaticResource BoolToVis}}" 
                                                            VerticalAlignment="Top" HorizontalAlignment="Left" Margin="0,12,0,0">
                                                    <TextBlock Text="Value"/>
                                                    <TextBox Text="{Binding PurchaseAttributeSelection.Value, ValidatesOnNotifyDataErrors=True}" MinWidth="40"/>
                                                </StackPanel>
                                            </StackPanel>
                                        </GroupBox>
                                    </Grid>
                                </GroupBox>
                            </Grid>
                        </TabItem>
                        <TabItem Header="Additions">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" MaxWidth="400"/>
                                    <ColumnDefinition Width="2*"/>
                                </Grid.ColumnDefinitions>

                                <ListView ItemsSource="{Binding BodyModAdditionList}"
                                          SelectedItem="{Binding BodyModAdditionSelection}"
                                          SelectedIndex="{Binding BodyModAdditionSelectionIndex}"
                                          Loaded="ListView_Loaded" SizeChanged="ListView_SizeChanged" 
                                          ScrollViewer.ScrollChanged="ListView_ScrollChanged" Tag="0"
                                          Margin="4,0,4,4">
                                    <ListView.View>
                                        <GridView>
                                            <GridView.Columns>
                                                <GridViewColumn Header="Name" Width="Auto"
                                                                CellTemplate="{StaticResource ResourceKey=GridViewDefaultColumn}"
                                                                DisplayMemberBinding="{Binding Name}"/>
                                            </GridView.Columns>
                                        </GridView>
                                    </ListView.View>
                                </ListView>

                                <GroupBox Header="Addition Details" Grid.Column="1">
                                    <!--<GroupBox.Visibility>
                                        <MultiBinding Converter="{StaticResource ListContainsToVis}">
                                            <Binding Path="BodyModAdditionSelection"/>
                                            <Binding Path="BodyModAdditionList"/>
                                        </MultiBinding>
                                    </GroupBox.Visibility>-->
                                    <Grid Margin="8,0,0,0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*" MaxWidth="700"/>
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="*"/>
                                            <RowDefinition Height="2*"/>
                                            <RowDefinition Height="2*"/>
                                        </Grid.RowDefinitions>

                                        <StackPanel>
                                            <TextBlock Text="Name"/>
                                            <TextBox Text="{Binding BodyModAdditionName, ValidatesOnNotifyDataErrors=True}"
                                                     Width="120"/>

                                            <TextBlock Text="Source Jump" Margin="0,8,0,0"/>
                                            <TextBox Text="{Binding BodyModAdditionSelection.SourceJump, ValidatesOnNotifyDataErrors=True}"
                                                     Width="120"
                                                     IsReadOnly="True"/>
                                        </StackPanel>

                                        <DockPanel Grid.Row="1">
                                            <TextBlock Text="Description" DockPanel.Dock="Top"/>
                                            <TextBox Text="{Binding BodyModAdditionDescription, ValidatesOnNotifyDataErrors=True}"
                                                     HorizontalAlignment="Stretch"
                                                     Style="{DynamicResource LargeTextBoxHintTemplate}"/>
                                        </DockPanel>
                                    </Grid>
                                </GroupBox>
                            </Grid>
                        </TabItem>
                    </TabControl>

                    <TabControl Visibility="{Binding EssentialBodyModSelected, Converter={StaticResource BoolToVis}}"
                                SelectedIndex="{Binding EBMTabIndex}">
                        <TabItem Header="Supplement Details">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="2*" MaxWidth="400"/>
                                    <ColumnDefinition Width="*" MaxWidth="250"/>
                                    <ColumnDefinition Width="*" MaxWidth="400"/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="2*" MaxHeight="225"/>
                                    <RowDefinition Height="2*"/>
                                    <RowDefinition Height="*"/>
                                </Grid.RowDefinitions>

                                <GroupBox Header="EP">
                                    <Grid>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="*" MaxHeight="25"/>
                                            <RowDefinition Height="*"/>
                                        </Grid.RowDefinitions>

                                        <Button Content="Refresh EP"
                                                Command="{Binding RefreshBPCommand}"
                                                HorizontalAlignment="Center"
                                                VerticalAlignment="Center"
                                                Style="{DynamicResource DataGridButton}"/>

                                        <Grid Grid.Row="1" Margin="0,12,0,0">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="*"/>
                                            </Grid.ColumnDefinitions>

                                            <StackPanel>
                                                <TextBlock Text="Total EP"/>
                                                <TextBox Text="{Binding TotalBP, ValidatesOnNotifyDataErrors=True}" IsReadOnly="True"
                                                         Width="40"/>

                                                <TextBlock Text="EP Budget" Margin="0,8,0,0"/>
                                                <TextBox Text="{Binding Budget, ValidatesOnNotifyDataErrors=True}" IsReadOnly="True"
                                                         Width="40"/>
                                            </StackPanel>

                                            <StackPanel Grid.Column="1">
                                                <TextBlock Text="CP Invested"/>
                                                <TextBox Text="{Binding CPInvested, ValidatesOnNotifyDataErrors=True}" IsReadOnly="True"
                                                         Width="40"/>

                                                <TextBlock Text="EP from investment" Margin="0,8,0,0"/>
                                                <TextBox Text="{Binding BPBought, ValidatesOnNotifyDataErrors=True}" IsReadOnly="True"
                                                     Width="40"/>

                                                <TextBlock Text="Per-Jump EP total" Margin="0,8,0,0"/>
                                                <TextBox Text="{Binding JumpBPGained, ValidatesOnNotifyDataErrors=True}" IsReadOnly="True"
                                                         Width="40"/>
                                            </StackPanel>

                                            <StackPanel Grid.Column="2">
                                                <TextBlock Text="Gauntlet EP Total"/>
                                                <TextBox Text="{Binding GauntletBP, ValidatesOnNotifyDataErrors=True}" IsReadOnly="True"
                                                         Width="40"/>

                                                <TextBlock Text="EP from Drawbacks" Margin="0,8,0,0"/>
                                                <TextBox Text="{Binding DrawbackBP, ValidatesOnNotifyDataErrors=True}" IsReadOnly="True"
                                                         Width="40"/>

                                                <TextBlock Text="Quest EP Total" Margin="0,8,0,0"/>
                                                <TextBox Text="{Binding QuestBP, ValidatesOnNotifyDataErrors=True}" IsReadOnly="True"
                                                         Width="40"/>
                                            </StackPanel>
                                        </Grid>
                                    </Grid>
                                </GroupBox>

                                <GroupBox Header="Character-specific settings" Grid.Column="1">
                                    <StackPanel>
                                        <TextBlock Text="Supplement taken on Jump #"/>
                                        <TextBox Text="{Binding EBMSupplementDelay}"
                                                 Width="40"/>

                                        <TextBlock Text="Minor Quests completed" Margin="0,12,0,0"/>
                                        <TextBox Text="{Binding EBMMinorQuests, ValidatesOnNotifyDataErrors=True}"
                                                 Width="40"/>

                                        <TextBlock Text="Major Quests completed" Margin="0,12,0,0"/>
                                        <TextBox Text="{Binding EBMMajorQuests, ValidatesOnNotifyDataErrors=True}"
                                                 Width="40"/>
                                    </StackPanel>
                                </GroupBox>

                                <GroupBox Header="Essence Selection" Grid.Row="1" Grid.Column="1"
                                          Visibility="Visible">
                                    <DockPanel>
                                        <Grid DockPanel.Dock="Bottom">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="Auto"/>
                                            </Grid.ColumnDefinitions>
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="*"/>
                                                <RowDefinition Height="*"/>
                                                <RowDefinition Height="*"/>
                                            </Grid.RowDefinitions>

                                            <Button Content="New Essence" 
                                                    Command="{Binding NewEssenceCommand}"
                                                    Style="{DynamicResource DataGridButton}"/>

                                            <Button Content="Delete Essence"
                                                    Command="{Binding DeleteEssenceCommand}"
                                                    Style="{DynamicResource DataGridButton}"
                                                    Grid.Column="2"/>
                                        </Grid>

                                        <ListView ItemsSource="{Binding EBMEssenceList}"
                                                  SelectedItem="{Binding EBMEssenceSelection}"
                                                  SelectedIndex="{Binding EBMEssenceIndex}"
                                                  HorizontalAlignment="Stretch"
                                                  Loaded="ListView_Loaded" SizeChanged="ListView_SizeChanged" 
                                                  ScrollViewer.ScrollChanged="ListView_ScrollChanged" Tag="0">
                                            <ListView.View>
                                                <GridView>
                                                    <GridView.Columns>
                                                        <GridViewColumn Header="Name" Width="Auto"
                                                                        CellTemplate="{StaticResource ResourceKey=GridViewDefaultColumn}"
                                                                        DisplayMemberBinding="{Binding Name}"/>
                                                    </GridView.Columns>
                                                </GridView>
                                            </ListView.View>
                                        </ListView>
                                    </DockPanel>
                                </GroupBox>

                                <GroupBox Header="Essence Details" Grid.Row="1" Grid.Column="2">
                                    <!--<GroupBox.Visibility>
                                        <MultiBinding Converter="{StaticResource ListContainsToVis}">
                                            <Binding Path="EBMEssenceSelection"/>
                                            <Binding Path="EBMEssenceList"/>
                                        </MultiBinding>
                                    </GroupBox.Visibility>-->
                                    <Grid>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="*" MaxHeight="50"/>
                                            <RowDefinition Height="2*"/>
                                        </Grid.RowDefinitions>

                                        <StackPanel>
                                            <TextBlock Text="Name"/>
                                            <TextBox Text="{Binding EBMEssenceName, ValidatesOnNotifyDataErrors=True}"
                                                     Width="120"/>
                                        </StackPanel>

                                        <DockPanel Grid.Row="1">
                                            <TextBlock Text="Description" DockPanel.Dock="Top"/>
                                            <TextBox Text="{Binding EBMEssenceDescription, ValidatesOnNotifyDataErrors=True}"
                                                 HorizontalAlignment="Stretch"
                                                 Style="{DynamicResource LargeTextBoxHintTemplate}"
                                                 Tag="Insert Essence description."/>
                                        </DockPanel>
                                    </Grid>
                                </GroupBox>
                            </Grid>
                        </TabItem>
                        <TabItem Header="Purchases">
                            <TabControl SelectedIndex="{Binding EBMPurchaseTabIndex}">
                                <TabItem Header="Basic">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*" MaxWidth="400"/>
                                            <ColumnDefinition Width="2*"/>
                                        </Grid.ColumnDefinitions>

                                        <DockPanel Margin="4,0,4,0">
                                            <ContentControl Template="{DynamicResource BudgetPanel}" DockPanel.Dock="Top"
                                                            Margin="0,4,0,4"/>

                                            <Grid DockPanel.Dock="Bottom" Margin="0,4,0,4">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto"/>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="Auto"/>
                                                </Grid.ColumnDefinitions>

                                                <Button Content="New Purchase" 
                                                        Command="{Binding NewEBMPerkCommand}"
                                                        Style="{DynamicResource DataGridButton}"/>

                                                <Button Content="Delete Purchase"
                                                        Command="{Binding DeleteEBMPerkCommand}"
                                                        Style="{DynamicResource DataGridButton}"
                                                        Grid.Column="2"/>
                                            </Grid>

                                            <ListView ItemsSource="{Binding EBMBasicPerkList}"
                                                      SelectedItem="{Binding EBMBasicPerkSelection}"
                                                      SelectedIndex="{Binding EBMBasicPerkIndex}"
                                                      Loaded="ListView_Loaded" SizeChanged="ListView_SizeChanged" 
                                                      ScrollViewer.ScrollChanged="ListView_ScrollChanged" Tag="0">
                                                <ListView.View>
                                                    <GridView>
                                                        <GridView.Columns>
                                                            <GridViewColumn Header="Name" Width="Auto"
                                                                            CellTemplate="{StaticResource ResourceKey=GridViewDefaultColumn}"
                                                                            DisplayMemberBinding="{Binding Name}"/>
                                                            <GridViewColumn Header="Cost" Width="50"
                                                                            CellTemplate="{StaticResource ResourceKey=GridViewDefaultColumn}"
                                                                            DisplayMemberBinding="{Binding DisplayCost}"/>
                                                        </GridView.Columns>
                                                    </GridView>
                                                </ListView.View>
                                            </ListView>
                                        </DockPanel>

                                        <GroupBox Header="Purchase Details" Grid.Column="1">
                                            <!--<GroupBox.Visibility>
                                                <MultiBinding Converter="{StaticResource ListContainsToVis}">
                                                    <Binding Path="EBMBasicPerkSelection"/>
                                                    <Binding Path="EBMBasicPerkList"/>
                                                </MultiBinding>
                                            </GroupBox.Visibility>-->
                                            <Grid Margin="8,0,0,0">
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="1.1*"/>
                                                    <RowDefinition Height="1.6*"/>
                                                    <RowDefinition Height="3*"/>
                                                </Grid.RowDefinitions>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*" MaxWidth="400"/>
                                                    <ColumnDefinition Width="*"/>
                                                </Grid.ColumnDefinitions>

                                                <StackPanel>
                                                    <TextBlock Text="Name"/>
                                                    <TextBox Text="{Binding EBMBasicPerkName, ValidatesOnNotifyDataErrors=True}"
                                                             Width="120"/>

                                                    <TextBlock Text="Cost" Margin="0,8,0,0"/>
                                                    <TextBox Text="{Binding EBMBasicPerkSelection.Cost, ValidatesOnNotifyDataErrors=True}"
                                                             Width="40"/>
                                                </StackPanel>

                                                <StackPanel Grid.Column="1">
                                                    <CheckBox Content="Discounted" IsChecked="{Binding EBMBasicPerkSelection.Discounted}"/>
                                                    <CheckBox Content="Free" IsChecked="{Binding EBMBasicPerkSelection.Freebie}"
                                                              Margin="0,8,0,0"/>
                                                </StackPanel>

                                                <DockPanel Grid.Row="1">
                                                    <TextBlock Text="Description" DockPanel.Dock="Top"/>
                                                    <TextBox Text="{Binding EBMBasicPerkDescription, ValidatesOnNotifyDataErrors=True}"
                                                             HorizontalAlignment="Stretch"
                                                             Style="{DynamicResource LargeTextBoxHintTemplate}"
                                                             Tag="Insert Perk description."/>
                                                </DockPanel>

                                                <DockPanel Grid.Row="2" Margin="0,8,0,0">
                                                    <TextBlock Text="Special Traits" DockPanel.Dock="Top"/>
                                                    <Grid DockPanel.Dock="Bottom" Margin="0,8,0,0">
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="Auto"/>
                                                            <ColumnDefinition Width="*"/>
                                                            <ColumnDefinition Width="Auto"/>
                                                        </Grid.ColumnDefinitions>

                                                        <Button Content="New Trait" 
                                                                Command="{Binding NewEBMTraitCommand}"
                                                                Style="{DynamicResource DataGridButton}"/>

                                                        <Button Content="Delete Trait"
                                                                Command="{Binding DeleteEBMTraitCommand}"
                                                                Style="{DynamicResource DataGridButton}"
                                                                Grid.Column="2"/>
                                                    </Grid>
                                                    <ListView ItemsSource="{Binding PurchaseAttributeList}"
                                                              SelectedItem="{Binding PurchaseAttributeSelection}"
                                                              SelectedIndex="{Binding PurchaseAttributeIndex}"
                                                              Loaded="ListView_Loaded" SizeChanged="ListView_SizeChanged" 
                                                              ScrollViewer.ScrollChanged="ListView_ScrollChanged" Tag="0">
                                                        <ListView.View>
                                                            <GridView>
                                                                <GridView.Columns>
                                                                    <GridViewColumn Header="Name" DisplayMemberBinding="{Binding Name}" Width="Auto"/>
                                                                    <GridViewColumn Header="Type" DisplayMemberBinding="{Binding Type}" Width="60"/>
                                                                    <GridViewColumn Header="Category" DisplayMemberBinding="{Binding Category}" Width="75"/>
                                                                </GridView.Columns>
                                                            </GridView>
                                                        </ListView.View>
                                                    </ListView>
                                                </DockPanel>

                                                <GroupBox Header="Trait Details" Grid.Row="2" Grid.Column="1" Margin="0,8,0,0">
                                                    <!--<GroupBox.Visibility>
                                                        <MultiBinding Converter="{StaticResource ListContainsToVis}">
                                                            <Binding Path="PurchaseAttributeSelection"/>
                                                            <Binding Path="PurchaseAttributeList"/>
                                                        </MultiBinding>
                                                    </GroupBox.Visibility>-->
                                                    <StackPanel VerticalAlignment="Top" HorizontalAlignment="Left">
                                                        <TextBlock Text="Name"/>
                                                        <ComboBox ItemsSource="{Binding CurrentAttributeList}"
                                                                  SelectedValue="{Binding CurrentAttributeSelection}"
                                                                  MinWidth="100"/>

                                                        <TextBlock Text="Type" Margin="0,12,0,0"/>
                                                        <ComboBox ItemsSource="{Binding AvailableAttributeTypeList}" 
                                                                  SelectedValue="{Binding AttributeTypeSelection}"
                                                                  MinWidth="100"/>

                                                        <TextBlock Text="Category" Margin="0,12,0,0"/>
                                                        <ComboBox ItemsSource="{Binding AvailableAttributeCategoryList}" 
                                                                  SelectedValue="{Binding AttributeCategorySelection}"
                                                                  MinWidth="100"/>

                                                        <StackPanel Visibility="{Binding AttributeBasicSelected, Converter={StaticResource BoolToVis}}"
                                                                    Margin="0,12,0,0" VerticalAlignment="Top" HorizontalAlignment="Left">
                                                            <TextBlock Text="Rank"/>
                                                            <ComboBox ItemsSource="{Binding AttributeRankDictionary}"
                                                                      DisplayMemberPath="Key"
                                                                      SelectedValuePath="Value"
                                                                      SelectedValue="{Binding PurchaseAttributeSelection.Rank}"
                                                                      MinWidth="100"/>
                                                        </StackPanel>
                                                        <StackPanel Visibility="{Binding AttributeBoosterSelected, Converter={StaticResource BoolToVis}}"
                                                                    VerticalAlignment="Top" HorizontalAlignment="Left" Margin="0,12,0,0">
                                                            <TextBlock Text="Multiplier"/>
                                                            <TextBox Text="{Binding PurchaseAttributeSelection.Value, ValidatesOnNotifyDataErrors=True}" MinWidth="40"/>
                                                        </StackPanel>
                                                        <StackPanel Visibility="{Binding AttributeSpecialSelected, Converter={StaticResource BoolToVis}}" 
                                                                    VerticalAlignment="Top" HorizontalAlignment="Left" Margin="0,12,0,0">
                                                            <TextBlock Text="Value"/>
                                                            <TextBox Text="{Binding PurchaseAttributeSelection.Value, ValidatesOnNotifyDataErrors=True}" MinWidth="40"/>
                                                        </StackPanel>
                                                    </StackPanel>
                                                </GroupBox>
                                            </Grid>
                                        </GroupBox>
                                    </Grid>
                                </TabItem>
                                <TabItem Header="Physical">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*" MaxWidth="400"/>
                                            <ColumnDefinition Width="2*"/>
                                        </Grid.ColumnDefinitions>

                                        <DockPanel Margin="4,0,4,0">
                                            <ContentControl Template="{DynamicResource BudgetPanel}" DockPanel.Dock="Top"
                                                            Margin="0,4,0,4"/>

                                            <Grid DockPanel.Dock="Bottom" Margin="0,4,0,4">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto"/>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="Auto"/>
                                                </Grid.ColumnDefinitions>

                                                <Button Content="New Purchase" 
                                                        Command="{Binding NewEBMPerkCommand}"
                                                        Style="{DynamicResource DataGridButton}"/>

                                                <Button Content="Delete Purchase"
                                                        Command="{Binding DeleteEBMPerkCommand}"
                                                        Style="{DynamicResource DataGridButton}"
                                                        Grid.Column="2"/>
                                            </Grid>

                                            <ListView ItemsSource="{Binding EBMPhysicalPerkList}"
                                                      SelectedItem="{Binding EBMPhysicalPerkSelection}"
                                                      SelectedIndex="{Binding EBMPhysicalPerkIndex}"
                                                      Loaded="ListView_Loaded" SizeChanged="ListView_SizeChanged" 
                                                      ScrollViewer.ScrollChanged="ListView_ScrollChanged" Tag="0">
                                                <ListView.View>
                                                    <GridView>
                                                        <GridView.Columns>
                                                            <GridViewColumn Header="Name" Width="Auto"
                                                                            CellTemplate="{StaticResource ResourceKey=GridViewDefaultColumn}"
                                                                            DisplayMemberBinding="{Binding Name}"/>
                                                            <GridViewColumn Header="Cost" Width="50"
                                                                            CellTemplate="{StaticResource ResourceKey=GridViewDefaultColumn}"
                                                                            DisplayMemberBinding="{Binding DisplayCost}"/>
                                                        </GridView.Columns>
                                                    </GridView>
                                                </ListView.View>
                                            </ListView>
                                        </DockPanel>

                                        <GroupBox Header="Purchase Details" Grid.Column="1">
                                            <!--<GroupBox.Visibility>
                                                <MultiBinding Converter="{StaticResource ListContainsToVis}">
                                                    <Binding Path="EBMPhysicalPerkSelection"/>
                                                    <Binding Path="EBMPhysicalPerkList"/>
                                                </MultiBinding>
                                            </GroupBox.Visibility>-->
                                            <Grid Margin="8,0,0,0">
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="1.1*"/>
                                                    <RowDefinition Height="1.6*"/>
                                                    <RowDefinition Height="3*"/>
                                                </Grid.RowDefinitions>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*" MaxWidth="400"/>
                                                    <ColumnDefinition Width="*"/>
                                                </Grid.ColumnDefinitions>

                                                <StackPanel>
                                                    <TextBlock Text="Name"/>
                                                    <TextBox Text="{Binding EBMPhysicalPerkName, ValidatesOnNotifyDataErrors=True}"
                                                             Width="120"/>

                                                    <TextBlock Text="Cost" Margin="0,8,0,0"/>
                                                    <TextBox Text="{Binding EBMPhysicalPerkSelection.Cost, ValidatesOnNotifyDataErrors=True}"
                                                             Width="40"/>
                                                </StackPanel>

                                                <StackPanel Grid.Column="1">
                                                    <CheckBox Content="Discounted" IsChecked="{Binding EBMPhysicalPerkSelection.Discounted}"/>
                                                    <CheckBox Content="Free" IsChecked="{Binding EBMPhysicalPerkSelection.Freebie}"
                                                              Margin="0,8,0,0"/>
                                                </StackPanel>

                                                <DockPanel Grid.Row="1">
                                                    <TextBlock Text="Description" DockPanel.Dock="Top"/>
                                                    <TextBox Text="{Binding EBMPhysicalPerkDescription, ValidatesOnNotifyDataErrors=True}"
                                                             HorizontalAlignment="Stretch"
                                                             Style="{DynamicResource LargeTextBoxHintTemplate}"
                                                             Tag="Insert Perk description."/>
                                                </DockPanel>

                                                <DockPanel Grid.Row="2" Margin="0,8,0,0">
                                                    <TextBlock Text="Special Traits" DockPanel.Dock="Top"/>
                                                    <Grid DockPanel.Dock="Bottom" Margin="0,8,0,0">
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="Auto"/>
                                                            <ColumnDefinition Width="*"/>
                                                            <ColumnDefinition Width="Auto"/>
                                                        </Grid.ColumnDefinitions>

                                                        <Button Content="New Trait" 
                                                                Command="{Binding NewEBMTraitCommand}"
                                                                Style="{DynamicResource DataGridButton}"/>

                                                        <Button Content="Delete Trait"
                                                                Command="{Binding DeleteEBMTraitCommand}"
                                                                Style="{DynamicResource DataGridButton}"
                                                                Grid.Column="2"/>
                                                    </Grid>
                                                    <ListView ItemsSource="{Binding PurchaseAttributeList}"
                                                              SelectedItem="{Binding PurchaseAttributeSelection}"
                                                              SelectedIndex="{Binding PurchaseAttributeIndex}"
                                                              Loaded="ListView_Loaded" SizeChanged="ListView_SizeChanged" 
                                                              ScrollViewer.ScrollChanged="ListView_ScrollChanged" Tag="0">
                                                        <ListView.View>
                                                            <GridView>
                                                                <GridView.Columns>
                                                                    <GridViewColumn Header="Name" DisplayMemberBinding="{Binding Name}" Width="Auto"/>
                                                                    <GridViewColumn Header="Type" DisplayMemberBinding="{Binding Type}" Width="60"/>
                                                                    <GridViewColumn Header="Category" DisplayMemberBinding="{Binding Category}" Width="75"/>
                                                                </GridView.Columns>
                                                            </GridView>
                                                        </ListView.View>
                                                    </ListView>
                                                </DockPanel>

                                                <GroupBox Header="Trait Details" Grid.Row="2" Grid.Column="1" Margin="0,8,0,0">
                                                    <!--<GroupBox.Visibility>
                                                        <MultiBinding Converter="{StaticResource ListContainsToVis}">
                                                            <Binding Path="PurchaseAttributeSelection"/>
                                                            <Binding Path="PurchaseAttributeList"/>
                                                        </MultiBinding>
                                                    </GroupBox.Visibility>-->
                                                    <StackPanel VerticalAlignment="Top" HorizontalAlignment="Left">
                                                        <TextBlock Text="Name"/>
                                                        <ComboBox ItemsSource="{Binding CurrentAttributeList}"
                                                                  SelectedValue="{Binding CurrentAttributeSelection}"
                                                                  MinWidth="100"/>

                                                        <TextBlock Text="Type" Margin="0,12,0,0"/>
                                                        <ComboBox ItemsSource="{Binding AvailableAttributeTypeList}" 
                                                                  SelectedValue="{Binding AttributeTypeSelection}"
                                                                  MinWidth="100"/>

                                                        <TextBlock Text="Category" Margin="0,12,0,0"/>
                                                        <ComboBox ItemsSource="{Binding AvailableAttributeCategoryList}" 
                                                                  SelectedValue="{Binding AttributeCategorySelection}"
                                                                  MinWidth="100"/>

                                                        <StackPanel Visibility="{Binding AttributeBasicSelected, Converter={StaticResource BoolToVis}}"
                                                                    Margin="0,12,0,0" VerticalAlignment="Top" HorizontalAlignment="Left">
                                                            <TextBlock Text="Rank"/>
                                                            <ComboBox ItemsSource="{Binding AttributeRankDictionary}"
                                                                      DisplayMemberPath="Key"
                                                                      SelectedValuePath="Value"
                                                                      SelectedValue="{Binding PurchaseAttributeSelection.Rank}"
                                                                      MinWidth="100"/>
                                                        </StackPanel>
                                                        <StackPanel Visibility="{Binding AttributeBoosterSelected, Converter={StaticResource BoolToVis}}"
                                                                    VerticalAlignment="Top" HorizontalAlignment="Left" Margin="0,12,0,0">
                                                            <TextBlock Text="Multiplier"/>
                                                            <TextBox Text="{Binding PurchaseAttributeSelection.Value, ValidatesOnNotifyDataErrors=True}" MinWidth="40"/>
                                                        </StackPanel>
                                                        <StackPanel Visibility="{Binding AttributeSpecialSelected, Converter={StaticResource BoolToVis}}" 
                                                                    VerticalAlignment="Top" HorizontalAlignment="Left" Margin="0,12,0,0">
                                                            <TextBlock Text="Value"/>
                                                            <TextBox Text="{Binding PurchaseAttributeSelection.Value, ValidatesOnNotifyDataErrors=True}" MinWidth="40"/>
                                                        </StackPanel>
                                                    </StackPanel>
                                                </GroupBox>
                                            </Grid>
                                        </GroupBox>
                                    </Grid>
                                </TabItem>
                                <TabItem Header="Mental">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*" MaxWidth="400"/>
                                            <ColumnDefinition Width="2*"/>
                                        </Grid.ColumnDefinitions>

                                        <DockPanel Margin="4,0,4,0">
                                            <ContentControl Template="{DynamicResource BudgetPanel}" DockPanel.Dock="Top"
                                                            Margin="0,4,0,4"/>

                                            <Grid DockPanel.Dock="Bottom" Margin="0,4,0,4">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto"/>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="Auto"/>
                                                </Grid.ColumnDefinitions>

                                                <Button Content="New Purchase" 
                                                        Command="{Binding NewEBMPerkCommand}"
                                                        Style="{DynamicResource DataGridButton}"/>

                                                <Button Content="Delete Purchase"
                                                        Command="{Binding DeleteEBMPerkCommand}"
                                                        Style="{DynamicResource DataGridButton}"
                                                        Grid.Column="2"/>
                                            </Grid>

                                            <ListView ItemsSource="{Binding EBMMentalPerkList}"
                                                      SelectedItem="{Binding EBMMentalPerkSelection}"
                                                      SelectedIndex="{Binding EBMMentalPerkIndex}"
                                                      Loaded="ListView_Loaded" SizeChanged="ListView_SizeChanged" 
                                                      ScrollViewer.ScrollChanged="ListView_ScrollChanged" Tag="0">
                                                <ListView.View>
                                                    <GridView>
                                                        <GridView.Columns>
                                                            <GridViewColumn Header="Name" Width="Auto"
                                                                            CellTemplate="{StaticResource ResourceKey=GridViewDefaultColumn}"
                                                                            DisplayMemberBinding="{Binding Name}"/>
                                                            <GridViewColumn Header="Cost" Width="50"
                                                                            CellTemplate="{StaticResource ResourceKey=GridViewDefaultColumn}"
                                                                            DisplayMemberBinding="{Binding DisplayCost}"/>
                                                        </GridView.Columns>
                                                    </GridView>
                                                </ListView.View>
                                            </ListView>
                                        </DockPanel>

                                        <GroupBox Header="Purchase Details" Grid.Column="1">
                                            <!--<GroupBox.Visibility>
                                                <MultiBinding Converter="{StaticResource ListContainsToVis}">
                                                    <Binding Path="EBMMentalPerkSelection"/>
                                                    <Binding Path="EBMMentalPerkList"/>
                                                </MultiBinding>
                                            </GroupBox.Visibility>-->
                                            <Grid Margin="8,0,0,0">
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="1.1*"/>
                                                    <RowDefinition Height="1.6*"/>
                                                    <RowDefinition Height="3*"/>
                                                </Grid.RowDefinitions>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*" MaxWidth="400"/>
                                                    <ColumnDefinition Width="*"/>
                                                </Grid.ColumnDefinitions>

                                                <StackPanel>
                                                    <TextBlock Text="Name"/>
                                                    <TextBox Text="{Binding EBMMentalPerkName, ValidatesOnNotifyDataErrors=True}"
                                                             Width="120"/>

                                                    <TextBlock Text="Cost" Margin="0,8,0,0"/>
                                                    <TextBox Text="{Binding EBMMentalPerkSelection.Cost, ValidatesOnNotifyDataErrors=True}"
                                                             Width="40"/>
                                                </StackPanel>

                                                <StackPanel Grid.Column="1">
                                                    <CheckBox Content="Discounted" IsChecked="{Binding EBMMentalPerkSelection.Discounted}"/>
                                                    <CheckBox Content="Free" IsChecked="{Binding EBMMentalPerkSelection.Freebie}"
                                                              Margin="0,8,0,0"/>
                                                </StackPanel>

                                                <DockPanel Grid.Row="1">
                                                    <TextBlock Text="Description" DockPanel.Dock="Top"/>
                                                    <TextBox Text="{Binding EBMMentalPerkDescription, ValidatesOnNotifyDataErrors=True}"
                                                             HorizontalAlignment="Stretch"
                                                             Style="{DynamicResource LargeTextBoxHintTemplate}"
                                                             Tag="Insert Perk description."/>
                                                </DockPanel>

                                                <DockPanel Grid.Row="2" Margin="0,8,0,0">
                                                    <TextBlock Text="Special Traits" DockPanel.Dock="Top"/>
                                                    <Grid DockPanel.Dock="Bottom" Margin="0,8,0,0">
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="Auto"/>
                                                            <ColumnDefinition Width="*"/>
                                                            <ColumnDefinition Width="Auto"/>
                                                        </Grid.ColumnDefinitions>

                                                        <Button Content="New Trait" 
                                                                Command="{Binding NewEBMTraitCommand}"
                                                                Style="{DynamicResource DataGridButton}"/>

                                                        <Button Content="Delete Trait"
                                                                Command="{Binding DeleteEBMTraitCommand}"
                                                                Style="{DynamicResource DataGridButton}"
                                                                Grid.Column="2"/>
                                                    </Grid>
                                                    <ListView ItemsSource="{Binding PurchaseAttributeList}"
                                                              SelectedItem="{Binding PurchaseAttributeSelection}"
                                                              SelectedIndex="{Binding PurchaseAttributeIndex}"
                                                              Loaded="ListView_Loaded" SizeChanged="ListView_SizeChanged" 
                                                              ScrollViewer.ScrollChanged="ListView_ScrollChanged" Tag="0">
                                                        <ListView.View>
                                                            <GridView>
                                                                <GridView.Columns>
                                                                    <GridViewColumn Header="Name" DisplayMemberBinding="{Binding Name}" Width="Auto"/>
                                                                    <GridViewColumn Header="Type" DisplayMemberBinding="{Binding Type}" Width="60"/>
                                                                    <GridViewColumn Header="Category" DisplayMemberBinding="{Binding Category}" Width="75"/>
                                                                </GridView.Columns>
                                                            </GridView>
                                                        </ListView.View>
                                                    </ListView>
                                                </DockPanel>

                                                <GroupBox Header="Trait Details" Grid.Row="2" Grid.Column="1" Margin="0,8,0,0">
                                                    <!--<GroupBox.Visibility>
                                                        <MultiBinding Converter="{StaticResource ListContainsToVis}">
                                                            <Binding Path="PurchaseAttributeSelection"/>
                                                            <Binding Path="PurchaseAttributeList"/>
                                                        </MultiBinding>
                                                    </GroupBox.Visibility>-->
                                                    <StackPanel VerticalAlignment="Top" HorizontalAlignment="Left">
                                                        <TextBlock Text="Name"/>
                                                        <ComboBox ItemsSource="{Binding CurrentAttributeList}"
                                                                  SelectedValue="{Binding CurrentAttributeSelection}"
                                                                  MinWidth="100"/>

                                                        <TextBlock Text="Type" Margin="0,12,0,0"/>
                                                        <ComboBox ItemsSource="{Binding AvailableAttributeTypeList}" 
                                                                  SelectedValue="{Binding AttributeTypeSelection}"
                                                                  MinWidth="100"/>

                                                        <TextBlock Text="Category" Margin="0,12,0,0"/>
                                                        <ComboBox ItemsSource="{Binding AvailableAttributeCategoryList}" 
                                                                  SelectedValue="{Binding AttributeCategorySelection}"
                                                                  MinWidth="100"/>

                                                        <StackPanel Visibility="{Binding AttributeBasicSelected, Converter={StaticResource BoolToVis}}"
                                                                    Margin="0,12,0,0" VerticalAlignment="Top" HorizontalAlignment="Left">
                                                            <TextBlock Text="Rank"/>
                                                            <ComboBox ItemsSource="{Binding AttributeRankDictionary}"
                                                                      DisplayMemberPath="Key"
                                                                      SelectedValuePath="Value"
                                                                      SelectedValue="{Binding PurchaseAttributeSelection.Rank}"
                                                                      MinWidth="100"/>
                                                        </StackPanel>
                                                        <StackPanel Visibility="{Binding AttributeBoosterSelected, Converter={StaticResource BoolToVis}}"
                                                                    VerticalAlignment="Top" HorizontalAlignment="Left" Margin="0,12,0,0">
                                                            <TextBlock Text="Multiplier"/>
                                                            <TextBox Text="{Binding PurchaseAttributeSelection.Value, ValidatesOnNotifyDataErrors=True}" MinWidth="40"/>
                                                        </StackPanel>
                                                        <StackPanel Visibility="{Binding AttributeSpecialSelected, Converter={StaticResource BoolToVis}}" 
                                                                    VerticalAlignment="Top" HorizontalAlignment="Left" Margin="0,12,0,0">
                                                            <TextBlock Text="Value"/>
                                                            <TextBox Text="{Binding PurchaseAttributeSelection.Value, ValidatesOnNotifyDataErrors=True}" MinWidth="40"/>
                                                        </StackPanel>
                                                    </StackPanel>
                                                </GroupBox>
                                            </Grid>
                                        </GroupBox>
                                    </Grid>
                                </TabItem>
                                <TabItem Header="Spiritual">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*" MaxWidth="400"/>
                                            <ColumnDefinition Width="2*"/>
                                        </Grid.ColumnDefinitions>

                                        <DockPanel Margin="4,0,4,0">
                                            <ContentControl Template="{DynamicResource BudgetPanel}" DockPanel.Dock="Top"
                                                            Margin="0,4,0,4"/>

                                            <Grid DockPanel.Dock="Bottom" Margin="0,4,0,4">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto"/>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="Auto"/>
                                                </Grid.ColumnDefinitions>

                                                <Button Content="New Purchase" 
                                                        Command="{Binding NewEBMPerkCommand}"
                                                        Style="{DynamicResource DataGridButton}"/>

                                                <Button Content="Delete Purchase"
                                                        Command="{Binding DeleteEBMPerkCommand}"
                                                        Style="{DynamicResource DataGridButton}"
                                                        Grid.Column="2"/>
                                            </Grid>

                                            <ListView ItemsSource="{Binding EBMSpiritualPerkList}"
                                                      SelectedItem="{Binding EBMSpiritualPerkSelection}"
                                                      SelectedIndex="{Binding EBMSpiritualPerkIndex}"
                                                      Loaded="ListView_Loaded" SizeChanged="ListView_SizeChanged" 
                                                      ScrollViewer.ScrollChanged="ListView_ScrollChanged" Tag="0">
                                                <ListView.View>
                                                    <GridView>
                                                        <GridView.Columns>
                                                            <GridViewColumn Header="Name" Width="Auto"
                                                                            CellTemplate="{StaticResource ResourceKey=GridViewDefaultColumn}"
                                                                            DisplayMemberBinding="{Binding Name}"/>
                                                            <GridViewColumn Header="Cost" Width="50"
                                                                            CellTemplate="{StaticResource ResourceKey=GridViewDefaultColumn}"
                                                                            DisplayMemberBinding="{Binding DisplayCost}"/>
                                                        </GridView.Columns>
                                                    </GridView>
                                                </ListView.View>
                                            </ListView>
                                        </DockPanel>

                                        <GroupBox Header="Purchase Details" Grid.Column="1">
                                            <!--<GroupBox.Visibility>
                                                <MultiBinding Converter="{StaticResource ListContainsToVis}">
                                                    <Binding Path="EBMSpiritualPerkSelection"/>
                                                    <Binding Path="EBMSpiritualPerkList"/>
                                                </MultiBinding>
                                            </GroupBox.Visibility>-->
                                            <Grid Margin="8,0,0,0">
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="1.1*"/>
                                                    <RowDefinition Height="1.6*"/>
                                                    <RowDefinition Height="3*"/>
                                                </Grid.RowDefinitions>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*" MaxWidth="400"/>
                                                    <ColumnDefinition Width="*"/>
                                                </Grid.ColumnDefinitions>

                                                <StackPanel>
                                                    <TextBlock Text="Name"/>
                                                    <TextBox Text="{Binding EBMSpiritualPerkName, ValidatesOnNotifyDataErrors=True}"
                                                             Width="120"/>

                                                    <TextBlock Text="Cost" Margin="0,8,0,0"/>
                                                    <TextBox Text="{Binding EBMSpiritualPerkSelection.Cost, ValidatesOnNotifyDataErrors=True}"
                                                             Width="40"/>
                                                </StackPanel>

                                                <StackPanel Grid.Column="1">
                                                    <CheckBox Content="Discounted" IsChecked="{Binding EBMSpiritualPerkSelection.Discounted}"/>
                                                    <CheckBox Content="Free" IsChecked="{Binding EBMSpiritualPerkSelection.Freebie}"
                                                              Margin="0,8,0,0"/>
                                                </StackPanel>

                                                <DockPanel Grid.Row="1">
                                                    <TextBlock Text="Description" DockPanel.Dock="Top"/>
                                                    <TextBox Text="{Binding EBMSpiritualPerkDescription, ValidatesOnNotifyDataErrors=True}"
                                                             HorizontalAlignment="Stretch"
                                                             Style="{DynamicResource LargeTextBoxHintTemplate}"
                                                             Tag="Insert Perk description."/>
                                                </DockPanel>

                                                <DockPanel Grid.Row="2" Margin="0,8,0,0">
                                                    <TextBlock Text="Special Traits" DockPanel.Dock="Top"/>
                                                    <Grid DockPanel.Dock="Bottom" Margin="0,8,0,0">
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="Auto"/>
                                                            <ColumnDefinition Width="*"/>
                                                            <ColumnDefinition Width="Auto"/>
                                                        </Grid.ColumnDefinitions>

                                                        <Button Content="New Trait" 
                                                                Command="{Binding NewEBMTraitCommand}"
                                                                Style="{DynamicResource DataGridButton}"/>

                                                        <Button Content="Delete Trait"
                                                                Command="{Binding DeleteEBMTraitCommand}"
                                                                Style="{DynamicResource DataGridButton}"
                                                                Grid.Column="2"/>
                                                    </Grid>
                                                    <ListView ItemsSource="{Binding PurchaseAttributeList}"
                                                              SelectedItem="{Binding PurchaseAttributeSelection}"
                                                              SelectedIndex="{Binding PurchaseAttributeIndex}"
                                                              Loaded="ListView_Loaded" SizeChanged="ListView_SizeChanged" 
                                                              ScrollViewer.ScrollChanged="ListView_ScrollChanged" Tag="0">
                                                        <ListView.View>
                                                            <GridView>
                                                                <GridView.Columns>
                                                                    <GridViewColumn Header="Name" DisplayMemberBinding="{Binding Name}" Width="Auto"/>
                                                                    <GridViewColumn Header="Type" DisplayMemberBinding="{Binding Type}" Width="60"/>
                                                                    <GridViewColumn Header="Category" DisplayMemberBinding="{Binding Category}" Width="75"/>
                                                                </GridView.Columns>
                                                            </GridView>
                                                        </ListView.View>
                                                    </ListView>
                                                </DockPanel>

                                                <GroupBox Header="Trait Details" Grid.Row="2" Grid.Column="1" Margin="0,8,0,0">
                                                    <!--<GroupBox.Visibility>
                                                        <MultiBinding Converter="{StaticResource ListContainsToVis}">
                                                            <Binding Path="PurchaseAttributeSelection"/>
                                                            <Binding Path="PurchaseAttributeList"/>
                                                        </MultiBinding>
                                                    </GroupBox.Visibility>-->
                                                    <StackPanel VerticalAlignment="Top" HorizontalAlignment="Left">
                                                        <TextBlock Text="Name"/>
                                                        <ComboBox ItemsSource="{Binding CurrentAttributeList}"
                                                                  SelectedValue="{Binding CurrentAttributeSelection}"
                                                                  MinWidth="100"/>

                                                        <TextBlock Text="Type" Margin="0,12,0,0"/>
                                                        <ComboBox ItemsSource="{Binding AvailableAttributeTypeList}" 
                                                                  SelectedValue="{Binding AttributeTypeSelection}"
                                                                  MinWidth="100"/>

                                                        <TextBlock Text="Category" Margin="0,12,0,0"/>
                                                        <ComboBox ItemsSource="{Binding AvailableAttributeCategoryList}" 
                                                                  SelectedValue="{Binding AttributeCategorySelection}"
                                                                  MinWidth="100"/>

                                                        <StackPanel Visibility="{Binding AttributeBasicSelected, Converter={StaticResource BoolToVis}}"
                                                                    Margin="0,12,0,0" VerticalAlignment="Top" HorizontalAlignment="Left">
                                                            <TextBlock Text="Rank"/>
                                                            <ComboBox ItemsSource="{Binding AttributeRankDictionary}"
                                                                      DisplayMemberPath="Key"
                                                                      SelectedValuePath="Value"
                                                                      SelectedValue="{Binding PurchaseAttributeSelection.Rank}"
                                                                      MinWidth="100"/>
                                                        </StackPanel>
                                                        <StackPanel Visibility="{Binding AttributeBoosterSelected, Converter={StaticResource BoolToVis}}"
                                                                    VerticalAlignment="Top" HorizontalAlignment="Left" Margin="0,12,0,0">
                                                            <TextBlock Text="Multiplier"/>
                                                            <TextBox Text="{Binding PurchaseAttributeSelection.Value, ValidatesOnNotifyDataErrors=True}" MinWidth="40"/>
                                                        </StackPanel>
                                                        <StackPanel Visibility="{Binding AttributeSpecialSelected, Converter={StaticResource BoolToVis}}" 
                                                                    VerticalAlignment="Top" HorizontalAlignment="Left" Margin="0,12,0,0">
                                                            <TextBlock Text="Value"/>
                                                            <TextBox Text="{Binding PurchaseAttributeSelection.Value, ValidatesOnNotifyDataErrors=True}" MinWidth="40"/>
                                                        </StackPanel>
                                                    </StackPanel>
                                                </GroupBox>
                                            </Grid>
                                        </GroupBox>
                                    </Grid>
                                </TabItem>
                                <TabItem Header="Skill Perks">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*" MaxWidth="400"/>
                                            <ColumnDefinition Width="2*"/>
                                        </Grid.ColumnDefinitions>

                                        <DockPanel Margin="4,0,4,0">
                                            <ContentControl Template="{DynamicResource BudgetPanel}" DockPanel.Dock="Top"
                                                            Margin="0,4,0,4"/>

                                            <Grid DockPanel.Dock="Bottom" Margin="0,4,0,4">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto"/>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="Auto"/>
                                                </Grid.ColumnDefinitions>

                                                <Button Content="New Purchase" 
                                                        Command="{Binding NewEBMPerkCommand}"
                                                        Style="{DynamicResource DataGridButton}"/>

                                                <Button Content="Delete Purchase"
                                                        Command="{Binding DeleteEBMPerkCommand}"
                                                        Style="{DynamicResource DataGridButton}"
                                                        Grid.Column="2"/>
                                            </Grid>

                                            <ListView ItemsSource="{Binding EBMSkillPerkList}"
                                                      SelectedItem="{Binding EBMSkillPerkSelection}"
                                                      SelectedIndex="{Binding EBMSkillPerkIndex}"
                                                      Loaded="ListView_Loaded" SizeChanged="ListView_SizeChanged" 
                                                      ScrollViewer.ScrollChanged="ListView_ScrollChanged" Tag="0">
                                                <ListView.View>
                                                    <GridView>
                                                        <GridView.Columns>
                                                            <GridViewColumn Header="Name" Width="Auto"
                                                                            CellTemplate="{StaticResource ResourceKey=GridViewDefaultColumn}"
                                                                            DisplayMemberBinding="{Binding Name}"/>
                                                            <GridViewColumn Header="Cost" Width="50"
                                                                            CellTemplate="{StaticResource ResourceKey=GridViewDefaultColumn}"
                                                                            DisplayMemberBinding="{Binding DisplayCost}"/>
                                                        </GridView.Columns>
                                                    </GridView>
                                                </ListView.View>
                                            </ListView>
                                        </DockPanel>

                                        <GroupBox Header="Purchase Details" Grid.Column="1">
                                            <!--<GroupBox.Visibility>
                                                <MultiBinding Converter="{StaticResource ListContainsToVis}">
                                                    <Binding Path="EBMSkillPerkSelection"/>
                                                    <Binding Path="EBMSkillPerkList"/>
                                                </MultiBinding>
                                            </GroupBox.Visibility>-->
                                            <Grid Margin="8,0,0,0">
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="1.1*"/>
                                                    <RowDefinition Height="1.6*"/>
                                                    <RowDefinition Height="3*"/>
                                                </Grid.RowDefinitions>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*" MaxWidth="400"/>
                                                    <ColumnDefinition Width="*"/>
                                                </Grid.ColumnDefinitions>

                                                <StackPanel>
                                                    <TextBlock Text="Name"/>
                                                    <TextBox Text="{Binding EBMSkillPerkName, ValidatesOnNotifyDataErrors=True}"
                                                             Width="120"/>

                                                    <TextBlock Text="Cost" Margin="0,8,0,0"/>
                                                    <TextBox Text="{Binding EBMSkillPerkSelection.Cost, ValidatesOnNotifyDataErrors=True}"
                                                             Width="40"/>
                                                </StackPanel>

                                                <StackPanel Grid.Column="1">
                                                    <CheckBox Content="Discounted" IsChecked="{Binding EBMSkillPerkSelection.Discounted}"/>
                                                    <CheckBox Content="Free" IsChecked="{Binding EBMSkillPerkSelection.Freebie}"
                                                              Margin="0,8,0,0"/>
                                                </StackPanel>

                                                <DockPanel Grid.Row="1">
                                                    <TextBlock Text="Description" DockPanel.Dock="Top"/>
                                                    <TextBox Text="{Binding EBMSkillPerkDescription, ValidatesOnNotifyDataErrors=True}"
                                                             HorizontalAlignment="Stretch"
                                                             Style="{DynamicResource LargeTextBoxHintTemplate}"
                                                             Tag="Insert Perk description."/>
                                                </DockPanel>

                                                <DockPanel Grid.Row="2" Margin="0,8,0,0">
                                                    <TextBlock Text="Special Traits" DockPanel.Dock="Top"/>
                                                    <Grid DockPanel.Dock="Bottom" Margin="0,8,0,0">
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="Auto"/>
                                                            <ColumnDefinition Width="*"/>
                                                            <ColumnDefinition Width="Auto"/>
                                                        </Grid.ColumnDefinitions>

                                                        <Button Content="New Trait" 
                                                                Command="{Binding NewEBMTraitCommand}"
                                                                Style="{DynamicResource DataGridButton}"/>

                                                        <Button Content="Delete Trait"
                                                                Command="{Binding DeleteEBMTraitCommand}"
                                                                Style="{DynamicResource DataGridButton}"
                                                                Grid.Column="2"/>
                                                    </Grid>
                                                    <ListView ItemsSource="{Binding PurchaseAttributeList}"
                                                              SelectedItem="{Binding PurchaseAttributeSelection}"
                                                              SelectedIndex="{Binding PurchaseAttributeIndex}"
                                                              Loaded="ListView_Loaded" SizeChanged="ListView_SizeChanged" 
                                                              ScrollViewer.ScrollChanged="ListView_ScrollChanged" Tag="0">
                                                        <ListView.View>
                                                            <GridView>
                                                                <GridView.Columns>
                                                                    <GridViewColumn Header="Name" DisplayMemberBinding="{Binding Name}" Width="Auto"/>
                                                                    <GridViewColumn Header="Type" DisplayMemberBinding="{Binding Type}" Width="60"/>
                                                                    <GridViewColumn Header="Category" DisplayMemberBinding="{Binding Category}" Width="75"/>
                                                                </GridView.Columns>
                                                            </GridView>
                                                        </ListView.View>
                                                    </ListView>
                                                </DockPanel>

                                                <GroupBox Header="Trait Details" Grid.Row="2" Grid.Column="1" Margin="0,8,0,0">
                                                    <!--<GroupBox.Visibility>
                                                        <MultiBinding Converter="{StaticResource ListContainsToVis}">
                                                            <Binding Path="PurchaseAttributeSelection"/>
                                                            <Binding Path="PurchaseAttributeList"/>
                                                        </MultiBinding>
                                                    </GroupBox.Visibility>-->
                                                    <StackPanel VerticalAlignment="Top" HorizontalAlignment="Left">
                                                        <TextBlock Text="Name"/>
                                                        <ComboBox ItemsSource="{Binding CurrentAttributeList}"
                                                                  SelectedValue="{Binding CurrentAttributeSelection}"
                                                                  MinWidth="100"/>

                                                        <TextBlock Text="Type" Margin="0,12,0,0"/>
                                                        <ComboBox ItemsSource="{Binding AvailableAttributeTypeList}" 
                                                                  SelectedValue="{Binding AttributeTypeSelection}"
                                                                  MinWidth="100"/>

                                                        <TextBlock Text="Category" Margin="0,12,0,0"/>
                                                        <ComboBox ItemsSource="{Binding AvailableAttributeCategoryList}" 
                                                                  SelectedValue="{Binding AttributeCategorySelection}"
                                                                  MinWidth="100"/>

                                                        <StackPanel Visibility="{Binding AttributeBasicSelected, Converter={StaticResource BoolToVis}}"
                                                                    Margin="0,12,0,0" VerticalAlignment="Top" HorizontalAlignment="Left">
                                                            <TextBlock Text="Rank"/>
                                                            <ComboBox ItemsSource="{Binding AttributeRankDictionary}"
                                                                      DisplayMemberPath="Key"
                                                                      SelectedValuePath="Value"
                                                                      SelectedValue="{Binding PurchaseAttributeSelection.Rank}"
                                                                      MinWidth="100"/>
                                                        </StackPanel>
                                                        <StackPanel Visibility="{Binding AttributeBoosterSelected, Converter={StaticResource BoolToVis}}"
                                                                    VerticalAlignment="Top" HorizontalAlignment="Left" Margin="0,12,0,0">
                                                            <TextBlock Text="Multiplier"/>
                                                            <TextBox Text="{Binding PurchaseAttributeSelection.Value, ValidatesOnNotifyDataErrors=True}" MinWidth="40"/>
                                                        </StackPanel>
                                                        <StackPanel Visibility="{Binding AttributeSpecialSelected, Converter={StaticResource BoolToVis}}" 
                                                                    VerticalAlignment="Top" HorizontalAlignment="Left" Margin="0,12,0,0">
                                                            <TextBlock Text="Value"/>
                                                            <TextBox Text="{Binding PurchaseAttributeSelection.Value, ValidatesOnNotifyDataErrors=True}" MinWidth="40"/>
                                                        </StackPanel>
                                                    </StackPanel>
                                                </GroupBox>
                                            </Grid>
                                        </GroupBox>
                                    </Grid>
                                </TabItem>
                                <TabItem Header="Supernatural Abilities">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*" MaxWidth="400"/>
                                            <ColumnDefinition Width="2*"/>
                                        </Grid.ColumnDefinitions>

                                        <DockPanel Margin="4,0,4,0">
                                            <ContentControl Template="{DynamicResource BudgetPanel}" DockPanel.Dock="Top"
                                                            Margin="0,4,0,4"/>

                                            <Grid DockPanel.Dock="Bottom" Margin="0,4,0,4">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto"/>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="Auto"/>
                                                </Grid.ColumnDefinitions>

                                                <Button Content="New Purchase" 
                                                        Command="{Binding NewEBMPerkCommand}"
                                                        Style="{DynamicResource DataGridButton}"/>

                                                <Button Content="Delete Purchase"
                                                        Command="{Binding DeleteEBMPerkCommand}"
                                                        Style="{DynamicResource DataGridButton}"
                                                        Grid.Column="2"/>
                                            </Grid>

                                            <ListView ItemsSource="{Binding EBMSupernaturalPerkList}"
                                                      SelectedItem="{Binding EBMSupernaturalPerkSelection}"
                                                      SelectedIndex="{Binding EBMSupernaturalPerkIndex}"
                                                      Loaded="ListView_Loaded" SizeChanged="ListView_SizeChanged" 
                                                      ScrollViewer.ScrollChanged="ListView_ScrollChanged" Tag="0">
                                                <ListView.View>
                                                    <GridView>
                                                        <GridView.Columns>
                                                            <GridViewColumn Header="Name" Width="Auto"
                                                                            CellTemplate="{StaticResource ResourceKey=GridViewDefaultColumn}"
                                                                            DisplayMemberBinding="{Binding Name}"/>
                                                            <GridViewColumn Header="Cost" Width="50"
                                                                            CellTemplate="{StaticResource ResourceKey=GridViewDefaultColumn}"
                                                                            DisplayMemberBinding="{Binding DisplayCost}"/>
                                                        </GridView.Columns>
                                                    </GridView>
                                                </ListView.View>
                                            </ListView>
                                        </DockPanel>

                                        <GroupBox Header="Purchase Details" Grid.Column="1">
                                            <!--<GroupBox.Visibility>
                                                <MultiBinding Converter="{StaticResource ListContainsToVis}">
                                                    <Binding Path="EBMSupernaturalPerkSelection"/>
                                                    <Binding Path="EBMSupernaturalPerkList"/>
                                                </MultiBinding>
                                            </GroupBox.Visibility>-->
                                            <Grid Margin="8,0,0,0">
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="1.1*"/>
                                                    <RowDefinition Height="1.6*"/>
                                                    <RowDefinition Height="3*"/>
                                                </Grid.RowDefinitions>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*" MaxWidth="400"/>
                                                    <ColumnDefinition Width="*"/>
                                                </Grid.ColumnDefinitions>

                                                <StackPanel>
                                                    <TextBlock Text="Name"/>
                                                    <TextBox Text="{Binding EBMSupernaturalPerkName, ValidatesOnNotifyDataErrors=True}"
                                                             Width="120"/>

                                                    <TextBlock Text="Cost" Margin="0,8,0,0"/>
                                                    <TextBox Text="{Binding EBMSupernaturalPerkSelection.Cost, ValidatesOnNotifyDataErrors=True}"
                                                             Width="40"/>
                                                </StackPanel>

                                                <StackPanel Grid.Column="1">
                                                    <CheckBox Content="Discounted" IsChecked="{Binding EBMSupernaturalPerkSelection.Discounted}"/>
                                                    <CheckBox Content="Free" IsChecked="{Binding EBMSupernaturalPerkSelection.Freebie}"
                                                              Margin="0,8,0,0"/>
                                                </StackPanel>

                                                <DockPanel Grid.Row="1">
                                                    <TextBlock Text="Description" DockPanel.Dock="Top"/>
                                                    <TextBox Text="{Binding EBMSupernaturalPerkDescription, ValidatesOnNotifyDataErrors=True}"
                                                             HorizontalAlignment="Stretch"
                                                             Style="{DynamicResource LargeTextBoxHintTemplate}"
                                                             Tag="Insert Perk description."/>
                                                </DockPanel>

                                                <DockPanel Grid.Row="2" Margin="0,8,0,0">
                                                    <TextBlock Text="Special Traits" DockPanel.Dock="Top"/>
                                                    <Grid DockPanel.Dock="Bottom" Margin="0,8,0,0">
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="Auto"/>
                                                            <ColumnDefinition Width="*"/>
                                                            <ColumnDefinition Width="Auto"/>
                                                        </Grid.ColumnDefinitions>

                                                        <Button Content="New Trait" 
                                                                Command="{Binding NewEBMTraitCommand}"
                                                                Style="{DynamicResource DataGridButton}"/>

                                                        <Button Content="Delete Trait"
                                                                Command="{Binding DeleteEBMTraitCommand}"
                                                                Style="{DynamicResource DataGridButton}"
                                                                Grid.Column="2"/>
                                                    </Grid>
                                                    <ListView ItemsSource="{Binding PurchaseAttributeList}"
                                                              SelectedItem="{Binding PurchaseAttributeSelection}"
                                                              SelectedIndex="{Binding PurchaseAttributeIndex}"
                                                              Loaded="ListView_Loaded" SizeChanged="ListView_SizeChanged" 
                                                              ScrollViewer.ScrollChanged="ListView_ScrollChanged" Tag="0">
                                                        <ListView.View>
                                                            <GridView>
                                                                <GridView.Columns>
                                                                    <GridViewColumn Header="Name" DisplayMemberBinding="{Binding Name}" Width="Auto"/>
                                                                    <GridViewColumn Header="Type" DisplayMemberBinding="{Binding Type}" Width="60"/>
                                                                    <GridViewColumn Header="Category" DisplayMemberBinding="{Binding Category}" Width="75"/>
                                                                </GridView.Columns>
                                                            </GridView>
                                                        </ListView.View>
                                                    </ListView>
                                                </DockPanel>

                                                <GroupBox Header="Trait Details" Grid.Row="2" Grid.Column="1" Margin="0,8,0,0">
                                                    <!--<GroupBox.Visibility>
                                                        <MultiBinding Converter="{StaticResource ListContainsToVis}">
                                                            <Binding Path="PurchaseAttributeSelection"/>
                                                            <Binding Path="PurchaseAttributeList"/>
                                                        </MultiBinding>
                                                    </GroupBox.Visibility>-->
                                                    <StackPanel VerticalAlignment="Top" HorizontalAlignment="Left">
                                                        <TextBlock Text="Name"/>
                                                        <ComboBox ItemsSource="{Binding CurrentAttributeList}"
                                                                  SelectedValue="{Binding CurrentAttributeSelection}"
                                                                  MinWidth="100"/>

                                                        <TextBlock Text="Type" Margin="0,12,0,0"/>
                                                        <ComboBox ItemsSource="{Binding AvailableAttributeTypeList}" 
                                                                  SelectedValue="{Binding AttributeTypeSelection}"
                                                                  MinWidth="100"/>

                                                        <TextBlock Text="Category" Margin="0,12,0,0"/>
                                                        <ComboBox ItemsSource="{Binding AvailableAttributeCategoryList}" 
                                                                  SelectedValue="{Binding AttributeCategorySelection}"
                                                                  MinWidth="100"/>

                                                        <StackPanel Visibility="{Binding AttributeBasicSelected, Converter={StaticResource BoolToVis}}"
                                                                    Margin="0,12,0,0" VerticalAlignment="Top" HorizontalAlignment="Left">
                                                            <TextBlock Text="Rank"/>
                                                            <ComboBox ItemsSource="{Binding AttributeRankDictionary}"
                                                                      DisplayMemberPath="Key"
                                                                      SelectedValuePath="Value"
                                                                      SelectedValue="{Binding PurchaseAttributeSelection.Rank}"
                                                                      MinWidth="100"/>
                                                        </StackPanel>
                                                        <StackPanel Visibility="{Binding AttributeBoosterSelected, Converter={StaticResource BoolToVis}}"
                                                                    VerticalAlignment="Top" HorizontalAlignment="Left" Margin="0,12,0,0">
                                                            <TextBlock Text="Multiplier"/>
                                                            <TextBox Text="{Binding PurchaseAttributeSelection.Value, ValidatesOnNotifyDataErrors=True}" MinWidth="40"/>
                                                        </StackPanel>
                                                        <StackPanel Visibility="{Binding AttributeSpecialSelected, Converter={StaticResource BoolToVis}}" 
                                                                    VerticalAlignment="Top" HorizontalAlignment="Left" Margin="0,12,0,0">
                                                            <TextBlock Text="Value"/>
                                                            <TextBox Text="{Binding PurchaseAttributeSelection.Value, ValidatesOnNotifyDataErrors=True}" MinWidth="40"/>
                                                        </StackPanel>
                                                    </StackPanel>
                                                </GroupBox>
                                            </Grid>
                                        </GroupBox>
                                    </Grid>
                                </TabItem>
                                <TabItem Header="Item Perks">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*" MaxWidth="400"/>
                                            <ColumnDefinition Width="2*"/>
                                        </Grid.ColumnDefinitions>

                                        <DockPanel Margin="4,0,4,0">
                                            <ContentControl Template="{DynamicResource BudgetPanel}" DockPanel.Dock="Top"
                                                            Margin="0,4,0,4"/>

                                            <Grid DockPanel.Dock="Bottom" Margin="0,4,0,4">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto"/>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="Auto"/>
                                                </Grid.ColumnDefinitions>

                                                <Button Content="New Purchase" 
                                                        Command="{Binding NewEBMPerkCommand}"
                                                        Style="{DynamicResource DataGridButton}"/>

                                                <Button Content="Delete Purchase"
                                                        Command="{Binding DeleteEBMPerkCommand}"
                                                        Style="{DynamicResource DataGridButton}"
                                                        Grid.Column="2"/>
                                            </Grid>

                                            <ListView ItemsSource="{Binding EBMItemPerkList}"
                                                      SelectedItem="{Binding EBMItemPerkSelection}"
                                                      SelectedIndex="{Binding EBMItemPerkIndex}"
                                                      Loaded="ListView_Loaded" SizeChanged="ListView_SizeChanged" 
                                                      ScrollViewer.ScrollChanged="ListView_ScrollChanged" Tag="0">
                                                <ListView.View>
                                                    <GridView>
                                                        <GridView.Columns>
                                                            <GridViewColumn Header="Name" Width="Auto"
                                                                            CellTemplate="{StaticResource ResourceKey=GridViewDefaultColumn}"
                                                                            DisplayMemberBinding="{Binding Name}"/>
                                                            <GridViewColumn Header="Cost" Width="50"
                                                                            CellTemplate="{StaticResource ResourceKey=GridViewDefaultColumn}"
                                                                            DisplayMemberBinding="{Binding DisplayCost}"/>
                                                        </GridView.Columns>
                                                    </GridView>
                                                </ListView.View>
                                            </ListView>
                                        </DockPanel>

                                        <GroupBox Header="Purchase Details" Grid.Column="1">
                                            <!--<GroupBox.Visibility>
                                                <MultiBinding Converter="{StaticResource ListContainsToVis}">
                                                    <Binding Path="EBMItemPerkSelection"/>
                                                    <Binding Path="EBMItemPerkList"/>
                                                </MultiBinding>
                                            </GroupBox.Visibility>-->
                                            <Grid Margin="8,0,0,0">
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="1.1*"/>
                                                    <RowDefinition Height="1.6*"/>
                                                    <RowDefinition Height="3*"/>
                                                </Grid.RowDefinitions>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*" MaxWidth="400"/>
                                                    <ColumnDefinition Width="*"/>
                                                </Grid.ColumnDefinitions>

                                                <StackPanel>
                                                    <TextBlock Text="Name"/>
                                                    <TextBox Text="{Binding EBMItemPerkName, ValidatesOnNotifyDataErrors=True}"
                                                             Width="120"/>

                                                    <TextBlock Text="Cost" Margin="0,8,0,0"/>
                                                    <TextBox Text="{Binding EBMItemPerkSelection.Cost, ValidatesOnNotifyDataErrors=True}"
                                                             Width="40"/>
                                                </StackPanel>

                                                <StackPanel Grid.Column="1">
                                                    <CheckBox Content="Discounted" IsChecked="{Binding EBMItemPerkSelection.Discounted}"/>
                                                    <CheckBox Content="Free" IsChecked="{Binding EBMItemPerkSelection.Freebie}"
                                                              Margin="0,8,0,0"/>
                                                </StackPanel>

                                                <DockPanel Grid.Row="1">
                                                    <TextBlock Text="Description" DockPanel.Dock="Top"/>
                                                    <TextBox Text="{Binding EBMItemPerkDescription, ValidatesOnNotifyDataErrors=True}"
                                                             HorizontalAlignment="Stretch"
                                                             Style="{DynamicResource LargeTextBoxHintTemplate}"
                                                             Tag="Insert Perk description."/>
                                                </DockPanel>

                                                <DockPanel Grid.Row="2" Margin="0,8,0,0">
                                                    <TextBlock Text="Special Traits" DockPanel.Dock="Top"/>
                                                    <Grid DockPanel.Dock="Bottom" Margin="0,8,0,0">
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="Auto"/>
                                                            <ColumnDefinition Width="*"/>
                                                            <ColumnDefinition Width="Auto"/>
                                                        </Grid.ColumnDefinitions>

                                                        <Button Content="New Trait" 
                                                                Command="{Binding NewEBMTraitCommand}"
                                                                Style="{DynamicResource DataGridButton}"/>

                                                        <Button Content="Delete Trait"
                                                                Command="{Binding DeleteEBMTraitCommand}"
                                                                Style="{DynamicResource DataGridButton}"
                                                                Grid.Column="2"/>
                                                    </Grid>
                                                    <ListView ItemsSource="{Binding PurchaseAttributeList}"
                                                              SelectedItem="{Binding PurchaseAttributeSelection}"
                                                              SelectedIndex="{Binding PurchaseAttributeIndex}"
                                                              Loaded="ListView_Loaded" SizeChanged="ListView_SizeChanged" 
                                                              ScrollViewer.ScrollChanged="ListView_ScrollChanged" Tag="0">
                                                        <ListView.View>
                                                            <GridView>
                                                                <GridView.Columns>
                                                                    <GridViewColumn Header="Name" DisplayMemberBinding="{Binding Name}" Width="Auto"/>
                                                                    <GridViewColumn Header="Type" DisplayMemberBinding="{Binding Type}" Width="60"/>
                                                                    <GridViewColumn Header="Category" DisplayMemberBinding="{Binding Category}" Width="75"/>
                                                                </GridView.Columns>
                                                            </GridView>
                                                        </ListView.View>
                                                    </ListView>
                                                </DockPanel>

                                                <GroupBox Header="Trait Details" Grid.Row="2" Grid.Column="1" Margin="0,8,0,0">
                                                    <!--<GroupBox.Visibility>
                                                        <MultiBinding Converter="{StaticResource ListContainsToVis}">
                                                            <Binding Path="PurchaseAttributeSelection"/>
                                                            <Binding Path="PurchaseAttributeList"/>
                                                        </MultiBinding>
                                                    </GroupBox.Visibility>-->
                                                    <StackPanel VerticalAlignment="Top" HorizontalAlignment="Left">
                                                        <TextBlock Text="Name"/>
                                                        <ComboBox ItemsSource="{Binding CurrentAttributeList}"
                                                                  SelectedValue="{Binding CurrentAttributeSelection}"
                                                                  MinWidth="100"/>

                                                        <TextBlock Text="Type" Margin="0,12,0,0"/>
                                                        <ComboBox ItemsSource="{Binding AvailableAttributeTypeList}" 
                                                                  SelectedValue="{Binding AttributeTypeSelection}"
                                                                  MinWidth="100"/>

                                                        <TextBlock Text="Category" Margin="0,12,0,0"/>
                                                        <ComboBox ItemsSource="{Binding AvailableAttributeCategoryList}" 
                                                                  SelectedValue="{Binding AttributeCategorySelection}"
                                                                  MinWidth="100"/>

                                                        <StackPanel Visibility="{Binding AttributeBasicSelected, Converter={StaticResource BoolToVis}}"
                                                                    Margin="0,12,0,0" VerticalAlignment="Top" HorizontalAlignment="Left">
                                                            <TextBlock Text="Rank"/>
                                                            <ComboBox ItemsSource="{Binding AttributeRankDictionary}"
                                                                      DisplayMemberPath="Key"
                                                                      SelectedValuePath="Value"
                                                                      SelectedValue="{Binding PurchaseAttributeSelection.Rank}"
                                                                      MinWidth="100"/>
                                                        </StackPanel>
                                                        <StackPanel Visibility="{Binding AttributeBoosterSelected, Converter={StaticResource BoolToVis}}"
                                                                    VerticalAlignment="Top" HorizontalAlignment="Left" Margin="0,12,0,0">
                                                            <TextBlock Text="Multiplier"/>
                                                            <TextBox Text="{Binding PurchaseAttributeSelection.Value, ValidatesOnNotifyDataErrors=True}" MinWidth="40"/>
                                                        </StackPanel>
                                                        <StackPanel Visibility="{Binding AttributeSpecialSelected, Converter={StaticResource BoolToVis}}" 
                                                                    VerticalAlignment="Top" HorizontalAlignment="Left" Margin="0,12,0,0">
                                                            <TextBlock Text="Value"/>
                                                            <TextBox Text="{Binding PurchaseAttributeSelection.Value, ValidatesOnNotifyDataErrors=True}" MinWidth="40"/>
                                                        </StackPanel>
                                                    </StackPanel>
                                                </GroupBox>
                                            </Grid>
                                        </GroupBox>
                                    </Grid>
                                </TabItem>
                                <TabItem Header="Companion Perks">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*" MaxWidth="400"/>
                                            <ColumnDefinition Width="2*"/>
                                        </Grid.ColumnDefinitions>

                                        <DockPanel Margin="4,0,4,0">
                                            <ContentControl Template="{DynamicResource BudgetPanel}" DockPanel.Dock="Top"
                                                            Margin="0,4,0,4"/>

                                            <Grid DockPanel.Dock="Bottom" Margin="0,4,0,4">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto"/>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="Auto"/>
                                                </Grid.ColumnDefinitions>

                                                <Button Content="New Purchase" 
                                                        Command="{Binding NewEBMPerkCommand}"
                                                        Style="{DynamicResource DataGridButton}"/>

                                                <Button Content="Delete Purchase"
                                                        Command="{Binding DeleteEBMPerkCommand}"
                                                        Style="{DynamicResource DataGridButton}"
                                                        Grid.Column="2"/>
                                            </Grid>

                                            <ListView ItemsSource="{Binding EBMCompanionPerkList}"
                                                      SelectedItem="{Binding EBMCompanionPerkSelection}"
                                                      SelectedIndex="{Binding EBMCompanionPerkIndex}"
                                                      Loaded="ListView_Loaded" SizeChanged="ListView_SizeChanged" 
                                                      ScrollViewer.ScrollChanged="ListView_ScrollChanged" Tag="0">
                                                <ListView.View>
                                                    <GridView>
                                                        <GridView.Columns>
                                                            <GridViewColumn Header="Name" Width="Auto"
                                                                            CellTemplate="{StaticResource ResourceKey=GridViewDefaultColumn}"
                                                                            DisplayMemberBinding="{Binding Name}"/>
                                                            <GridViewColumn Header="Cost" Width="50"
                                                                            CellTemplate="{StaticResource ResourceKey=GridViewDefaultColumn}"
                                                                            DisplayMemberBinding="{Binding DisplayCost}"/>
                                                        </GridView.Columns>
                                                    </GridView>
                                                </ListView.View>
                                            </ListView>
                                        </DockPanel>

                                        <GroupBox Header="Purchase Details" Grid.Column="1">
                                            <!--<GroupBox.Visibility>
                                                <MultiBinding Converter="{StaticResource ListContainsToVis}">
                                                    <Binding Path="EBMCompanionPerkSelection"/>
                                                    <Binding Path="EBMCompanionPerkList"/>
                                                </MultiBinding>
                                            </GroupBox.Visibility>-->
                                            <Grid Margin="8,0,0,0">
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="1.1*"/>
                                                    <RowDefinition Height="1.6*"/>
                                                    <RowDefinition Height="3*"/>
                                                </Grid.RowDefinitions>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*" MaxWidth="400"/>
                                                    <ColumnDefinition Width="*"/>
                                                </Grid.ColumnDefinitions>

                                                <StackPanel>
                                                    <TextBlock Text="Name"/>
                                                    <TextBox Text="{Binding EBMCompanionPerkName, ValidatesOnNotifyDataErrors=True}"
                                                             Width="120"/>

                                                    <TextBlock Text="Cost" Margin="0,8,0,0"/>
                                                    <TextBox Text="{Binding EBMCompanionPerkSelection.Cost, ValidatesOnNotifyDataErrors=True}"
                                                             Width="40"/>
                                                </StackPanel>

                                                <StackPanel Grid.Column="1">
                                                    <CheckBox Content="Discounted" IsChecked="{Binding EBMCompanionPerkSelection.Discounted}"/>
                                                    <CheckBox Content="Free" IsChecked="{Binding EBMCompanionPerkSelection.Freebie}"
                                                              Margin="0,8,0,0"/>
                                                </StackPanel>

                                                <DockPanel Grid.Row="1">
                                                    <TextBlock Text="Description" DockPanel.Dock="Top"/>
                                                    <TextBox Text="{Binding EBMCompanionPerkDescription, ValidatesOnNotifyDataErrors=True}"
                                                             HorizontalAlignment="Stretch"
                                                             Style="{DynamicResource LargeTextBoxHintTemplate}"
                                                             Tag="Insert Perk description."/>
                                                </DockPanel>

                                                <DockPanel Grid.Row="2" Margin="0,8,0,0">
                                                    <TextBlock Text="Special Traits" DockPanel.Dock="Top"/>
                                                    <Grid DockPanel.Dock="Bottom" Margin="0,8,0,0">
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="Auto"/>
                                                            <ColumnDefinition Width="*"/>
                                                            <ColumnDefinition Width="Auto"/>
                                                        </Grid.ColumnDefinitions>

                                                        <Button Content="New Trait" 
                                                                Command="{Binding NewEBMTraitCommand}"
                                                                Style="{DynamicResource DataGridButton}"/>

                                                        <Button Content="Delete Trait"
                                                                Command="{Binding DeleteEBMTraitCommand}"
                                                                Style="{DynamicResource DataGridButton}"
                                                                Grid.Column="2"/>
                                                    </Grid>
                                                    <ListView ItemsSource="{Binding PurchaseAttributeList}"
                                                              SelectedItem="{Binding PurchaseAttributeSelection}"
                                                              SelectedIndex="{Binding PurchaseAttributeIndex}"
                                                              Loaded="ListView_Loaded" SizeChanged="ListView_SizeChanged" 
                                                              ScrollViewer.ScrollChanged="ListView_ScrollChanged" Tag="0">
                                                        <ListView.View>
                                                            <GridView>
                                                                <GridView.Columns>
                                                                    <GridViewColumn Header="Name" DisplayMemberBinding="{Binding Name}" Width="Auto"/>
                                                                    <GridViewColumn Header="Type" DisplayMemberBinding="{Binding Type}" Width="60"/>
                                                                    <GridViewColumn Header="Category" DisplayMemberBinding="{Binding Category}" Width="75"/>
                                                                </GridView.Columns>
                                                            </GridView>
                                                        </ListView.View>
                                                    </ListView>
                                                </DockPanel>

                                                <GroupBox Header="Trait Details" Grid.Row="2" Grid.Column="1" Margin="0,8,0,0">
                                                    <!--<GroupBox.Visibility>
                                                        <MultiBinding Converter="{StaticResource ListContainsToVis}">
                                                            <Binding Path="PurchaseAttributeSelection"/>
                                                            <Binding Path="PurchaseAttributeList"/>
                                                        </MultiBinding>
                                                    </GroupBox.Visibility>-->
                                                    <StackPanel VerticalAlignment="Top" HorizontalAlignment="Left">
                                                        <TextBlock Text="Name"/>
                                                        <ComboBox ItemsSource="{Binding CurrentAttributeList}"
                                                                  SelectedValue="{Binding CurrentAttributeSelection}"
                                                                  MinWidth="100"/>

                                                        <TextBlock Text="Type" Margin="0,12,0,0"/>
                                                        <ComboBox ItemsSource="{Binding AvailableAttributeTypeList}" 
                                                                  SelectedValue="{Binding AttributeTypeSelection}"
                                                                  MinWidth="100"/>

                                                        <TextBlock Text="Category" Margin="0,12,0,0"/>
                                                        <ComboBox ItemsSource="{Binding AvailableAttributeCategoryList}" 
                                                                  SelectedValue="{Binding AttributeCategorySelection}"
                                                                  MinWidth="100"/>

                                                        <StackPanel Visibility="{Binding AttributeBasicSelected, Converter={StaticResource BoolToVis}}"
                                                                    Margin="0,12,0,0" VerticalAlignment="Top" HorizontalAlignment="Left">
                                                            <TextBlock Text="Rank"/>
                                                            <ComboBox ItemsSource="{Binding AttributeRankDictionary}"
                                                                      DisplayMemberPath="Key"
                                                                      SelectedValuePath="Value"
                                                                      SelectedValue="{Binding PurchaseAttributeSelection.Rank}"
                                                                      MinWidth="100"/>
                                                        </StackPanel>
                                                        <StackPanel Visibility="{Binding AttributeBoosterSelected, Converter={StaticResource BoolToVis}}"
                                                                    VerticalAlignment="Top" HorizontalAlignment="Left" Margin="0,12,0,0">
                                                            <TextBlock Text="Multiplier"/>
                                                            <TextBox Text="{Binding PurchaseAttributeSelection.Value, ValidatesOnNotifyDataErrors=True}" MinWidth="40"/>
                                                        </StackPanel>
                                                        <StackPanel Visibility="{Binding AttributeSpecialSelected, Converter={StaticResource BoolToVis}}" 
                                                                    VerticalAlignment="Top" HorizontalAlignment="Left" Margin="0,12,0,0">
                                                            <TextBlock Text="Value"/>
                                                            <TextBox Text="{Binding PurchaseAttributeSelection.Value, ValidatesOnNotifyDataErrors=True}" MinWidth="40"/>
                                                        </StackPanel>
                                                    </StackPanel>
                                                </GroupBox>
                                            </Grid>
                                        </GroupBox>
                                    </Grid>
                                </TabItem>
                                <TabItem Header="Drawbacks">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*" MaxWidth="400"/>
                                            <ColumnDefinition Width="2*"/>
                                        </Grid.ColumnDefinitions>

                                        <DockPanel Margin="4,0,4,0">
                                            <ContentControl Template="{DynamicResource BudgetPanel}" DockPanel.Dock="Top"
                                                            Margin="0,4,0,4"/>

                                            <Grid DockPanel.Dock="Bottom" Margin="0,4,0,4">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto"/>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="Auto"/>
                                                </Grid.ColumnDefinitions>
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="*"/>
                                                    <RowDefinition Height="*"/>
                                                    <RowDefinition Height="*"/>
                                                </Grid.RowDefinitions>

                                                <Button Content="New Drawback" 
                                                        Command="{Binding NewEBMDrawbackCommand}"
                                                        Style="{DynamicResource DataGridButton}"/>

                                                <Button Content="Delete Drawback"
                                                        Command="{Binding DeleteEBMDrawbackCommand}"
                                                        Style="{DynamicResource DataGridButton}"
                                                        Grid.Column="2"/>
                                            </Grid>

                                            <ListView ItemsSource="{Binding EBMDrawbackList}"
                                                      SelectedItem="{Binding EBMDrawbackSelection}"
                                                      SelectedIndex="{Binding EBMDrawbackIndex}"
                                                      Loaded="ListView_Loaded" SizeChanged="ListView_SizeChanged" 
                                                      ScrollViewer.ScrollChanged="ListView_ScrollChanged" Tag="0">
                                                <ListView.View>
                                                    <GridView>
                                                        <GridView.Columns>
                                                            <GridViewColumn Header="Name" Width="Auto"
                                                                            CellTemplate="{StaticResource ResourceKey=GridViewDefaultColumn}"
                                                                            DisplayMemberBinding="{Binding Name}"/>
                                                            <GridViewColumn Header="Value" Width="50"
                                                                            CellTemplate="{StaticResource ResourceKey=GridViewDefaultColumn}"
                                                                            DisplayMemberBinding="{Binding Value}"/>
                                                        </GridView.Columns>
                                                    </GridView>
                                                </ListView.View>
                                            </ListView>
                                        </DockPanel>

                                        <GroupBox Header="Drawback Details" Grid.Column="1">
                                            <!--<GroupBox.Visibility>
                                                <MultiBinding Converter="{StaticResource ListContainsToVis}">
                                                    <Binding Path="EBMDrawbackSelection"/>
                                                    <Binding Path="EBMDrawbackList"/>
                                                </MultiBinding>
                                            </GroupBox.Visibility>-->
                                            <Grid Margin="8,0,0,0">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*" MaxWidth="500"/>
                                                </Grid.ColumnDefinitions>
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="*"/>
                                                    <RowDefinition Height="2*"/>
                                                    <RowDefinition Height="2*"/>
                                                </Grid.RowDefinitions>

                                                <StackPanel>
                                                    <TextBlock Text="Name"/>
                                                    <TextBox Text="{Binding EBMDrawbackName, ValidatesOnNotifyDataErrors=True}"
                                                             Width="120"/>

                                                    <TextBlock Text="Cost" Margin="0,8,0,0"/>
                                                    <TextBox Text="{Binding EBMDrawbackSelection.Value, ValidatesOnNotifyDataErrors=True}"
                                                             Width="40"/>
                                                </StackPanel>

                                                <DockPanel Grid.Row="1">
                                                    <TextBlock Text="Description" DockPanel.Dock="Top"/>
                                                    <TextBox Text="{Binding EBMDrawbackDescription, ValidatesOnNotifyDataErrors=True}"
                                                             HorizontalAlignment="Stretch"
                                                             Style="{DynamicResource LargeTextBoxHintTemplate}"
                                                             Tag="Insert Drawback description."/>
                                                </DockPanel>
                                            </Grid>
                                        </GroupBox>
                                    </Grid>
                                </TabItem>
                            </TabControl>
                        </TabItem>
                        <TabItem Header="Additions">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" MaxWidth="400"/>
                                    <ColumnDefinition Width="2*"/>
                                </Grid.ColumnDefinitions>

                                <ListView ItemsSource="{Binding BodyModAdditionList}"
                                          SelectedItem="{Binding BodyModAdditionSelection}"
                                          SelectedIndex="{Binding BodyModAdditionSelectionIndex}"
                                          Loaded="ListView_Loaded" SizeChanged="ListView_SizeChanged" 
                                          ScrollViewer.ScrollChanged="ListView_ScrollChanged" Tag="0"
                                          Margin="4,0,4,4">
                                    <ListView.View>
                                        <GridView>
                                            <GridView.Columns>
                                                <GridViewColumn Header="Name" Width="Auto"
                                                                CellTemplate="{StaticResource ResourceKey=GridViewDefaultColumn}"
                                                                DisplayMemberBinding="{Binding Name}"/>
                                            </GridView.Columns>
                                        </GridView>
                                    </ListView.View>
                                </ListView>

                                <GroupBox Header="Addition Details" Grid.Column="1">
                                    <!--<GroupBox.Visibility>
                                        <MultiBinding Converter="{StaticResource ListContainsToVis}">
                                            <Binding Path="BodyModAdditionSelection"/>
                                            <Binding Path="BodyModAdditionList"/>
                                        </MultiBinding>
                                    </GroupBox.Visibility>-->
                                    <Grid Margin="8,0,0,0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*" MaxWidth="700"/>
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="*"/>
                                            <RowDefinition Height="2*"/>
                                            <RowDefinition Height="2*"/>
                                        </Grid.RowDefinitions>

                                        <StackPanel>
                                            <TextBlock Text="Name"/>
                                            <TextBox Text="{Binding BodyModAdditionName, ValidatesOnNotifyDataErrors=True}"
                                                     Width="120"/>

                                            <TextBlock Text="Source Jump" Margin="0,8,0,0"/>
                                            <TextBox Text="{Binding BodyModAdditionSelection.SourceJump, ValidatesOnNotifyDataErrors=True}"
                                                     Width="120"
                                                     IsReadOnly="True"/>
                                        </StackPanel>

                                        <DockPanel Grid.Row="1">
                                            <TextBlock Text="Description" DockPanel.Dock="Top"/>
                                            <TextBox Text="{Binding BodyModAdditionDescription, ValidatesOnNotifyDataErrors=True}"
                                                     HorizontalAlignment="Stretch"
                                                     Style="{DynamicResource LargeTextBoxHintTemplate}"/>
                                        </DockPanel>
                                    </Grid>
                                </GroupBox>
                            </Grid>
                        </TabItem>
                    </TabControl>
                </Grid>
            </TabItem>
        </TabControl>
    </Grid>
</UserControl>
